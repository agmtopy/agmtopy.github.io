<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>agmtopyåšå®¢</title>
  
  <subtitle>agmtopy</subtitle>
  <link href="https://agmtopy.gitee.io/atom.xml" rel="self"/>
  
  <link href="https://agmtopy.gitee.io/"/>
  <updated>2021-07-11T14:23:15.326Z</updated>
  <id>https://agmtopy.gitee.io/</id>
  
  <author>
    <name>agmtopy</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¦‚ä½•ç¼–å†™JavaAgent</title>
    <link href="https://agmtopy.gitee.io/2021/07/03/12.JVM/11.%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99JavaAgent/"/>
    <id>https://agmtopy.gitee.io/2021/07/03/12.JVM/11.%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99JavaAgent/</id>
    <published>2021-07-03T15:11:15.000Z</published>
    <updated>2021-07-11T14:23:15.326Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¦‚ä½•ç¼–å†™JavaAgent"><a href="#å¦‚ä½•ç¼–å†™JavaAgent" class="headerlink" title="å¦‚ä½•ç¼–å†™JavaAgent"></a>å¦‚ä½•ç¼–å†™JavaAgent</h1><p>è¿™ç¯‡æ–‡ç« æ˜¯æ ¹æ®MegaEaseçš„è¢ä¼Ÿè€å¸ˆçš„åˆ†äº«è€Œæ¥,åœ°å€æ˜¯<a href="https://www.youtube.com/watch?v=ujhqct2POLU">How To Write a JavaAgent</a></p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><h3 id="java-agentæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#java-agentæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="java agentæ˜¯ä»€ä¹ˆï¼Ÿ"></a>java agentæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>java agentæ˜¯jdk1.5æ—¶å€™æ¨å‡ºçš„ä¸€ä¸ªåœ¨è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹class,ä»è€Œè¾¾åˆ°åŠ¨æ€ä¿®æ”¹è¡Œä¸ºçš„ç›®çš„</p><h3 id="èƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#èƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="èƒ½åšä»€ä¹ˆï¼Ÿ"></a>èƒ½åšä»€ä¹ˆï¼Ÿ</h3><p>åŠŸèƒ½ä¸AOPç±»ä¼¼ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨ä¸å½»åº•å’Œä¸šåŠ¡ä»£ç éš”ç¦»ï¼Œå¯ä»¥å®ŒæˆAOPç›¸åŒçš„äº‹æƒ…ï¼Œå¹¶ä¸”ä¸å…¥ä¾µä¸šåŠ¡ä»£ç ï¼Œé€‚åˆäºæ—¥å¿—é‡‡é›†ã€é“¾è·¯è¿½è¸ªç­‰åŸºç¡€ç»„ä»¶</p><h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><p>java agentä¸»è¦å¯ä»¥åœ¨ä¸¤ä¸ªæ—¶é—´ç‚¹è¿›è¡ŒåŠ è½½ï¼š</p><ol><li>JVMå¯åŠ¨æ—¶</li><li>ç›®æ ‡æ–¹æ³•è¿è¡Œæ—¶</li></ol><h4 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h4><p><img src="https://i.loli.net/2021/07/11/uUxsh1JqQzaSXAW.png" alt="é¡¹ç›®ç»“æ„"></p><h4 id="å¯åŠ¨æ—¶åŠ è½½ç¤ºä¾‹"><a href="#å¯åŠ¨æ—¶åŠ è½½ç¤ºä¾‹" class="headerlink" title="å¯åŠ¨æ—¶åŠ è½½ç¤ºä¾‹"></a>å¯åŠ¨æ—¶åŠ è½½ç¤ºä¾‹</h4><ul><li>AgentExampleDemo</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AgentExampleDemo</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">premain</span><span class="token punctuation">(</span><span class="token class-name">String</span> agentArgs<span class="token punctuation">,</span> <span class="token class-name">Instrumentation</span> instrumentation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"premain start..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>AgentTarget</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AgentTarget</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹æ‰“å°...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>build.gradle</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">  //é‡æ–°å®šä¹‰MANIFEST.MF  jar <span class="token punctuation">&#123;</span>    manifest <span class="token punctuation">&#123;</span>        attributes <span class="token string">'Premain-Class'</span><span class="token builtin class-name">:</span> <span class="token string">'com.agmtopy.source.agent.AgentExampleDemo'</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>javaagentå¯åŠ¨å‚æ•°</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-javaagent:build/libs/jvmsource-1.0-SNAPSHOT.jar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://i.loli.net/2021/07/11/kH6wQJD5my7bxuX.png" alt="Ideaè®¾ç½®"></p><ul><li>è¿è¡Œç»“æœ</li></ul><p><a href="https://imgtu.com/i/R7rfyV"><img src="https://z3.ax1x.com/2021/07/07/R7rfyV.png" alt="ç»“æœ"></a></p><blockquote><p>è¿™æ˜¯ç¬¬ä¸€ç§ä½¿ç”¨agentçš„æ–¹å¼,åœ¨ç›®æ ‡ä»£ç è¿è¡Œå‰ä½¿ç”¨,java agentä»£ç ä¸ç›®æ ‡æ–¹æ³•è¿›è¡Œç»„åˆçš„æ–¹å¼è¿›è¡Œæ‰§è¡Œ</p></blockquote><h3 id="è¿è¡Œæ—¶åŠ è½½ç¤ºä¾‹"><a href="#è¿è¡Œæ—¶åŠ è½½ç¤ºä¾‹" class="headerlink" title="è¿è¡Œæ—¶åŠ è½½ç¤ºä¾‹"></a>è¿è¡Œæ—¶åŠ è½½ç¤ºä¾‹</h3><p>ç›®æ ‡æ–¹æ³•è¿œè¡Œæ—¶åŠ è½½è¦ä½¿ç”¨åˆ°javassistè¿™ä¸ªå·¥å…·å¸®åŠ©æˆ‘ä»¬ä¿®æ”¹class,æ³¨æ„javassistæœ‰ä¸¤ä¸ªé¡¹ç›®,è¦ä½¿ç”¨<b>org.javassist</b>ğŸ˜‚æ‰å¯ä»¥</p><pre class="line-numbers language-gradle" data-language="gradle"><code class="language-gradle">implementation &quot;org.javassist:javassist:3.28.0-GA&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>ä¿®æ”¹AgentTarget</li></ol><p>ä¿æŒjvmè¿è¡Œ,ä»¥ä¾¿é€šè¿‡Attachçš„æ–¹å¼è¿›è¡Œæ›¿æ¢</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AgentTarget</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹æ‰“å°...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>åœ¨AgentExampleDemoä¸­å¢åŠ agentmainæ–¹æ³•</li></ol><ul><li>AgentExampleDemo</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * attach:æ–¹å¼è¿è¡Œ */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">agentmain</span><span class="token punctuation">(</span><span class="token class-name">String</span> agentArgs<span class="token punctuation">,</span> <span class="token class-name">Instrumentation</span> inst<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"agentmain start..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ˜¾ç¤ºæ‰§è¡Œæ—¶é—´</span>    inst<span class="token punctuation">.</span><span class="token function">addTransformer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ShowExecTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//é‡å†™è½½å…¥æ–°çš„å­—èŠ‚ç </span>        inst<span class="token punctuation">.</span><span class="token function">retransformClasses</span><span class="token punctuation">(</span><span class="token class-name">AgentTarget</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnmodifiableClassException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>å¢åŠ ShowExecTimeæ¥ä¿®æ”¹å­—èŠ‚ç </li></ol><ul><li>ShowExecTime</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*** è‡ªå®šä¹‰ClassFileTransformer*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowExecTime</span> <span class="token keyword">implements</span> <span class="token class-name">ClassFileTransformer</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> loader<span class="token punctuation">,</span> <span class="token class-name">String</span> className<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> classBeingRedefined<span class="token punctuation">,</span> <span class="token class-name">ProtectionDomain</span> protectionDomain<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> classfileBuffer<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalClassFormatException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//åªé’ˆå¯¹ç›®æ ‡åŒ…ä¸‹è¿›è¡Œè€—æ—¶ç»Ÿè®¡</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>className<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"com/agmtopy/source/agent"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> classfileBuffer<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨åŠ è½½ç±»ï¼š"</span> <span class="token operator">+</span> className<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">ClassPool</span> classPool <span class="token operator">=</span> <span class="token class-name">ClassPool</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            classPool<span class="token punctuation">.</span><span class="token function">appendClassPath</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoaderClassPath</span><span class="token punctuation">(</span>loader<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">CtClass</span> cl <span class="token operator">=</span> classPool<span class="token punctuation">.</span><span class="token function">makeClass</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>classfileBuffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// æ‰€æœ‰æ–¹æ³•ï¼Œç»Ÿè®¡è€—æ—¶</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CtMethod</span> method <span class="token operator">:</span> cl<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹ä¿®æ”¹:"</span> <span class="token operator">+</span> method <span class="token operator">+</span><span class="token string">" æ–¹æ³•"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//éœ€è¦é€šè¿‡`addLocalVariable`æ¥å£°æ˜å±€éƒ¨å˜é‡</span>                method<span class="token punctuation">.</span><span class="token function">addLocalVariable</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">,</span> <span class="token class-name">CtClass</span><span class="token punctuation">.</span>longType<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ’å…¥ å¼€å§‹è¯­å¥</span>                method<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token string">"start = java.lang.System.currentTimeMillis();"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> methodName <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getLongName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//åˆ›å»ºå¹¶æ’å…¥ æ‰“å°è¯­å¥ System.out.println("æ–¹æ³•ï¼štestï¼Œ æ‰§è¡Œæ—¶é—´ï¼š" + (System.currentTimeMillis() - start));</span>                <span class="token class-name">String</span> statement <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"java.lang.System.out.println(\"æ–¹æ³•ï¼š%sï¼Œ æ‰§è¡Œæ—¶é—´ï¼š\" + (java.lang.System.currentTimeMillis() - start));"</span><span class="token punctuation">,</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>                method<span class="token punctuation">.</span><span class="token function">insertAfter</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> transformed <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">toBytecode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> transformed<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> classfileBuffer<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>transform()æ–¹æ³•æ˜¯é€šè¿‡javassistæ¥ä¿®æ”¹å­—èŠ‚ç ,åœ¨æ–¹æ³•æ‰§è¡Œå‰åæ’å…¥å±€éƒ¨å˜é‡ï¼Œç„¶åæ‰“å°æ–¹æ³•æ‰§è¡Œè€—æ—¶</p><ol start="4"><li>è¿è¡Œjarè¿›è¡Œæ›¿æ¢å­—èŠ‚ç æ›¿æ¢</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ä¿®æ”¹æŒ‡å®šè¿è¡Œä¸­çš„ä»£ç  */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ä¼ å…¥ç›®æ ‡ JVM pid</span>    <span class="token class-name">VirtualMachine</span> vm <span class="token operator">=</span> <span class="token class-name">VirtualMachine</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token string">"6068"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vm<span class="token punctuation">.</span><span class="token function">loadAgent</span><span class="token punctuation">(</span><span class="token string">"D:\\project\\jvmsource\\build\\libs\\jvmsource-1.0-SNAPSHOT.jar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li>ä¿®æ”¹MANIFEST.MF<br>éœ€è¦å°†<b>Agent-Class</b>å†™å…¥MANIFEST.MFæ–‡ä»¶</li></ol><ul><li>gradle</li></ul><pre class="line-numbers language-gradle" data-language="gradle"><code class="language-gradle">jar &#123;    manifest &#123;        attributes &#39;Can-Redefine-Classes&#39;: true        attributes &#39;Can-Retransform-Classes&#39;: true        attributes &#39;Agent-Class&#39;: &#39;com.agmtopy.source.agent.AgentExampleDemo&#39;        attributes &#39;Premain-Class&#39;: &#39;com.agmtopy.source.agent.AgentExampleDemo&#39;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>æ‰§è¡Œå­—èŠ‚ç æ›¿æ¢</li></ol><p>6.1 å…ˆå°†é¡¹ç›®æ„å»ºæˆä¸ºjaråŒ…<br>6.2 è¿è¡ŒAgentTarget<br>ä¸éœ€è¦ä½¿ç”¨-javaagentçš„æ–¹å¼è¿›è¡Œå¯åŠ¨<br><img src="https://i.loli.net/2021/07/11/d3kZXA769yheB8L.png" alt="AgentTargetç»“æœ"><br>6.3 æ‰§è¡Œå­—èŠ‚ç æ›¿æ¢</p><ul><li>è¿è¡Œç»“æœ<br><img src="https://i.loli.net/2021/07/11/bksIl8USHRMc72d.png" alt="è¿è¡Œç»“æœ"></li></ul><h2 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h2><p>java agentçš„åŸç†æ ¹æ®åŠ è½½æ—¶æœºè¿˜æ˜¯å¯ä»¥åˆ†ä¸ºä¸¤ç±»å…¥å£ï¼Œä¸€ç±»æ˜¯å¯åŠ¨æ—¶å°†agent classæŒ‚è½½åˆ°ç›®æ ‡JVMä¸Šï¼Œå¦å¤–ä¸€ç±»å…¥å£æ˜¯è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼Œé‡‡ç”¨çš„æ˜¯JVM attachæŠ€æœ¯</p><h3 id="å¯åŠ¨æ—¶åŠ è½½åŸç†åˆ†æ"><a href="#å¯åŠ¨æ—¶åŠ è½½åŸç†åˆ†æ" class="headerlink" title="å¯åŠ¨æ—¶åŠ è½½åŸç†åˆ†æ"></a>å¯åŠ¨æ—¶åŠ è½½åŸç†åˆ†æ</h3><h4 id="åˆ†æç›®æ ‡æ–¹æ³•è°ƒç”¨é“¾"><a href="#åˆ†æç›®æ ‡æ–¹æ³•è°ƒç”¨é“¾" class="headerlink" title="åˆ†æç›®æ ‡æ–¹æ³•è°ƒç”¨é“¾"></a>åˆ†æç›®æ ‡æ–¹æ³•è°ƒç”¨é“¾</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AgentExampleDemo</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">premain</span><span class="token punctuation">(</span><span class="token class-name">String</span> agentArgs<span class="token punctuation">,</span> <span class="token class-name">Instrumentation</span> instrumentation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"premain start..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ‰“å°è°ƒç”¨æ ˆ</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">StackTraceElement</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">StringBuffer</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            buffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"index: "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" ClassName: "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" Method Name : "</span> <span class="token operator">+</span> elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getMethodName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://i.loli.net/2021/07/07/f4o2qQryOKwpWPL.png" alt="è°ƒç”¨æ ˆ"></p><p>é€šè¿‡è°ƒç”¨æ ˆå¯ä»¥åˆ†æå‡ºæ˜¯<B>InstrumentationImpl</B>è°ƒç”¨<B>premain()</B>æ–¹æ³•çš„,ä¸‹é¢å¼€å§‹åˆ†æInstrumentationImpl</p><h4 id="InstrumentationImpl"><a href="#InstrumentationImpl" class="headerlink" title="InstrumentationImpl"></a>InstrumentationImpl</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InstrumentationImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Instrumentation</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><B>InstrumentationImpl</B>å®ç°<B>Instrumentation</B>,<B>Instrumentation</B>æ¥å£æ˜¯JVMå®šä¹‰å¯¹å­—èŠ‚ç æ“ä½œçš„æ¥å£ï¼Œæˆ‘ä»¬æŒ‰ç…§è°ƒç”¨é“¾çš„é¡ºåºå€’å™è¿›è¡Œåˆ†æï¼ˆæ‰§è¡Œã€è§¦å‘ï¼‰</p><ol><li>permainæ‰§è¡Œè¿‡ç¨‹åˆ†æ</li></ol><p>ç”±äº<B>InstrumentationImpl.loadClassAndCallPremain()</B>æ–¹æ³•å·²ç»æœ€é¡¶å±‚çš„javaä»£ç å…¥å£ï¼Œé€šè¿‡æ–¹æ³•åç§°æŸ¥æ‰¾å¯ä»¥åœ¨<B>JPLISAgent.h</B>æ–‡ä»¶ä¸­æŸ¥è¯¢åˆ°è¯¥æ–¹æ³•åç§°è¢«å®šä¹‰æˆä¸ºä¸€ä¸ªå¸¸é‡</p><ul><li>JPLISAgent.h</li></ul><pre class="line-numbers language-C" data-language="C"><code class="language-C">#define JPLIS_INSTRUMENTIMPL_PREMAININVOKER_METHODNAME      &quot;loadClassAndCallPremain&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¯¥å¸¸é‡è¢«<B>JPLISAgent.c</B>çš„<B>createInstrumentationImpl</B>æ–¹æ³•æ‰€ä½¿ç”¨</p><ul><li>JPLISAgent.c</li></ul><pre class="line-numbers language-C" data-language="C"><code class="language-C">jboolean createInstrumentationImpl(JNIEnv *jnienv,JPLISAgent *agent)&#123;    &#x2F;&#x2F;çœç•¥....    &#x2F;* Now look up the method ID for the pre-main caller (we will need this more than once) *&#x2F;    if (!errorOutstanding)    &#123;        &#x2F;&#x2F;â‘ è·å–åˆ°è°ƒç”¨permainæ–¹æ³•MethodId        premainCallerMethodID &#x3D; (*jnienv)-&gt;GetMethodID(jnienv,                                                       implClass,                                                       JPLIS_INSTRUMENTIMPL_PREMAININVOKER_METHODNAME,                                                       JPLIS_INSTRUMENTIMPL_PREMAININVOKER_METHODSIGNATURE);    &#125;    if (!errorOutstanding)    &#123;        agent-&gt;mInstrumentationImpl &#x3D; resultImpl;        &#x2F;&#x2F;â‘¡æŒ‡é’ˆèµ‹å€¼        agent-&gt;mPremainCaller &#x3D; premainCallerMethodID;        agent-&gt;mAgentmainCaller &#x3D; agentmainCallerMethodID;        agent-&gt;mTransform &#x3D; transformMethodID;    &#125;        &#x2F;&#x2F;çœç•¥....    return !errorOutstanding;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ®µæ–¹æ³•ä¸»è¦æ˜¯åšä¸¤ä»¶äº‹ï¼Œç¬¬ä¸€æ˜¯è·å–åˆ°è°ƒç”¨permainæ–¹æ³•MethodIdï¼›ç¬¬äºŒä»¶äº‹æ˜¯å°†è¿™ä¸ªMethodIdä¼ é€’å‡ºå»,åˆ†æmPremainCallerçš„ä½¿ç”¨å¯ä»¥å¾—åˆ°è¯¥å€¼åœ¨â€™processJavaStartâ€™ä¸­ä½¿ç”¨</p><p><img src="https://i.loli.net/2021/07/07/WbT3LyNCQilShcv.png" alt="mPremainCaller"></p><ul><li>processJavaStart</li></ul><pre class="line-numbers language-C" data-language="C"><code class="language-C">result &#x3D; startJavaAgent(agent, jnienv,                        agent-&gt;mAgentClassName,                         agent-&gt;mOptionsString,                        agent-&gt;mPremainCaller);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>processJavaStarté€šè¿‡å‰é¢è·å–åˆ°çš„MethodIdå¯åŠ¨javaAgentï¼Œä¸‹é¢æˆ‘ä»¬åˆ†æ<B>statrJavaAgent</B></p><ul><li>statrJavaAgent</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//...</span>success <span class="token operator">=</span> <span class="token function">invokeJavaAgentMainMethod</span><span class="token punctuation">(</span>jnienv<span class="token punctuation">,</span>                                    agent<span class="token operator">-></span>mInstrumentationImpl<span class="token punctuation">,</span>                                    agentMainMethod<span class="token punctuation">,</span>                                    classNameObject<span class="token punctuation">,</span>                                    optionsStringObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨</B>invokeJavaAgentMainMethod</B>ä¼ å…¥å¯¹è±¡ã€æ–¹æ³•IDã€å®å‚ï¼Œæ‰§è¡Œå®šä¹‰çš„premainæ–¹æ³•</p><p>é€šè¿‡ä¸Šé¢çš„åˆ†æçŸ¥é“äº†permaiæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œç»§ç»­çœ‹ä¸€ä¸‹permainæ–¹æ³•æ˜¯å¦‚ä½•è§¦å‘çš„</p><ol start="2"><li>permainè§¦å‘è¿‡ç¨‹åˆ†æ</li></ol><p><B>processJavaStart</B>æ–¹æ³•æ˜¯æ‰§è¡Œpermainçš„å…¥å£ï¼Œå®ƒåœ¨<B>JPLISAgent.h</B>ä¸­è¿›è¡Œå®šä¹‰çš„,åœ¨æºä»£ç ä¸­å…¨å±€æœç´¢ï¼š<B> JPLISAgent *</B>å¯ä»¥æ‰¾åˆ°JPLISAgentæ˜¯åœ¨&lt;InvocationAdapter.c&gt;ä¸­é‡æ–°è¿›è¡Œè¿‡èµ‹å€¼</p><ul><li>InvocationAdapter.c</li></ul><pre class="line-numbers language-C" data-language="C"><code class="language-C">void JNICALL eventHandlerVMInit(jvmtiEnv *jvmtienv,                    JNIEnv *jnienv,                    jthread thread)  &#123;      JPLISAgent *agent &#x3D; environment-&gt;mAgent;  &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><B>eventHandlerVMInit</B>æ–¹æ³•åœ¨<B>JPLISAgent.c</B>çš„<B>initializeJPLISAgent</B>æ–¹æ³•ä¸­è¢«è®¾ç½®ä¸ºå›è°ƒæ–¹æ³•</p><ul><li>initializeJPLISAgent</li></ul><pre class="line-numbers language-C" data-language="C"><code class="language-C">&#x2F;&#x2F;å…³é”®æ‰§è¡Œé€»è¾‘if (jvmtierror &#x3D;&#x3D; JVMTI_ERROR_NONE)&#123;    jvmtiEventCallbacks callbacks;    memset(&amp;callbacks, 0, sizeof(callbacks));    &#x2F;&#x2F;è®¾ç½®JVMå›è°ƒ    callbacks.VMInit &#x3D; &amp;eventHandlerVMInit;    jvmtierror &#x3D; (*jvmtienv)-&gt;SetEventCallbacks(jvmtienv,                                                &amp;callbacks,                                                sizeof(callbacks));    check_phase_ret_blob(jvmtierror, JPLIS_INIT_ERROR_FAILURE);    jplis_assert(jvmtierror &#x3D;&#x3D; JVMTI_ERROR_NONE);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡è¿™é‡Œå¯ä»¥çœ‹åˆ°åœ¨åˆå§‹åŒ–JPLISAgentæ—¶å€™å°±è®¾ç½®äº†JVMåˆå§‹åŒ–å®Œæˆåä¼šå›è°ƒInvocationAdapteræ¥æ‰§è¡Œ<B>permain</B>æ–¹æ³•</p><ol start="3"><li>JPLISAgentçš„åˆå§‹åŒ–</li></ol><p>å›æº¯<B>initializeJPLISAgent</B>æ–¹æ³•å¯ä»¥æ‰¾åˆ°åˆ†åˆ«åœ¨<B>InvocationAdapter.c</B>çš„<B>DEF_Agent_OnLoad</B>ã€<B>DEF_Agent_OnAttach</B>ä¸Šè¢«è°ƒç”¨ã€‚è¿™ä¸¤ç§æ–¹å¼ä¹Ÿæ­£æ˜¯å‰é¢è®²åˆ°çš„agentçš„ä¸¤ç§å¢å¼ºæ–¹å¼çš„å…¥å£ã€‚</p><p>åœ¨JVMå¯åŠ¨æ—¶æœ€å¼€å§‹åŠ è½½çš„æ˜¯libinstrumentåŠ¨æ€é“¾æ¥åº“ï¼Œç„¶ååœ¨åŠ¨æ€é“¾æ¥åº“é‡Œé¢æ‰¾åˆ°JVMTIçš„å…¥å£æ–¹æ³•ï¼šAgent_OnLoadå’ŒAgent_OnAttachã€‚InvocationAdapter.cçš„å®šä¹‰</p><ul><li>InvocationAdapter.c</li></ul><pre class="line-numbers language-C" data-language="C"><code class="language-C">&#x2F;**  This will be called once for every -javaagent on the command line.*  Each call to Agent_OnLoad will create its own agent and agent data.**  The argument tail string provided to Agent_OnLoad will be of form*  &lt;jarfile&gt;[&#x3D;&lt;options&gt;]. The tail string is split into the jarfile and*  options components. The jarfile manifest is parsed and the value of the*  Premain-Class attribute will become the agent&#39;s premain class. The jar*  file is then added to the system class path, and if the Boot-Class-Path*  attribute is present then all relative URLs in the value are processed*  to create boot class path segments to append to the boot class path.*&#x2F;JNIEXPORT jint JNICALLDEF_Agent_OnLoad(JavaVM *vm, char *tail, void *reserved)&#x2F;**  This will be called once each time a tool attaches to the VM and loads*  the JPLIS library.*&#x2F;JNIEXPORT jint JNICALLDEF_Agent_OnAttach(JavaVM *vm, char *args, void *reserved)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>æ•´ä½“é€»è¾‘<br>æ•´ä½“çš„æ‰§è¡Œé€»è¾‘å°±æ˜¯ï¼š</li></ol><ul><li>JPLISAgentå£°æ˜JVMå¯åŠ¨æ—¶å€™åˆå§‹åŒ–JPLISAgent</li><li>JPLISAgentåˆå§‹åŒ–æ—¶è®¾ç½®InvocationAdapterçš„å›è°ƒæ–¹æ³•</li><li>JVMåˆå§‹åŒ–å®Œæˆåæ‰§è¡Œå›è°ƒæ–¹æ³•</li><li>InvocationAdapterçš„å›è°ƒæ–¹æ³•æ‰§è¡Œpermainæ–¹æ³•</li></ul><h3 id="è¿è¡Œæ—¶åŠ è½½åŸç†åˆ†æ"><a href="#è¿è¡Œæ—¶åŠ è½½åŸç†åˆ†æ" class="headerlink" title="è¿è¡Œæ—¶åŠ è½½åŸç†åˆ†æ"></a>è¿è¡Œæ—¶åŠ è½½åŸç†åˆ†æ</h3><ol><li>åˆ†æå­—èŠ‚ç <br>ä½¿ç”¨<B>HSDB</B>æŸ¥çœ‹AgentTargetæœªè¿›è¡Œå­—èŠ‚ç æ›¿æ¢å‰çš„æ•°æ®</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">jhsdb hsdb --pid <span class="token number">21656</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>å¸¸é‡æ± </li></ul><p><img src="https://i.loli.net/2021/07/11/phklzJKYTs7IG16.jpg" alt="æ›¿æ¢å‰çš„å¸¸é‡æ± "></p><p><img src="https://i.loli.net/2021/07/11/tkaOxIQ62fbs84K.png" alt="æ›¿æ¢åçš„å¸¸é‡æ± "><br>æ˜æ˜¾å¯ä»¥çœ‹åˆ°å¸¸é‡æ± ä¸­å¢åŠ äº†22æ¡æŒ‡ä»¤ï¼Œè¿™22æ¡æŒ‡ä»¤å°±æ˜¯æ–°åŠ å…¥çš„å­—èŠ‚ç æ‰€è¦ä½¿ç”¨åˆ°çš„å¸¸é‡</p><ul><li>æ–¹æ³•åŒº</li></ul><p><img src="https://i.loli.net/2021/07/11/3DvWBpyuHQ7I2cM.jpg" alt="æ›¿æ¢å‰çš„æ–¹æ³•åŒº"></p><p><img src="https://i.loli.net/2021/07/11/e9TObiVwDPH7Whv.jpg" alt="æ›¿æ¢åçš„æ–¹æ³•åŒº"></p><ol start="2"><li>é‡æ–°åŠ è½½å­—èŠ‚ç åŸç†<br>@TODO</li></ol><blockquote><p>é€šè¿‡å­—èŠ‚ç å¯¹æ¯”å¯ä»¥æ˜æ˜¾çš„çœ‹å‡ºåœ¨ä½¿ç”¨<B>Instrumentation.addTransformer();</B>åç¡®å®å°†å­—èŠ‚ç è¿›è¡Œäº†ä¿®æ”¹,å…¶å®ä¿®æ”¹å­—èŠ‚ç è¿˜æ˜¯æœ‰ä¸¤ä¸ªæ—¶æœº:</p></blockquote><ul><li>ä¸€ä¸ªæ˜¯åœ¨å¯åŠ¨ç¼–è¯‘æ—¶,ä¼šåœ¨jvmå¯åŠ¨å®Œæ¯•ååœ¨æ‰§è¡Œpermainæ–¹æ³•æ¥ä¿®æ”¹å­—èŠ‚ç </li><li>ä¸€ä¸ªå°±æ˜¯åœ¨è¿è¡ŒæœŸé—´åŠ¨æ€çš„ä¿®æ”¹å­—èŠ‚ç </li></ul><h3 id="æ•´ä½“æ‰§è¡Œé€»è¾‘"><a href="#æ•´ä½“æ‰§è¡Œé€»è¾‘" class="headerlink" title="æ•´ä½“æ‰§è¡Œé€»è¾‘"></a>æ•´ä½“æ‰§è¡Œé€»è¾‘</h3><p><img src="https://i.loli.net/2021/07/11/sCey6D7USV9LRXo.jpg" alt="æ•´ä½“æ‰§è¡Œé€»è¾‘"></p><h2 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h2><ul><li><p>ASM</p></li><li><p>Javassist</p></li><li><p>Byte Buddy</p></li></ul><h3 id="åŠŸèƒ½å¯¹æ¯”"><a href="#åŠŸèƒ½å¯¹æ¯”" class="headerlink" title="åŠŸèƒ½å¯¹æ¯”"></a>åŠŸèƒ½å¯¹æ¯”</h3><table><thead><tr><th>-</th><th>ASM</th><th>Javassist</th><th>Byte Buddy</th></tr></thead><tbody><tr><td>å­¦ä¹ æˆæœ¬</td><td>é«˜</td><td>ä½</td><td>ä½</td></tr><tr><td>ä½¿ç”¨æ–¹æ³•</td><td>ä½¿ç”¨å­—èŠ‚ç æ–¹å¼è¿›è¡Œæ’å…¥,éœ€è¦äº†è§£classç±»ç»“æ„å’ŒJVMæŒ‡ä»¤é›†</td><td>æä¾›é«˜çº§æŠ½è±¡æ¥å£å’Œä½çº§å­—èŠ‚ç æ¥å£</td><td>åŒJavassist,å¹¶ä¸”æä¾›å£°æ˜å¼æ¥å£</td></tr><tr><td>æ€§èƒ½</td><td>æå¿«</td><td>ä¸€èˆ¬</td><td>å¿«</td></tr></tbody></table><p>è¯¦ç»†çš„å¯¹æ¯”å¯å‚è€ƒbyteBuddyå®˜æ–¹èµ„æ–™:<a href="https://bytebuddy.net/#/tutorial">https://bytebuddy.net/#/tutorial</a></p><h3 id="Byte-Buddy"><a href="#Byte-Buddy" class="headerlink" title="Byte Buddy"></a>Byte Buddy</h3><h3 id="Byte-Byddyå¸¸è§é—®é¢˜"><a href="#Byte-Byddyå¸¸è§é—®é¢˜" class="headerlink" title="Byte Byddyå¸¸è§é—®é¢˜"></a>Byte Byddyå¸¸è§é—®é¢˜</h3><ul><li>ä¾èµ–å†²çª</li></ul><p>å¤„ç†æ–¹æ¡ˆï¼š</p><ol><li>æ„å»ºå·¥å…·æ’é™¤</li><li>è‡ªå®šä¹‰classLoader<br>è‡ªå®šä¹‰classLoader,ç ´ååŒäº²å§”æ´¾æœºåˆ¶ </li></ol><ul><li><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2></li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://asm.ow2.io/">https://asm.ow2.io/</a><br><a href="https://www.javassist.org/">https://www.javassist.org/</a><br><a href="https://www.cnblogs.com/chiangchou/p/javassist.html#_label9">https://www.cnblogs.com/chiangchou/p/javassist.html#_label9</a><br><a href="https://bytebuddy.net/#/">https://bytebuddy.net/#/</a><br><a href="https://www.cnblogs.com/old-cha/p/13264114.html">https://www.cnblogs.com/old-cha/p/13264114.html</a><br><a href="https://tech.meituan.com/2019/11/07/java-dynamic-debugging-technology.html">https://tech.meituan.com/2019/11/07/java-dynamic-debugging-technology.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¦‚ä½•ç¼–å†™JavaAgent&quot;&gt;&lt;a href=&quot;#å¦‚ä½•ç¼–å†™JavaAgent&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•ç¼–å†™JavaAgent&quot;&gt;&lt;/a&gt;å¦‚ä½•ç¼–å†™JavaAgent&lt;/h1&gt;&lt;p&gt;è¿™ç¯‡æ–‡ç« æ˜¯æ ¹æ®MegaEaseçš„è¢ä¼Ÿè€å¸ˆçš„åˆ†äº«è€Œæ¥,</summary>
      
    
    
    
    <category term="jvm" scheme="https://agmtopy.gitee.io/categories/jvm/"/>
    
    
    <category term="jvm" scheme="https://agmtopy.gitee.io/tags/jvm/"/>
    
    <category term="agent" scheme="https://agmtopy.gitee.io/tags/agent/"/>
    
  </entry>
  
  <entry>
    <title>é€šè¿‡WSL2ç¼–è¯‘JDKæºç </title>
    <link href="https://agmtopy.gitee.io/2021/06/19/1.%E6%9D%82%E8%AE%B0/%E9%80%9A%E8%BF%87WSL2%E7%BC%96%E8%AF%91JDK%E6%BA%90%E7%A0%81/"/>
    <id>https://agmtopy.gitee.io/2021/06/19/1.%E6%9D%82%E8%AE%B0/%E9%80%9A%E8%BF%87WSL2%E7%BC%96%E8%AF%91JDK%E6%BA%90%E7%A0%81/</id>
    <published>2021-06-19T11:39:54.000Z</published>
    <updated>2021-06-19T16:44:54.486Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é€šè¿‡WSL2ç¼–è¯‘JDKæºç "><a href="#é€šè¿‡WSL2ç¼–è¯‘JDKæºç " class="headerlink" title="é€šè¿‡WSL2ç¼–è¯‘JDKæºç "></a>é€šè¿‡WSL2ç¼–è¯‘JDKæºç </h1><p>WSLçš„å…¨ç§°æ˜¯â€™Windows Subsystem for Linuxâ€™,é€šè¿‡åœ¨ç³»ç»Ÿå±‚é¢å¯¹Linuxå†…æ ¸è¿›è¡Œæ”¯æŒ,WSL1åªæ˜¯éƒ¨åˆ†æ”¯æŒLinuxå†…æ ¸è€ŒWSL2æ”¯æŒå®Œæ•´çš„Linuxå†…æ ¸ã€‚ä¸ä½†å¯ä»¥é€šè¿‡WSLè¿è¡ŒLinuxå†…æ ¸ï¼Œç”šè‡³å¯ä»¥å°†Windows DockeræŒ‡å®šé€šè¿‡WSL2æ¥è¿›è¡Œè¿œè¡Œ</p><h2 id="WSL1-gt-WSL2"><a href="#WSL1-gt-WSL2" class="headerlink" title="WSL1 -&gt; WSL2"></a>WSL1 -&gt; WSL2</h2><ul><li><p>å®‰è£…Linuxå‘è¡Œç‰ˆ<br>WSL1åªéœ€è¦å¼€å¯Linuxå­ç³»ç»Ÿå¹¶ä¸‹è½½linuxå‘è¡Œç‰ˆå³å¯,linuxå‘è¡Œç‰ˆé»˜è®¤æ˜¯åªèƒ½é€šè¿‡Windows Storeè¿›è¡Œä¸‹è½½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸‹è½½å®‰è£…åŒ…(msi)è¿›è¡Œå®‰è£…,æ‰‹åŠ¨é€‰æ‹©å®‰è£…åŒ…åœ°å€å¦‚ä¸‹(<a href="https://docs.microsoft.com/zh-cn/windows/wsl/install-manual">https://docs.microsoft.com/zh-cn/windows/wsl/install-manual</a>)</p></li><li><p>åˆ‡æ¢WSL2</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wsl --set-default-version <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å¯åŠ¨WSL</p></li></ul><ol><li>åº”ç”¨ç¨‹åºç›´æ¥å¯åŠ¨å®‰è£…Linuxå‘è¡Œç‰ˆ</li><li>â€˜wsl -l -vâ€™ æ£€æŸ¥WSLç‰ˆæœ¬,VERSION -&gt; 2å³å¯<br><a href="https://imgtu.com/i/RPsbr9"><img src="https://z3.ax1x.com/2021/06/19/RPsbr9.png" alt="WSL2"></a></li></ol><h2 id="ç¼–è¯‘JDK"><a href="#ç¼–è¯‘JDK" class="headerlink" title="ç¼–è¯‘JDK"></a>ç¼–è¯‘JDK</h2><p>ä¸¥è°¨çš„è¯´æ³•æ˜¯ç¼–è¯‘OpenJDK</p><h3 id="ä¸‹è½½JDKæºä»£ç "><a href="#ä¸‹è½½JDKæºä»£ç " class="headerlink" title="ä¸‹è½½JDKæºä»£ç "></a>ä¸‹è½½JDKæºä»£ç </h3><p>æ¨èç›´æ¥ä¸‹è½½,ä¸‹é¢æ˜¯JDK11çš„æºä»£ç åœ°å€,ç›´æ¥é€‰æ‹©zip fileè¿›è¡Œä¸‹è½½,ä¹Ÿå¯ä»¥é€‰æ‹©ä¸åŒçš„ç‰ˆæœ¬<br><a href="https://jdk.java.net/java-se-ri/11">https://jdk.java.net/java-se-ri/11</a></p><h3 id="å‡†å¤‡JDKç¼–è¯‘ç¯å¢ƒ"><a href="#å‡†å¤‡JDKç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="å‡†å¤‡JDKç¼–è¯‘ç¯å¢ƒ"></a>å‡†å¤‡JDKç¼–è¯‘ç¯å¢ƒ</h3><h4 id="å®‰è£…å¿…è¦ç¨‹åº"><a href="#å®‰è£…å¿…è¦ç¨‹åº" class="headerlink" title="å®‰è£…å¿…è¦ç¨‹åº"></a>å®‰è£…å¿…è¦ç¨‹åº</h4><ul><li>æ¨èå…ˆå…ˆåˆ‡æ¢è½¯ä»¶æº</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">sed</span> -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list<span class="token function">sudo</span> <span class="token function">apt</span> update -y<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>å®‰è£…å¿…è¦è½¯ä»¶</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y <span class="token function">curl</span> <span class="token function">ssh</span> <span class="token function">zip</span> <span class="token function">unzip</span> ant <span class="token function">git</span> build-essential ccache cpio g++ gcc gdb libx11-dev libxext-dev libxrender-dev libxtst-dev libxt-dev libcups2-dev libfreetype6-dev libasound2-dev libelf-dev ccache libfontconfig1-dev autoconf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="å®‰è£…BootStrap-JDK"><a href="#å®‰è£…BootStrap-JDK" class="headerlink" title="å®‰è£…BootStrap JDK"></a>å®‰è£…BootStrap JDK</h4><p>BootStrap JDKçš„ä½œç”¨æ˜¯ç¼–è¯‘JDKæºä»£ç ä¸­çš„javaä»£ç ,é»˜è®¤è¦æ¯”ç¼–è¯‘çš„JDKå°ä¸€ä¸ªç‰ˆæœ¬</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-10-jdkjava -version<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="è§£å‹JDKæºä»£ç "><a href="#è§£å‹JDKæºä»£ç " class="headerlink" title="è§£å‹JDKæºä»£ç "></a>è§£å‹JDKæºä»£ç </h4><p>ç”±äºæˆ‘æ¯”è¾ƒå–œæ¬¢ä½¿ç”¨VS code,VS codeä¸­å·²ç»é›†æˆäº†è¿æ¥WSLçš„æ’ä»¶ï¼Œå› æ­¤åªéœ€è¦å°†JDKæºä»£ç ç›´æ¥æ‹–æ‹½åˆ°Linuxçš„ç›®å½•ä¸‹å³å¯ã€‚ä¹Ÿå¯ä»¥é€šè¿‡WSLè¿›è¡Œå¤åˆ¶<br>å¾—åˆ°JDKæºä»£ç åå°±å¯ä»¥è¿›è¡Œè§£å‹</p><h4 id="ç¼–è¯‘JDKæºä»£ç "><a href="#ç¼–è¯‘JDKæºä»£ç " class="headerlink" title="ç¼–è¯‘JDKæºä»£ç "></a>ç¼–è¯‘JDKæºä»£ç </h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å‡†å¤‡é…ç½®(è­¦å‘Šä¸ä½œä¸ºå¼‚å¸¸æŠ›å‡º)</span><span class="token function">bash</span> ./configure --disable-warnings-as-errors<span class="token function">make</span> all<span class="token comment"># ç¼–è¯‘å¤±è´¥æ—¶æ¨èå…ˆè¿›è¡Œclean,åœ¨é‡æ–°è¿›è¡Œç¼–è¯‘</span><span class="token function">make</span> clean<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h4><ol><li>åœ¨æ„å»ºä½ç‰ˆæœ¬çš„JDKæ—¶å¯èƒ½å‡ºç°OSç‰ˆæœ¬ä¸æ”¯æŒ<br>ä¿®æ”¹./hotspot/make/linux/Makefile<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 5% å†…æ ¸ç‰ˆæœ¬</span>SUPPORTED_OS_VERSION <span class="token operator">=</span> <span class="token number">2.4</span>% <span class="token number">2.5</span>% <span class="token number">2.6</span>% <span class="token number">2.7</span>% <span class="token number">3</span>% <span class="token number">4</span>%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é€šè¿‡WSL2ç¼–è¯‘JDKæºç &quot;&gt;&lt;a href=&quot;#é€šè¿‡WSL2ç¼–è¯‘JDKæºç &quot; class=&quot;headerlink&quot; title=&quot;é€šè¿‡WSL2ç¼–è¯‘JDKæºç &quot;&gt;&lt;/a&gt;é€šè¿‡WSL2ç¼–è¯‘JDKæºç &lt;/h1&gt;&lt;p&gt;WSLçš„å…¨ç§°æ˜¯â€™Windows Subsystem </summary>
      
    
    
    
    <category term="æ‚è®°" scheme="https://agmtopy.gitee.io/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="WSL" scheme="https://agmtopy.gitee.io/tags/WSL/"/>
    
  </entry>
  
  <entry>
    <title>RocketMQä¸­NameSrvçš„è¯¦ç»†è®¾è®¡åˆ†æ</title>
    <link href="https://agmtopy.gitee.io/2021/06/11/7.%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9F%A5%E8%AF%86/RocketMQ%E4%B8%ADNameSrv%E7%9A%84%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1%E5%88%86%E6%9E%90/"/>
    <id>https://agmtopy.gitee.io/2021/06/11/7.%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9F%A5%E8%AF%86/RocketMQ%E4%B8%ADNameSrv%E7%9A%84%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1%E5%88%86%E6%9E%90/</id>
    <published>2021-06-11T14:57:56.000Z</published>
    <updated>2021-07-03T15:10:22.477Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RocketMQä¸­NameSrvçš„è¯¦ç»†è®¾è®¡åˆ†æ"><a href="#RocketMQä¸­NameSrvçš„è¯¦ç»†è®¾è®¡åˆ†æ" class="headerlink" title="RocketMQä¸­NameSrvçš„è¯¦ç»†è®¾è®¡åˆ†æ"></a>RocketMQä¸­NameSrvçš„è¯¦ç»†è®¾è®¡åˆ†æ</h1><h2 id="è®¾è®¡ç›®æ ‡"><a href="#è®¾è®¡ç›®æ ‡" class="headerlink" title="è®¾è®¡ç›®æ ‡"></a>è®¾è®¡ç›®æ ‡</h2><p>NameSrvæ˜¯RoctetMQé¡¹ç›®ä¸‹çš„ä¸€ä¸ªæ¨¡å—ï¼Œä½œä¸ºRockerMQä¸­çš„è½»å‹æ³¨å†Œä¸­å¿ƒ,åªè´Ÿè´£ä¸Topicæœ‰å…³çš„åŠŸèƒ½ã€‚<br>ä½¿ç”¨NameSrvæ¥æ›¿ä»£ZKç­‰æ³¨å†Œä¸­å¿ƒä¸»è¦æ˜¯æœ‰ä¸¤ä¸ªå¥½å¤„:</p><ol><li>å‡å°‘æ•´ä½“å¤æ‚æ€§<br>ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå¼ºä¾èµ–å¦å¤–ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¢åŠ äº†æ•´ä¸ªç³»ç»Ÿçš„å¤æ‚æ€§(æ•´ä½“ä»£ç å¤æ‚æ€§ã€è¿ç»´çš„å¤æ‚æ€§);<br>ä½¿ç”¨å†…ç½®çš„è½»é‡çº§æ³¨å†Œä¸­å¿ƒ,å°±å¯ä»¥æ¶ˆé™¤åŸæ¥ä¸ZKç­‰ç¬¬ä¸‰æ–¹æ³¨å†Œä¸­å¿ƒçš„å„ç§åè®®é€‚é…;<br>Namesrvä¸­åªéœ€è¦å¼€å‘ä¸Topicæœ‰å…³çš„ä¸šåŠ¡åœºæ™¯;<br>ç³»ç»Ÿç»´æŠ¤æ—¶ä¹Ÿä¸ç”¨åœ¨è€ƒè™‘ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„å¤„ç†æœºåˆ¶;</li><li>æ‰©å±•èƒ½åŠ›<br>RocketMQä»è®¾è®¡åˆå°±è€ƒè™‘è¿‡åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šè¿›è¡Œéƒ¨ç½²çš„èƒ½åŠ›,å› æ­¤é‡‡ç”¨Namesrvçš„è®¾è®¡èƒ½æœ€å¤§é™åº¦çš„æŒæ¡ç³»ç»Ÿ</li></ol><p>ç›®å‰Kafkaåœ¨è¿™æ–¹é¢åšçš„æ›´å¥½ï¼Œåœ¨V2.8ä¹‹åä¸ä½†å»æ‰äº†ZKï¼Œå¹¶ä¸”é‡‡ç”¨brokeré›†ç¾¤ä¸­é€šè¿‡é€‰ä¸¾çš„æ–¹å¼é€‰å‡ºleaderèŠ‚ç‚¹æ¥ç®¡ç†Topicã€brokerã€consumer</p><h2 id="åŸºç¡€åŠŸèƒ½"><a href="#åŸºç¡€åŠŸèƒ½" class="headerlink" title="åŸºç¡€åŠŸèƒ½"></a>åŸºç¡€åŠŸèƒ½</h2><ul><li><p>æ•´ä½“æ¶æ„<br><img src="https://github.com/apache/rocketmq/raw/master/docs/cn/image/rocketmq_architecture_3.png" alt="æ•´ä½“æ¶æ„"><br>Namesrvé›†ç¾¤æ˜¯æ— çŠ¶æ€çš„è®¾è®¡,æ¯ä¸ªç»„ä»¶(Brokerã€Producerã€Consumer)éƒ½ä¼šå‘æ¯ä¸€ä¸ªNamesrvè¿›è¡Œè¯·æ±‚,å› æ­¤Namesrvæ˜¯é€‰æ‹©äº†å¯ç”¨æ€§</p></li><li><p>åŠŸèƒ½è§£æ</p></li></ul><ol><li>Topicè·¯ç”±ç®¡ç†</li><li>Remotingè¿œç¨‹æœåŠ¡</li><li>å®šæ—¶ä»»åŠ¡</li><li>KVç®¡ç†æ¨¡å—</li></ol><h2 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h2><h3 id="Namesrvæ—¶åºå›¾"><a href="#Namesrvæ—¶åºå›¾" class="headerlink" title="Namesrvæ—¶åºå›¾"></a>Namesrvæ—¶åºå›¾</h3><p><a href="https://imgtu.com/i/2jkklQ"><img src="https://z3.ax1x.com/2021/06/16/2jkklQ.png" alt="Namesrvæ‰§è¡Œæµç¨‹"></a></p><h3 id="NamesrvStartup"><a href="#NamesrvStartup" class="headerlink" title="NamesrvStartup"></a>NamesrvStartup</h3><h4 id="main"><a href="#main" class="headerlink" title="main()"></a>main()</h4><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">/** * ä¸»å‡½æ•°å…¥å£ */</span><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">main0</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">/** * å…·ä½“æ‰§è¡Œé€»è¾‘:é¿å…åœ¨mainå‡½æ•°ä¸­æ·»åŠ è¿‡å¤šçš„é€»è¾‘ */</span><span class="token keyword">fun</span> <span class="token function">main0</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> controller <span class="token operator">=</span> <span class="token function">createNamesrvController</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>        <span class="token function">start</span><span class="token punctuation">(</span>controller<span class="token punctuation">)</span>        <span class="token keyword">val</span> tip <span class="token operator">=</span>            <span class="token string">"The Name Server boot success. serializeType="</span> <span class="token operator">+</span> RemotingCommand<span class="token punctuation">.</span><span class="token function">getSerializeTypeConfigInThisServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        log<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>tip<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">println</span><span class="token punctuation">(</span>tip<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Throwable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * åˆå§‹åŒ–NamesrvController */</span><span class="token keyword">fun</span> <span class="token function">createNamesrvController</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> NamesrvController <span class="token punctuation">&#123;</span>  <span class="token comment">//å»é™¤TLSå’Œapache.commonsçš„ç‰ˆæœ¬</span>  <span class="token keyword">return</span> <span class="token function">NamesrvController</span><span class="token punctuation">(</span><span class="token function">NamesrvConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NettyServerConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="start"><a href="#start" class="headerlink" title="start()"></a>start()</h4><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">/**  * å¯åŠ¨NamesrvController  */</span><span class="token keyword">fun</span> <span class="token function">start</span><span class="token punctuation">(</span>controller<span class="token operator">:</span> NamesrvController<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>controller <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"NamesrvController is null"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//NamesrvControlleræ‰§è¡Œåˆå§‹åŒ–,å¦‚æœå¤±è´¥æ—¶é€€å‡ºè¿›ç¨‹</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>controller<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        controller<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    controller<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>NamesrvStartupå¯åŠ¨æ—¶å€™ä¸»è¦åšäº†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li>åˆ›å»ºNamesrvController</li><li>å¤„ç†TLSå’ŒåŠ è½½Namesrvé…ç½®æ–‡ä»¶</li><li>å¯åŠ¨NamesrvController</li><li>å…³é—­NamesrvController</li></ol><ul><li>NamesrvController<br>NamesrvControllerä¸»è¦é€»è¾‘å¾ˆä¸ºä¸¤ä¸ªéƒ¨åˆ†åˆå§‹åŒ–å’Œæ‰§è¡Œ</li></ul><ol><li>åˆå§‹åŒ–</li></ol><ul><li>åˆå§‹åŒ–é‚£äº›ä¸œè¥¿</li></ul><ol><li><p>é…ç½®</p></li><li><p>æœåŠ¡</p></li><li><p>çº¿ç¨‹æ± </p></li><li><p>è‡ªçœ</p></li><li><p>åŠ è½½é…ç½®æ–‡ä»¶</p></li></ol><h2 id="æ‰©å±•æ€è€ƒ"><a href="#æ‰©å±•æ€è€ƒ" class="headerlink" title="æ‰©å±•æ€è€ƒ"></a>æ‰©å±•æ€è€ƒ</h2><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://rocketmq.apache.org/">rocketmq</a><br><a href="https://github.com/apache/rocketmq">rocketmq-github</a><br><a href="https://www.confluent.io/blog/kafka-without-zookeeper-a-sneak-peek/">Apache Kafka Made Simple: A First Glimpse of a Kafka Without ZooKeeper</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;RocketMQä¸­NameSrvçš„è¯¦ç»†è®¾è®¡åˆ†æ&quot;&gt;&lt;a href=&quot;#RocketMQä¸­NameSrvçš„è¯¦ç»†è®¾è®¡åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;RocketMQä¸­NameSrvçš„è¯¦ç»†è®¾è®¡åˆ†æ&quot;&gt;&lt;/a&gt;RocketMQä¸­NameSrvçš„</summary>
      
    
    
    
    <category term="æ¶ˆæ¯é˜Ÿåˆ—" scheme="https://agmtopy.gitee.io/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    
    
    <category term="RocketMQ" scheme="https://agmtopy.gitee.io/tags/RocketMQ/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²</title>
    <link href="https://agmtopy.gitee.io/2021/05/08/1.%E6%9D%82%E8%AE%B0/%E5%85%B3%E4%BA%8E%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8E%86%E5%8F%B2/"/>
    <id>https://agmtopy.gitee.io/2021/05/08/1.%E6%9D%82%E8%AE%B0/%E5%85%B3%E4%BA%8E%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8E%86%E5%8F%B2/</id>
    <published>2021-05-08T14:03:28.000Z</published>
    <updated>2021-05-09T08:35:17.609Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²"><a href="#å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²" class="headerlink" title="å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²"></a>å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²</h1><p>è¿™æ˜¯ä¸€ç¯‡å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„å†å²æ–‡ç« ï¼Œæœ‰å…³æ¶ˆæ¯é˜Ÿåˆ—çš„å‰ä¸–ä»Šç”Ÿçš„ä¸€äº›ä¿¡æ¯ã€‚</p><h2 id="èµ·æº"><a href="#èµ·æº" class="headerlink" title="èµ·æº"></a>èµ·æº</h2><p>è½¯ä»¶é¢†åŸŸçš„æ¶ˆæ¯é˜Ÿåˆ—æœ€æ—©æ˜¯ç”±Vivek Ranadiveå‚è€ƒç¡¬ä»¶ä¸­çš„ç³»ç»Ÿæ€»çº¿æå‡ºæ¥çš„,è¿™è€å“¥æ˜¯ä¸€ä¸ªå°åº¦è£”,ç°åœ¨è¿˜æ˜¯å›½ç‹é˜Ÿçš„è€æ¿ã€‚<br>ç¡¬ä»¶é¢†åŸŸä¸­çš„ç³»ç»Ÿæ€»çº¿ä¸»è¦åˆ†ä¸ºæ•°æ®æ€»çº¿ã€åœ°å€æ€»çº¿ã€æ§åˆ¶æ€»çº¿è¿™å‡ ä¸ªéƒ¨åˆ†ï¼Œç”¨æ¥è¿æ¥ä¸åŒçš„è®¾å¤‡ä¼ è¾“æ•°æ®ä½¿ç”¨ã€‚<br><a href="https://imgtu.com/i/gJ4Q61"><img src="https://z3.ax1x.com/2021/05/09/gJ4Q61.png" alt="ç³»ç»Ÿæ€»çº¿"></a><br>ç¡¬ä»¶ä¸Šçš„ç³»ç»Ÿæ€»çº¿ç€é‡åœ¨äºé€šè¿‡çº¿è¿æ¥ä¸åŒè®¾å¤‡ä¹‹é—´çš„äº¤äº’ï¼Œè€Œæ¶ˆæ¯é˜Ÿåˆ—æ˜¯è½¯ä»¶é¢†åŸŸçš„è¿æ¥ä¸åŒç³»ç»Ÿä¹‹é—´äº¤äº’çš„æ–¹å¼æœ‰åº”ç”¨å±‚åè®®ï¼Œç°ä»£çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦ç€é‡ç‚¹æ˜¯åœ¨äºé˜Ÿåˆ—ä¸Šã€‚</p><h2 id="ä¸Šå¤æ—¶æœŸ"><a href="#ä¸Šå¤æ—¶æœŸ" class="headerlink" title="ä¸Šå¤æ—¶æœŸ"></a>ä¸Šå¤æ—¶æœŸ</h2><ul><li><p>1985<br>Vivek Ranadiveæ ¹æ®ç³»ç»Ÿæ€»çº¿è®¾è®¡å‡ºæ¥çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿå«The Information Bus(TIB)ï¼ŒTIBä½†æ˜¯ä¸»è¦æ˜¯åœ¨ç”µä¿¡å’Œé‡‘èé¢†åŸŸè¿›è¡Œä½¿ç”¨ã€‚</p></li><li><p>1993<br>IBM MQæ˜¯ç”±è“è‰²å·¨äººIBMä¸1993å¹´æ¨å‡ºçš„æ¶ˆæ¯é˜Ÿåˆ—äº§å“ï¼Œç›®å‰è¿˜ä¿æŒæ›´æ–°ç°åœ¨è¿­ä»£åˆ°äº†V9ç‰ˆæœ¬</p></li><li><p>1997<br>MS MQæ˜¯ç”±å¾®è½¯æ¨å‡ºçš„æ¶ˆæ¯é˜Ÿåˆ—äº§å“,ä¸ç”±æ„Ÿæ…¨ä¸€å¥å¾®è½¯æ˜¯çœŸåŠï¼Œä¸ºäº†.netç¡¬æ˜¯æ•´äº†ä¸€ä¸ªå…¨å®¶æ¡¶ã€‚</p></li></ul><p>è¿™ä¸€æ—¶æœŸç”±äºå„å®¶çš„MQäº§å“éƒ½æ˜¯ä¸ºäº†æ——ä¸‹å…¶ä»–äº§å“è¿›è¡ŒæœåŠ¡ï¼Œä¸ºäº†å½¢æˆå£å’ï¼Œå„å®¶çš„MQäº§å“å¹¶æœªå½¢æˆä¸€ä¸ªç»Ÿä¸€çš„è§„èŒƒï¼Œå¯¼è‡´ä¸åŒå…¬å¸ä¸‹çš„äº§å“å¹¶ä¸èƒ½ä½¿ç”¨å…¶ä»–å…¬å¸çš„MQã€‚</p><h2 id="ä¸­å¤æ—¶æœŸ"><a href="#ä¸­å¤æ—¶æœŸ" class="headerlink" title="ä¸­å¤æ—¶æœŸ"></a>ä¸­å¤æ—¶æœŸ</h2><p>ç”±äºæ—©æœŸçš„MQäº§å“å„è‡ªä¸ºæ”¿çš„åœºæ™¯ä¸‹ï¼Œè¿™ä¸€æ—¶æœŸä¸»è¦ç»Ÿä¸€äº†æ¶ˆæ¯é˜Ÿåˆ—çš„åè®®ï¼Œè¿™äº›åè®®ä¸€ç›´å½±å“åˆ°äº†ç°åœ¨ï¼Œä¸»è¦è¯ç”Ÿäº†ä»¥ä¸‹å‡ ç§åè®®ä»¥åŠæ¥å…¥è§„èŒƒï¼š</p><ul><li><p> JMS<br>JMSæ˜¯ä¸€å¥—æ¥å…¥MQä¸­é—´ä»¶äº§å“çš„æ¥å£è§„èŒƒï¼Œjavaä¸ºäº†é»åˆå„å®¶çš„æ¶ˆæ¯é˜Ÿåˆ—è¯•å›¾é€šè¿‡ç±»ä¼¼äºJDBCçš„æ–¹æ¡ˆåœ¨javaç«¯é€šè¿‡ç»Ÿä¸€çš„åè®®ï¼Œåœ¨æ ¹æ®ä¸åŒäº§å“çš„é©±åŠ¨å»è¿æ¥MQã€‚<br>å„ä¸ªå‚å•†æ ¹æ®è¿™å¥—æ¥å£è§„èŒƒè‡ªè¡Œé€‰æ‹©å®¢æˆ·ç«¯è¿›è¡Œå®ç°ï¼Œå®ç°äº†è¿™ä¸ªæ¥å£è§„èŒƒçš„å®¢æˆ·ç«¯å¯ä»¥åœ¨javaåº”ç”¨ç¨‹åºå†…è‡ªç”±åˆ‡æ¢ï¼Œç±»ä¼¼äºé€‚é…å™¨æ¨¡å¼</p></li><li><p>AMQP<br>AMQPæ˜¯å®ç°æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€ç§åè®®ï¼Œåœ¨åè®®å±‚è§„å®šäº†æ¶ˆæ¯é˜Ÿåˆ—åº”è¯¥æœ‰çš„é€»è¾‘è§„èŒƒã€‚AMQPä¸å…·ä½“çš„MQ(ä¾‹å¦‚RabbitMQã€ActiveMQ)çš„å…³ç³»ç±»ä¼¼ä¸jvmè§„èŒƒå’ŒJVMå®ç°(HotSpot)ä¸€æ ·</p></li><li><p>MQTT<br>ä¸ºåµŒå…¥å¼è®¾å¤‡è®¾è®¡çš„ä¸€å¥—æ¶ˆæ¯é˜Ÿåˆ—åè®®</p></li><li><p>STOMP<br>Stompåè®®ï¼Œè‹±æ–‡å…¨åStreaming Text Orientated Message Protocolï¼Œä¸­æ–‡åç§°ä¸º â€˜æµæ–‡æœ¬å®šå‘æ¶ˆæ¯åè®®â€™ã€‚æ˜¯ä¸€ç§ä»¥çº¯æ–‡æœ¬ä¸ºè½½ä½“çš„åè®®ï¼ˆä»¥æ–‡æœ¬ä¸ºè½½ä½“çš„æ„æ€æ˜¯å®ƒçš„æ¶ˆæ¯æ ¼å¼è§„èŒƒä¸­æ²¡æœ‰ç±»ä¼¼XMPPåè®®é‚£æ ·çš„xmlæ ¼å¼è¦æ±‚ï¼Œä½ å¯ä»¥å°†å®ƒçœ‹ä½œâ€˜åŠç»“æ„åŒ–æ•°æ®â€™ï¼‰<br>åŒå‘æ¶ˆæ¯é€šä¿¡åè®®è¿˜æœ‰å¾ˆå¤šï¼Œé™¤äº†AMQPä»¥å¤–å…¶ä»–çš„å¤§å¤šéƒ½æ˜¯å³æ—¶æ¶ˆæ¯åè®®ã€‚</p></li><li><p>ActiveMQ<br>åœ¨è¿™ä¸€æ—¶æœŸè¿˜æœ‰æ ¹æ®AMQPè¿˜è¯ç”Ÿäº†ActiveMQè¿™ä¸€å¼€æºäº§å“ï¼ŒActiveMQæ˜¯ç¬¬ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨åˆ°çš„å¼€æºMQäº§å“</p></li><li><p>RabbitMQ<br>RabbitMQæ˜¯2006å¹´è¯ç”Ÿçš„ï¼Œç°åœ¨å’Œspringæ¡†æ¶åŒå±äºvmwareã€‚ç”±Erlangå¼€å‘çš„ã€‚</p></li></ul><h2 id="ç°ä»£æ—¶æœŸ"><a href="#ç°ä»£æ—¶æœŸ" class="headerlink" title="ç°ä»£æ—¶æœŸ"></a>ç°ä»£æ—¶æœŸ</h2><p>ç”±äºActiveMQå’ŒRabbitMQå‘å±•äº†å¤šå¹´ï¼ŒèƒŒè´Ÿç€æ²‰é‡çš„å†å²åŒ…è¢±æ”¯æŒè¿™éå¸¸å…¨çš„MQåŠŸèƒ½ï¼Œåœ¨ç°ä»£çš„MQä½¿ç”¨åœºæ™¯ä¸­è¿™äº›æ¶ˆæ¯é˜Ÿåˆ—ä¸ç¬¦åˆå½“ä¸‹æ•°æ®çˆ†ç‚¸ï¼Œå°å‹æœºç»„æˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„åœºæ™¯äº†ã€‚è¿™æ—¶å€™å‡ºç°äº†é’ˆå¯¹æŸä¸ªç»†åˆ†é¢†åŸŸçš„æ¶ˆæ¯é˜Ÿåˆ—æ¡†æ¶Kafkaã€RocketMQã€Pulsar</p><ul><li><p>Kafka<br>Kafkaæ˜¯Linkedinä¸ºè§£å†³ActiveMQæ€§èƒ½é—®é¢˜è€Œå¼€å‘çš„åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç›®å‰å·²ç»æˆä¸ºå¤§æ•°æ®é¢†åŸŸå®é™…çš„æ¶ˆæ¯ä¼ é€’ç»„ä»¶</p></li><li><p>RocketMQ<br>RocketMQæ˜¯é˜¿é‡Œå¼€æºçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶ï¼Œåœ¨è®¾è®¡ä¸Šå‚è€ƒäº†kafka,é€šè¿‡javaè¯­è¨€è¿›è¡Œå¼€å‘</p></li><li><p>Pulsar<br>Pulsaræ˜¯é›…è™å¼€æºçš„ï¼Œå¤©ç„¶æ”¯æŒå¤šç»„æˆå¹¶ä¸”æ˜¯è®¡ç®—å’Œå­˜å‚¨åˆ†ç¦»å¼çš„å®ç°</p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ¶ˆæ¯é˜Ÿåˆ—çš„è¯ç”Ÿæ˜¯ä»é‡‘èåœºæ™¯å‡ºå‘ï¼Œå‘å±•åˆ°ç°åœ¨æœ€å¼€å§‹çš„é‚£å‡ ç§æ¶ˆæ¯é˜Ÿåˆ—åœ¨åŠŸèƒ½ä¸Šå·²ç»å˜å¾—éå¸¸è‡ƒè‚¿ã€‚ç°ä»£çš„æ¶ˆæ¯é˜Ÿåˆ—æ ¹æ®æŸä¸€æ–¹é¢çš„ç€é‡ç‚¹å¼€å§‹è¿›è¡Œå‘å±•ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="http://tryrabbitmq.com/">http://tryrabbitmq.com/</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²&quot;&gt;&lt;a href=&quot;#å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²&quot; class=&quot;headerlink&quot; title=&quot;å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²&quot;&gt;&lt;/a&gt;å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›å†å²&lt;/h1&gt;&lt;p&gt;è¿™æ˜¯ä¸€ç¯‡å…³äºæ¶ˆæ¯é˜Ÿåˆ—çš„å†å²æ–‡ç« ï¼Œæœ‰å…³æ¶ˆæ¯é˜Ÿåˆ—çš„å‰ä¸–ä»Šç”Ÿçš„ä¸€äº›ä¿¡æ¯ã€‚&lt;</summary>
      
    
    
    
    <category term="æ‚è®°" scheme="https://agmtopy.gitee.io/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="æ¶ˆæ¯é˜Ÿåˆ—" scheme="https://agmtopy.gitee.io/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-è¡Œä¸ºæ¨¡å¼</title>
    <link href="https://agmtopy.gitee.io/2021/04/29/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E7%A1%80-%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/"/>
    <id>https://agmtopy.gitee.io/2021/04/29/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E7%A1%80-%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-04-29T15:12:03.000Z</published>
    <updated>2021-05-08T13:59:04.371Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-è¡Œä¸ºæ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-è¡Œä¸ºæ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-è¡Œä¸ºæ¨¡å¼"></a>è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-è¡Œä¸ºæ¨¡å¼</h1><p>è¡Œä¸ºæ¨¡å¼æ˜¯é€šè¿‡å°†å¤šä¸ªç±»é€šè¿‡ç»§æ‰¿\ç»„åˆçš„å½¢å¼å½¢æˆå¯¹æ–¹æ³•çš„å¤„ç†,ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§</p><ol><li>è´£ä»»é“¾æ¨¡å¼</li><li>å‘½ä»¤æ¨¡å¼</li><li>è§£é‡Šå™¨æ¨¡å¼</li><li>è¿­ä»£å™¨æ¨¡å¼</li><li>ä¸­ä»‹è€…æ¨¡å¼</li><li>å¤‡å¿˜å½•æ¨¡å¼</li><li>è§‚å¯Ÿè€…æ¨¡å¼</li><li>çŠ¶æ€æ¨¡å¼</li><li>ç­–ç•¥æ¨¡å¼</li><li>æ¨¡æ¿æ¨¡å¼</li><li>è®¿é—®è€…æ¨¡å¼</li></ol><h2 id="è´£ä»»é“¾æ¨¡å¼"><a href="#è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼"></a>è´£ä»»é“¾æ¨¡å¼</h2><h3 id="æ„å›¾"><a href="#æ„å›¾" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><blockquote><p>è´£ä»»é“¾æ¨¡å¼æ˜¯ä½¿å¾—å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚,ä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»,è¿™äº›å¯¹è±¡çš„å¤„ç†è¿‡ç¨‹é€»è¾‘ä¸Šå½¢æˆé“¾çŠ¶ç»“æ„,è¯·æ±‚æ²¿ç€è¿™æ¡é“¾ä¾æ¬¡è¢«ä¸åŒçš„å¯¹è±¡è¿›è¡Œå¤„ç†ã€‚æ ‡å‡†çš„å®šä¹‰æ˜¯ç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†è¯·æ±‚ä¸ºæ­¢ï¼Œæˆ‘è‡ªå·±ç†è§£åº”è¯¥æ˜¯ä¾æ¬¡è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯æœ‰ä¸€ä¸ªå¤„ç†å³æ­¢ï¼Œå› ä¸ºå¦‚æœåªæœ‰ä¸€ä¸ªå¤„ç†ï¼Œé‚£ä¹ˆè´£ä»»é“¾æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼ç±»ä¼¼ã€‚è´£ä»»é“¾æ¨¡å¼æ˜¯é€šè¿‡å°†è¯·æ±‚éœ€è¦ä¾æ¬¡å¤„ç†çš„åœºæ™¯ä»æ˜¾çš„å®¢æˆ·ç«¯ä¸€ä¸ªä¸€ä¸ªè°ƒç”¨çš„è¿‡ç¨‹ï¼Œå‡çº§æˆäº†å°†è¯·æ±‚ä¼ å…¥å’Œç”±è´£ä»»é“¾å®¢æˆ·ç«¯å»ä¸²è”æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹ï¼Œå¹¶ä¸”è¿™æ ·æ›´å®¹æ˜“æ‰©å±•æ­¥éª¤ã€‚</p></blockquote><p>åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œé€šå¸¸æ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæ¥æ”¶è€…ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/2021-chain-of-responsibility.svg" alt="è´£ä»»é“¾æ¨¡å¼"></p><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><ul><li>AbstractLogger.java</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractLogger</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> INFO <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> DEBUG <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ERROR <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>    <span class="token comment">//è´£ä»»é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span>   <span class="token keyword">protected</span> <span class="token class-name">AbstractLogger</span> nextLogger<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextLogger</span><span class="token punctuation">(</span><span class="token class-name">AbstractLogger</span> nextLogger<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>nextLogger <span class="token operator">=</span> nextLogger<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logMessage</span><span class="token punctuation">(</span><span class="token keyword">int</span> level<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">&lt;=</span> level<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token function">write</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>nextLogger <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         nextLogger<span class="token punctuation">.</span><span class="token function">logMessage</span><span class="token punctuation">(</span>level<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span>    <span class="token keyword">abstract</span> <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ChainPatternDemo.java</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChainPatternDemo</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">AbstractLogger</span> <span class="token function">getChainOfLoggers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token class-name">AbstractLogger</span> errorLogger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorLogger</span><span class="token punctuation">(</span><span class="token class-name">AbstractLogger</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">AbstractLogger</span> fileLogger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileLogger</span><span class="token punctuation">(</span><span class="token class-name">AbstractLogger</span><span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">AbstractLogger</span> consoleLogger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConsoleLogger</span><span class="token punctuation">(</span><span class="token class-name">AbstractLogger</span><span class="token punctuation">.</span>INFO<span class="token punctuation">)</span><span class="token punctuation">;</span>       errorLogger<span class="token punctuation">.</span><span class="token function">setNextLogger</span><span class="token punctuation">(</span>fileLogger<span class="token punctuation">)</span><span class="token punctuation">;</span>      fileLogger<span class="token punctuation">.</span><span class="token function">setNextLogger</span><span class="token punctuation">(</span>consoleLogger<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> errorLogger<span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">AbstractLogger</span> loggerChain <span class="token operator">=</span> <span class="token function">getChainOfLoggers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       loggerChain<span class="token punctuation">.</span><span class="token function">logMessage</span><span class="token punctuation">(</span><span class="token class-name">AbstractLogger</span><span class="token punctuation">.</span>INFO<span class="token punctuation">,</span> <span class="token string">"This is an information."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       loggerChain<span class="token punctuation">.</span><span class="token function">logMessage</span><span class="token punctuation">(</span><span class="token class-name">AbstractLogger</span><span class="token punctuation">.</span>DEBUG<span class="token punctuation">,</span>          <span class="token string">"This is a debug level information."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       loggerChain<span class="token punctuation">.</span><span class="token function">logMessage</span><span class="token punctuation">(</span><span class="token class-name">AbstractLogger</span><span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span>          <span class="token string">"This is an error information."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ErrorLoggerã€FileLoggerã€ConsoleLoggeréƒ½æ˜¯AbstractLogger.javaçš„å­ç±»ï¼Œåœ¨å®¢æˆ·ç«¯ä¸­ï¼Œé€šè¿‡æä¾›setNextHandlerçš„æ–¹æ³•ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯è‡ªç”±ç»„åˆé“¾çš„é¡ºåº</p><h2 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h2><h3 id="æ„å›¾-1"><a href="#æ„å›¾-1" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>å°†è¯·æ±‚å°è£…æˆä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿å¾—ä½ å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–</p><h3 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å‘½ä»¤æ¨¡å¼ä¸»è¦æ˜¯å°†è¯·æ±‚å’Œå¯¹è¯·æ±‚æ‰§è¡Œçš„åŠ¨ä½œè´£ä»»åˆ†ç¦»,è®©ä¸¤è€…éƒ½å¯ä»¥ç‹¬ç«‹è¿›è¡Œæ¼”åŒ–ã€‚é€‚åˆè¯·æ±‚å†…å®¹æ˜¯ç±»ä¼¼äºä¿¡å·é‡çš„åœºæ™¯ï¼Œæ¥å—è€…å¯ä»¥æ ¹æ®è¿™ä¸ªè¯·æ±‚å†…å®¹è¿›è¡Œä¸åŒçš„å¤„ç†</p><h3 id="ç»“æ„-1"><a href="#ç»“æ„-1" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/commanduml.jpg" alt="å‘½ä»¤æ¨¡å¼"></p><h3 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><ul><li>Command<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * æ‰§è¡Œæ–¹æ³•     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>Command.java å®šä¹‰çš„æŠ½è±¡å‘½ä»¤ç±»ï¼Œæ‰€æœ‰å…·ä½“å‘½ä»¤çš„æ¥å£</p><ul><li><p>PlayCommand.java</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PlayCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">&#123;</span>   <span class="token comment">//å…·ä½“çš„æ‰§è¡Œç±»</span>    <span class="token keyword">private</span> <span class="token class-name">AudioPlayer</span> myAudio<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">PlayCommand</span><span class="token punctuation">(</span><span class="token class-name">AudioPlayer</span> audioPlayer<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        myAudio <span class="token operator">=</span> audioPlayer<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ‰§è¡Œæ–¹æ³•     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        myAudio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>PlayCommandæ˜¯å…·ä½“çš„å‘½ä»¤æ‰§è¡Œç±»ï¼Œå†…éƒ¨å…·æœ‰ä¸€ä¸ªexecuteæ–¹æ³•,è¯¥æ–¹æ³•ä¼šæ‰§è¡Œè¯¥å‘½ä»¤å®šä¹‰çš„åŠ¨ä½œ</p></li><li><p>Keypad.java</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Keypad</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Command</span> playCommand<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPlayCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> playCommand<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>playCommand <span class="token operator">=</span> playCommand<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>     <span class="token comment">//æ‰§è¡Œæ’­æ”¾æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        playCommand<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>keyPadä½œä¸ºè¯·æ±‚ç±»ï¼Œå†æ¬¡å¯¹å‘½ä»¤è¿›è¡Œä¸€æ¬¡å°è£…ï¼Œä¾¿äºå®¢æˆ·ç«¯è¿›è¡Œè°ƒç”¨ï¼Œè¿™é‡Œå¯ä»¥ä¸ç”¨å†æ¬¡å°è£…ï¼Œè‡ªå·±é€šè¿‡å®¢æˆ·ç«¯è¿›è¡Œè°ƒç”¨</p><ul><li>client.java<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Julia</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span>args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token comment">//åˆ›å»ºæ¥æ”¶è€…å¯¹è±¡</span>        <span class="token class-name">AudioPlayer</span> audioPlayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudioPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ›å»ºå‘½ä»¤å¯¹è±¡</span>        <span class="token class-name">Command</span> playCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PlayCommand</span><span class="token punctuation">(</span>audioPlayer<span class="token punctuation">)</span>         <span class="token comment">//åˆ›å»ºè¯·æ±‚è€…å¯¹è±¡</span>        <span class="token class-name">Keypad</span> keypad <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Keypad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        keypad<span class="token punctuation">.</span><span class="token function">setPlayCommand</span><span class="token punctuation">(</span>playCommand<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//æ‰§è¡Œå…·ä½“çš„ç±»</span>        keypad<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>å®¢æˆ·ç«¯é€šè¿‡è°ƒç”¨è¯·æ±‚ç±»==Keypad==çš„æŒ‡å®šæ–¹æ³•ï¼ŒkeyPadä¼šè°ƒç”¨å…·ä½“çš„å‘½ä»¤å°è£…ç±»è¿›è¡Œæ‰§è¡Œã€‚å…¶å®å‘½ä»¤æ¨¡å¼åªæ˜¯å°†è¯·æ±‚å’Œå¯¹åº”çš„åŠ¨ä½œè¿›è¡Œåˆ†ç¦»ï¼Œä¾¿äºå¤æ‚è¯·æ±‚åœºæ™¯çš„æ‰©å±•</p><h2 id="è§£é‡Šå™¨æ¨¡å¼"><a href="#è§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼"></a>è§£é‡Šå™¨æ¨¡å¼</h2><h3 id="æ„å›¾-2"><a href="#æ„å›¾-2" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰æä¾›äº†è¯„ä¼°è¯­è¨€çš„è¯­æ³•æˆ–è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œå®ƒå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼å®ç°äº†ä¸€ä¸ªè¡¨è¾¾å¼æ¥å£ï¼Œè¯¥æ¥å£è§£é‡Šä¸€ä¸ªç‰¹å®šçš„ä¸Šä¸‹æ–‡ã€‚è¿™ç§æ¨¡å¼è¢«ç”¨åœ¨ SQL è§£æã€ç¬¦å·å¤„ç†å¼•æ“ç­‰ã€‚</p><h3 id="åŠ¨æœº-1"><a href="#åŠ¨æœº-1" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>ç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥æ ‡è¯†æ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚</p><h3 id="ç»“æ„-2"><a href="#ç»“æ„-2" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/interpreter_pattern_uml_diagram.jpg" alt="è§£é‡Šå™¨æ¨¡å¼"></p><h2 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h2><h3 id="æ„å›¾-3"><a href="#æ„å›¾-3" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²èšåˆå¯¹è±¡å†…éƒ¨è¡¨ç¤ºçš„æ¨¡å¼</p><h3 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>æ¸¸æ ‡(Cursor)</p><h3 id="åŠ¨æœº-2"><a href="#åŠ¨æœº-2" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>è¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸ºäº†å°†å†…éƒ¨å…ƒç´ å’Œè®¿é—®/éå†åŠ¨ä½œåˆ†ç¦»å¼€ï¼Œé€šè¿‡å¢åŠ ä¸€ä¸ªè¿­ä»£å™¨ï¼Œé€šè¿‡è¿­ä»£å™¨æ¥è®¿é—®å†…éƒ¨å…ƒç´ ã€‚</p><h3 id="ç»“æ„-3"><a href="#ç»“æ„-3" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/iterator_pattern_uml_diagram.jpg" alt="è¿­ä»£å™¨æ¨¡å¼"></p><h2 id="ä¸­ä»‹è€…æ¨¡å¼"><a href="#ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼"></a>ä¸­ä»‹è€…æ¨¡å¼</h2><h3 id="æ„å›¾-4"><a href="#æ„å›¾-4" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹çš„æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’</p><h3 id="åŠ¨æœº-3"><a href="#åŠ¨æœº-3" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>ç”±äºé¢å‘å¯¹è±¡é¼“åŠ±æŒ‰ç…§è¡Œä¸ºè¿›è¡Œç±»çš„åˆ’åˆ†ï¼Œå› æ­¤ç³»ç»Ÿä¸­ä¼šå­˜åœ¨å¤§é‡çš„ç±»ã€‚å¦‚æœä¸åŒçš„ç±»ä¹‹é—´éƒ½è¦ç›¸äº’å¼•ç”¨æ¥å®Œæˆä¸€ä¸ªè¡Œä¸ºçš„è¯ä¸ç¬¦åˆé¢å‘å¯¹è±¡çš„ç‰¹æ€§ï¼Œå› æ­¤éœ€è¦æœ‰ä¸€ä¸ªä¸­ä»‹æ¥å°†æœåŠ¡èšåˆèµ·æ¥ï¼Œç›¸å½“äºå°†ç»†å°çš„è¡Œä¸ºè¿›è¡Œä¸€æ¬¡èšåˆå½¢æˆè¾ƒå¤§çš„è¡Œä¸ºï¼Œè¿™æ ·ä¸ç”¨å…³æ³¨ç»†å°çš„è¡Œä¸ºå¯¹è±¡ã€‚</p><h3 id="ç»“æ„-4"><a href="#ç»“æ„-4" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/mediator_pattern_uml_diagram.jpg" alt="ä¸­ä»‹è€…æ¨¡å¼"></p><p>ä¸­ä»‹è€…æ¨¡å¼åœ¨åŠŸèƒ½ä¸Šç±»ä¼¼äºé—¨é¢æ¨¡å¼ï¼Œä½†æ˜¯é—¨é¢æ¨¡å¼ç€é‡äºå¯¹å­ç³»ç»Ÿç±»çš„å°è£…ï¼Œä¸­ä»‹è€…æ¨¡å¼ç€é‡æ˜¯å¯¹è¡Œä¸ºçš„å°è£…å’Œè°ƒå’Œå„ä¸ªå­è¡Œä¸ºä»è€Œå½¢æˆä¸€ä¸ªå¤§çš„è¡Œä¸ºï¼Œå› æ­¤é—¨é¢æ¨¡å¼æ˜¯ç»“æ„å‹è€Œä¸­ä»‹è€…æ¨¡å¼æ˜¯è¡Œä¸ºå‹ã€‚</p><h2 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h2><h3 id="æ„å›¾-5"><a href="#æ„å›¾-5" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>åœ¨ä¸ç ´åå¯¹è±¡å°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶å°†è¯¥çŠ¶æ€ä¿å­˜åœ¨å¯¹è±¡ä¹‹å¤–ã€‚åœ¨éœ€è¦æ—¶ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªæ•°æ®è¿›è¡Œæ¢å¤ã€‚ç±»ä¼¼äºæ¸¸æˆä¸­çš„å­˜æ¡£ç‚¹è®¾ç½®ã€‚</p><h3 id="åˆ«å-1"><a href="#åˆ«å-1" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>token</p><h3 id="åŠ¨æœº-4"><a href="#åŠ¨æœº-4" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¤‡å¿˜å½•æ¨¡å¼é’ˆå¯¹äºé‚£äº›éœ€è¦è¿›è¡Œæš‚å­˜çš„æ•°æ®æˆ–å¯¹è±¡ï¼Œåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ã€‚</p><h3 id="ç»“æ„-5"><a href="#ç»“æ„-5" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/memento_pattern_uml_diagram.jpg" alt="å¤‡å¿˜å½•æ¨¡å¼"></p><p>CareTaker.java è´Ÿè´£ä¿å­˜æ¯ä¸ªé˜¶æ®µçš„å¯¹è±¡çŠ¶æ€</p><h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><h3 id="æ„å›¾-6"><a href="#æ„å›¾-6" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘é€æ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥</p><h3 id="åˆ«å-2"><a href="#åˆ«å-2" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>ä¾èµ–(Dependents),å‘å¸ƒ-è®¢é˜…(Publish-Subscribe)</p><h3 id="åŠ¨æœº-5"><a href="#åŠ¨æœº-5" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜ä¼šå¯¼è‡´å¼•èµ·ç›¸å…³å¯¹è±¡çš„æ”¹å˜ï¼Œå¦‚æœè¦ä¿æŒè¿™æ ·çš„ä¸€è‡´æ€§ä¼šå¯¼è‡´å¯¹è±¡é—´å¼ºä¾èµ–ã€‚è§‚å¯Ÿè€…æ¨¡å¼å°±æ˜¯é€šè¿‡å‘å¸ƒ-è®¢é˜…æ¨¡å¼å°†é€šçŸ¥çš„èŒè´£ä»åŠ¨ä½œç±»ä¸­å¼ºåˆ¶ä¾èµ–è½¬æ¢ä¸ºé€šçŸ¥çš„æ¨¡å¼</p><h3 id="ç»“æ„-6"><a href="#ç»“æ„-6" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/observer_pattern_uml_diagram.jpg" alt="è§‚å¯Ÿè€…æ¨¡å¼"></p><p>Subjectä½œä¸ºè¢«è§‚å¯Ÿè€…ä¸­ç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰è§‚å¯Ÿè€…çš„å¼•ç”¨ï¼ŒObserverä½œä¸ºè¢«è§‚å¯Ÿè€…ç»´æŠ¤ä¸€ä¸ªSubjectçš„å¼•ç”¨ï¼Œå°†è‡ªå·±ç»„æˆåˆ°è¢«è§‚å¯Ÿè€…ä¸­<br>å¯å‚è€ƒ<br><a href="../../../../../2020/05/06/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/#more">è§‚å¯Ÿè€…æ¨¡å¼</a></p><h3 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>springä¸­çš„ApplicationListenerå’ŒApplicationEventã€ApplicationEventPublisherAwareåˆ†åˆ«ä½œä¸ºè¢«è§‚å¯Ÿè€…ã€è§‚å¯Ÿè€…å’Œå®¢æˆ·ç«¯</p><h2 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h2><h3 id="æ„å›¾-7"><a href="#æ„å›¾-7" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚ä»è¡¨è±¡ä¸Šæ¥çœ‹å°±æ˜¯å¯¹è±¡å¯ä»¥æ ¹æ®å†…éƒ¨çŠ¶æ€æ‰§è¡Œä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚</p><h3 id="åŠ¨æœº-6"><a href="#åŠ¨æœº-6" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå†…éƒ¨çŠ¶æ€è¿›è¡Œé©±åŠ¨æ—¶ï¼ŒçŠ¶æ€æ¨¡å¼å¯ä»¥å°†çŠ¶æ€å’Œè¡Œä¸ºåˆ†ç¦»ï¼Œå‡å°‘åˆ†æ”¯çš„æ¡ä»¶è¯­å¥ã€‚</p><h3 id="ç»“æ„-7"><a href="#ç»“æ„-7" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/state_pattern_uml_diagram.png" alt="çŠ¶æ€æ¨¡å¼"></p><p>å¯ä»¥çœ‹åˆ°doAction()æ–¹æ³•ä¸­æ‰ä¼šæ‰§è¡Œå…·ä½“çš„è¡Œä¸ºï¼Œä¸åŒçš„çŠ¶æ€å…·æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œé€šè¿‡contextç»´æŠ¤çŠ¶æ€ï¼Œå½“çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯¹åº”çš„è¡Œä¸ºä¹Ÿéšä¹‹å‘ç”Ÿæ”¹å˜</p><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h2><h3 id="æ„å›¾-8"><a href="#æ„å›¾-8" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>ç­–ç•¥æ¨¡å¼æ˜¯å°†ä¸åŒçš„ç®—æ³•å•ç‹¬å®šä¹‰èµ·æ¥ï¼Œé€šè¿‡ä¸åŒçš„åœºæ™¯é€‰æ‹©ä¸åŒçš„ç®—æ³•ã€‚å°†å®¢æˆ·ç«¯ä¸­çš„æ¡ä»¶åˆ†æ”¯å»æ‰ï¼Œå¹¶ä¸”æ”¯æŒæ‰©å±•ã€‚</p><h3 id="ç»“æ„-8"><a href="#ç»“æ„-8" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/strategy_pattern_uml_diagram.jpg" alt="ç­–ç•¥æ¨¡å¼"></p><p>Contextä¸­çš„strategyç±»æ˜¯å…·ä½“æ‰§è¡Œçš„ç®—æ³•ï¼Œè¿™é‡Œæœ‰ä¸¤ç§è®¾è®¡æ–¹æ¡ˆï¼Œç¬¬ä¸€ç§å°±æ˜¯UMLå›¾ä¸­çš„å†™æ³•ï¼Œå°†Contetxxä½œä¸ºæ¯æ¬¡è¡ŒåŠ¨çš„å®¹å™¨ï¼Œæ¯æ¬¡æ‰§è¡Œå‰éƒ½å…ˆè¿›è¡Œèµ‹å€¼ã€‚ç¬¬äºŒç§æ˜¯ContextæŒæœ‰ä¸€ä¸ªStrategyçš„Listæ ¹æ®æ·»åŠ é€‰æ‹©ç®—æ³•ã€</p><p>ç­–ç•¥æ¨¡å¼åœ¨å®é™…å·¥ä½œä¸­å¤§é‡ä½¿ç”¨åˆ°ï¼Œå› ä¸ºæ¶ˆé™¤äº†æ¡ä»¶åˆ¤æ–­å‡å°‘äº†åˆ†æ”¯ã€‚é€šè¿‡å¢åŠ ç±»çš„æ–¹å¼æ¥å‡å°‘åˆ†æ”¯ï¼Œç»“æ„ä¸Šä¾¿äºæ‰©å±•äº† </p><h2 id="æ¨¡æ¿æ¨¡å¼"><a href="#æ¨¡æ¿æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ¨¡å¼"></a>æ¨¡æ¿æ¨¡å¼</h2><h3 id="æ„å›¾-9"><a href="#æ„å›¾-9" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•çš„éª¨æ¶ï¼Œé€šè¿‡ç»§æ‰¿çš„æ–¹å¼è®©å­ç±»å¯ä»¥æ”¹å˜ç‰¹ç‚¹è¡Œä¸ºï¼Œä½¿å¾—ä¸ç”¨é‡æ–°å®šä¹‰ç®—æ³•çš„é¡ºåºå°±èƒ½æ”¹å˜è¡Œä¸ºã€‚</p><h3 id="åŠ¨æœº-7"><a href="#åŠ¨æœº-7" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>æ¨¡æ¿æ–¹æ³•çš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³é‡å¤å®šä¹‰çš„ç®—æ³•æ‰§è¡Œé¡ºåºå¹¶ä¸”å…·ä½“æ‰§è¡Œæœ‰å·®å¼‚çš„åœºæ™¯</p><h3 id="ç»“æ„-9"><a href="#ç»“æ„-9" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/template_pattern_uml_diagram.jpg" alt="æ¨¡æ¿æ¨¡å¼"></p><p>æ¨¡æ¿æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼çš„åŒºåˆ«åœ¨äºæ¨¡æ¿æ¨¡å¼æ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼æ¥æ”¹å˜è¡Œä¸ºï¼Œç­–ç•¥æ¨¡å¼æ˜¯é€šè¿‡æ”¹å˜å§”æ‰˜å¯¹è±¡çš„æ–¹å¼æ¥æ”¹å˜è¡Œä¸ºï¼›ç­–ç•¥æ¨¡å¼é’ˆå¯¹çš„åœºæ™¯æ˜¯ç›¸åŒç±»åœ¨å¤„ç†ä¸åŒçš„ä¸šåŠ¡åœºæ™¯æ—¶å€™ç®—æ³•çš„é€‰æ‹©é—®é¢˜ï¼Œæ¨¡æ¿æ¨¡å¼é’ˆå¯¹çš„æ˜¯ç›¸åŒçš„ç±»åœ¨å¤„ç†ç›¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¸‹ç®—æ³•ç»†å¾®çš„å·®å¼‚ç»“æ„ä¸Šã€‚</p><h2 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h2><h3 id="æ„å›¾-10"><a href="#æ„å›¾-10" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><p>å°†æ•°æ®å’Œæ•°æ®æ“ä½œåˆ†ç¦»</p><h3 id="åŠ¨æœº-8"><a href="#åŠ¨æœº-8" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¯¹ä¸€ä¸ªå¯¹è±¡éœ€è¦è¿›è¡Œå¤šæ¬¡æ“ä½œæ—¶ï¼Œä¸ºäº†é¿å…è¿™äº›æ“ä½œå°†å¯¹è±¡æ±¡æŸ“ï¼Œå¯ä»¥é€šè¿‡è®¿é—®è€…æ¨¡å¼å°†æ•°æ®å’Œæ“ä½œè¿›è¡Œéš”ç¦»ã€‚å®ç°ä¸åŒçš„è®¿é—®è€…è®¿é—®ä¸åŒçš„æ•°æ®ã€‚</p><h3 id="ç»“æ„-10"><a href="#ç»“æ„-10" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/visitor_pattern_uml_diagram.jpg" alt="è®¿é—®è€…æ¨¡å¼"></p><p>è®¿é—®è€…æ¨¡å¼çš„æ ¸å¿ƒæ˜¯åœ¨äºæ•°æ®å¯¹è±¡ä¼šé’ˆå¯¹ä¸åŒçš„è®¿é—®è€…å®šä¹‰å‡ºä¸åŒçš„è¡Œä¸ºï¼Œç”±äºè®¿é—®è€…çŸ¥é“è¢«è®¿é—®çš„æ•°æ®å¯¹è±¡ä¸­çš„æ•°æ®ç»“æ„ï¼Œå› æ­¤è®¿é—®è€…å¯ä»¥æ ¹æ®ä¸åŒçš„å¯¹è±¡å®šä¹‰å‡ºä¸åŒçš„è¡Œä¸º</p><p>è®¿é—®è€…çš„å¥½å¤„åœ¨äºå°†æ•°æ®å¯¹è±¡çš„æ“ä½œå»¶è¿Ÿåˆ°çš„è®¿é—®è€…é‚£ä¸€æ­¥ä¸­å»äº†ï¼Œé€šè¿‡å®šä¹‰ä¸åŒçš„è®¿é—®è€…å¯ä»¥æ‰§è¡Œä¸åŒçš„åŠ¨ä½œã€‚</p><h2 id="è®¾è®¡æ¨¡å¼æ€ç»´å¯¼å›¾"><a href="#è®¾è®¡æ¨¡å¼æ€ç»´å¯¼å›¾" class="headerlink" title="è®¾è®¡æ¨¡å¼æ€ç»´å¯¼å›¾"></a>è®¾è®¡æ¨¡å¼æ€ç»´å¯¼å›¾</h2><p><a href="https://imgtu.com/i/gJVn2Q"><img src="https://z3.ax1x.com/2021/05/08/gJVn2Q.png" alt="è®¾è®¡æ¨¡å¼æ€ç»´å¯¼å›¾"></a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-è¡Œä¸ºæ¨¡å¼&quot;&gt;&lt;a href=&quot;#è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-è¡Œä¸ºæ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-è¡Œä¸ºæ¨¡å¼&quot;&gt;&lt;/a&gt;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://agmtopy.gitee.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://agmtopy.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-ç»“æ„å‹æ¨¡å¼</title>
    <link href="https://agmtopy.gitee.io/2021/04/24/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
    <id>https://agmtopy.gitee.io/2021/04/24/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-04-24T15:33:53.000Z</published>
    <updated>2021-04-27T17:01:14.895Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-ç»“æ„å‹æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-ç»“æ„å‹æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-ç»“æ„å‹æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-ç»“æ„å‹æ¨¡å¼</h1><h2 id="ç»“æ„å‹æ¨¡å¼"><a href="#ç»“æ„å‹æ¨¡å¼" class="headerlink" title="ç»“æ„å‹æ¨¡å¼"></a>ç»“æ„å‹æ¨¡å¼</h2><blockquote><p>ç»“æ„å‹æ¨¡å¼æ¶‰åŠåˆ°çš„æ˜¯å¦‚ä½•ç»„ç»‡ç±»å’Œå¯¹è±¡ä¹‹é—´çš„å¼•ç”¨å…³ç³»,ä»¥ä¾¿è·å¾—æ›´å¤§çš„ç»„ç»‡ç»“æ„å’Œæ›´å¥½çš„å¯æ‰©å±•æ€§ã€‚ç»“æ„æ€§æ¨¡å¼å¾€å¾€é‡‡ç”¨ç»§æ‰¿å’Œç»„åˆä¸¤ç§æ‰‹æ®µæ¥å®ç°ï¼Œå…³æ³¨çš„é‡ç‚¹åœ¨äºå¯¹è±¡ä¹‹é—´ç›¸äº’ç»„åˆå¼•ç”¨çš„å…³ç³»ä¸Šã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å…·ä½“çš„æ¨¡å¼ï¼š</p></blockquote><ol><li>é€‚é…å™¨æ¨¡å¼</li><li>æ¡¥æ¥æ¨¡å¼</li><li>ç»„åˆæ¨¡å¼</li><li>è£…é¥°æ¨¡å¼</li><li>å¤–è§‚æ¨¡å¼</li><li>äº«å…ƒæ¨¡å¼</li><li>ä»£ç†æ¨¡å¼</li></ol><h2 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h2><h3 id="æ„å›¾"><a href="#æ„å›¾" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><blockquote><p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸæœ›èƒ½ä½¿ç”¨çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚Adapteræ¨¡å¼ä½¿åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹ä¸èƒ½åœ¨ä¸€èµ·ä½¿ç”¨çš„ç±»èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ªä¸­é—´é€‚é…ç±»ä»è€Œèƒ½ä¸€èµ·å·¥ä½œäº†</p></blockquote><h3 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>Wrapper</p><h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/20210223-adapter.png" alt="é€‚é…å™¨æ¨¡å¼"><br>å¯ä»¥çœ‹åˆ°åŸæœ¬AudioPlayerä¸èƒ½ç›´æ¥å¼•ç”¨AdvanceMediaPlayerï¼Œä½†æ˜¯é€šè¿‡MediaAdapterå®ç°AudioPlayeråŒæ ·çš„æ¥å£åï¼Œåœ¨MediaAdapterä¸­å¼•ç”¨AdvanceMediaPlayerå®ç°å»æ‰§è¡Œå…·ä½“çš„æ–¹æ³•ï¼Œä»è€Œè¿‚å›å®ç°AdvanceMediaPlayerçš„è°ƒç”¨</p><h2 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h2><h3 id="æ„å›¾-1"><a href="#æ„å›¾-1" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><blockquote><p>å°†æŠ½è±¡éƒ¨åˆ†å’Œå®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä»è€Œä½¿å¾—ä¸¤è€…éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚å‡ºç°æ¡¥æ¥æ¨¡å¼çš„åŸå› åœ¨å› ä¸ºç»§æ‰¿æ¥å£-å®ç°æ–¹æ³•è¿™ç§æ¨¡å¼ä¸‹æ¥å£å®šä¹‰å¥½çš„æ–¹æ³•å­ç±»å¿…é¡»æŒ‰ç…§å®šä¹‰è¿›è¡Œå®ç°ï¼Œç¼ºä¹çµæ´»æ€§(PS:ç»§æ‰¿æ–¹å¼æ˜¯ä¸€ç§å¼ºçº¦æŸçš„å…³ç³»ï¼Œé€‚ç”¨äºå¼ºçº¦æŸçš„åœºåˆ)</p></blockquote><h3 id="åˆ«å-1"><a href="#åˆ«å-1" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>Hadnle/Body</p><h3 id="ç»“æ„-1"><a href="#ç»“æ„-1" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2018/06/1528771072-8457-5780d2384acdbb60ec07fc3c71a1.png" alt="æ¡¥æ¥æ¨¡å¼"></p><p>Abstractionå’ŒImplementoréƒ½æ˜¯æŠ½è±¡ç±»ï¼Œç”±äºAbstractionå†…éƒ¨æŒæœ‰ImplementoræŠ½è±¡ç±»ï¼Œä»è€Œä½¿å¾—è¿™ä¸¤ä¸ªæŠ½è±¡ç±»éƒ½å¯ä»¥ç‹¬ç«‹çš„å‘å±•ï¼Œæ¡¥æ¥æ¨¡å¼çš„æ ¸å¿ƒåº”è¯¥æ˜¯å°†ä¸šåŠ¡ä¸Šä¸åŒçš„æŠ½è±¡éƒ¨åˆ†å•ç‹¬åˆ†ç¦»å¼€ï¼Œç‹¬ç«‹æ¼”åŒ–ï¼Œå…³æ³¨çš„åº”è¯¥æ˜¯ä¸šåŠ¡ä¸ŠæŠ½è±¡çš„åŠŸèƒ½åˆ†ç¦»å’Œåœ¨æŠ½è±¡å¯¹è±¡ç±»çš„ç»„åˆã€‚é€šè¿‡åˆ†ç¦»å’Œç»„åˆæ›´å¥½çš„æè¿°ä¸€ä¸ªç±»</p><h2 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h2><blockquote><p>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€éƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚é€‚ç”¨äºå¸Œæœ›å¿½ç•¥ç»„åˆå¯¹è±¡å’Œå•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç”¨æˆ·å°†ç»Ÿä¸€çš„ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚</p></blockquote><h3 id="ç»“æ„-2"><a href="#ç»“æ„-2" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><a href="https://imgtu.com/i/cztr0P"><img src="https://z3.ax1x.com/2021/04/25/cztr0P.png" alt="cztr0P.png"></a><br>æä¾›Componentæ¥å£(æŠ½è±¡æ„ä»¶)ï¼Œè¯¥æ¥å£æœ‰ä¸¤ä¸ªå®ç°åˆ†åˆ«æ˜¯å®¹å™¨æ„ä»¶(Composlte)ã€å¶å­æ„ä»¶(Leaf)ã€‚å®¢æˆ·ç«¯é€šè¿‡ç›´æ¥ä½¿ç”¨Componentæ¥å£ï¼Œæ¥å¿½ç•¥å…·ä½“æ˜¯å•ä¸ªå¯¹è±¡è¿˜æ˜¯ç»„åˆå¯¹è±¡æä¾›çš„æœåŠ¡ã€‚composlteå¯¹è±¡å®ç°äº†Componetæ‰€å®šä¹‰çš„ç®¡ç†å¶å­èŠ‚ç‚¹çš„æ–¹æ³•Add()ã€Remove()ã€GetChild()</p><p>ç»„åˆæ¨¡å¼åœ¨å®ç°ä¸Šæœ‰ä¸¤ç§æ–¹æ³•ï¼š1.é€æ˜ç»„åˆæ¨¡å¼ã€2.å®‰å…¨ç»„åˆæ¨¡å¼ã€‚<br>é€æ˜ç»„åˆæ¨¡å¼çš„ç‰¹ç‚¹æ˜¯å¶å­èŠ‚ç‚¹å’Œå®¹å™¨æ„ä»¶éƒ½è¦å®ç°ç›¸åŒçš„æ¥å£ï¼Œä½†æ˜¯å¶å­èŠ‚ç‚¹å’ŒæŠ½è±¡æ„ä»¶èŠ‚ç‚¹å…¶å®éƒ½ç›¸äº’å†—ä½™äº†éƒ¨åˆ†ä¸å±äºè‡ªå·±çš„æ–¹æ³•ã€‚<br>å®‰å…¨ç»„åˆæ¨¡å¼æŒ‡çš„æ˜¯åœ¨æŠ½è±¡æ„ä»¶ä¸­ä¸ä¼šå£°æ˜ä»»ä½•æœ‰å…³å®¹å™¨æ„ä»¶çš„æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨å®¹å™¨æ„ä»¶ä¸­å»å£°æ˜å¹¶å®ç°è¯¥æ–¹æ³•</p><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><h4 id="java-awt-Container"><a href="#java-awt-Container" class="headerlink" title="java.awt.Container"></a>java.awt.Container</h4><ul><li>Container.java<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Container</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span><span class="token punctuation">></span></span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>Containerç±»å†…éƒ¨ç®¡ç†ä¸€ä¸ª<b>Component</b>çš„é›†åˆå¼•ç”¨ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯å®‰å…¨çš„ç»„åˆæ¨¡å¼å› æ­¤ç®¡ç†é›†åˆä¸­çš„å…ƒç´ çš„æ–¹æ³•æ˜¯åœ¨Containerä¸­å®ç°çš„</li></ul><h2 id="è£…é¥°æ¨¡å¼"><a href="#è£…é¥°æ¨¡å¼" class="headerlink" title="è£…é¥°æ¨¡å¼"></a>è£…é¥°æ¨¡å¼</h2><blockquote><p>åŠ¨æ€çš„ä¸ºç›®æ ‡å¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œè£…é¥°æ¨¡å¼(Decorator)åœ¨åŠŸèƒ½ä¸Šä¸ç»§æ‰¿ç±»ä¼¼éƒ½æ˜¯å¢å¼ºç›®æ ‡æ–¹æ³•ï¼Œä½†æ˜¯è£…é¥°æ¨¡å¼åœ¨ç»“æ„ä¸Šæ˜¯å‘ä¸Šçš„ï¼Œè€Œç»§æ‰¿åœ¨ç»“æ„ä¸Šæ˜¯å‘ä¸‹çš„ã€‚è£…é¥°æ¨¡å¼æ›´åŠ çš„çµæ´»ï¼Œæ²¡æœ‰ç»§æ‰¿é‚£ç§å¼ºä¾èµ–çš„å…³ç³»ã€‚</p></blockquote><h3 id="åˆ«å-2"><a href="#åˆ«å-2" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>åŒ…è£…å™¨-Wrapper</p><h3 id="ç»“æ„-3"><a href="#ç»“æ„-3" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><a href="https://imgtu.com/i/gpGYfe"><img src="https://z3.ax1x.com/2021/04/26/gpGYfe.jpg" alt="è£…é¥°å™¨æ¨¡å¼"></a></p><p>Componentæ˜¯é¡¶å±‚æ¥å£ï¼Œåˆ†åˆ«åˆ«ç›®æ ‡å¯¹è±¡å’Œè£…é¥°å™¨å¯¹è±¡å®ç°ï¼Œè£…é¥°å™¨å¯¹è±¡é€šè¿‡å†…éƒ¨æŒæœ‰ç›®æ ‡å¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨ï¼Œå®¢æˆ·ç«¯åœ¨è°ƒç”¨ç›®æ ‡ç±»çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡è°ƒç”¨è£…é¥°ç±»çš„æä¾›å‡ºæ¥çš„æ–¹æ³•ã€‚è£…é¥°å™¨åœ¨æŒæœ‰ç›®æ ‡ç±»çš„å¼•ç”¨åå°±å¯ä»¥åœ¨æ‰§è¡Œæ–¹æ³•å‰åéƒ½è¿›è¡Œè‡ªå®šä¹‰å¢å¼ºå¤„ç†ï¼Œä»è€Œå®ç°å¯¹ç›®æ ‡ç±»çš„å¢å¼º</p><p>è£…é¥°å™¨çš„ä¼˜ç‚¹åœ¨äºï¼š</p><ol><li>æ¯”é™æ€ç»§æ‰¿çµæ´»ä¸”æ— å¼ºä¾èµ–æ€§</li><li>é¿å…ç±»ç»§æ‰¿ç»“æ„è¿‡é«˜</li></ol><p>è¿™ä¸ªç¼ºç‚¹ä¸ç”šç†è§£ï¼š</p><blockquote><p>è£…é¥°ç±»å’Œç›®æ ‡ç±»æ˜¯ä¸ä¸€æ ·çš„ï¼Œè£…é¥°ç±»å¯¹äºå…¶ä»–å¯¹è±¡æ¥è¯´æ˜¯é€æ˜çš„</p></blockquote><ol start="4"><li>è¿‡å¤šçš„ç±»(ä¸ªäººè®¤ä¸ºä¸æ˜¯ç¼ºç‚¹ï¼Œç±»æŒ‰ç…§èŒè´£åˆ’åˆ†æœ¬æ¥å°±ä¼šäº§ç”Ÿæ›´å¤šçš„å°ç±»ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„ç±»)</li></ol><h2 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h2><blockquote><p>ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼ŒFacadeæ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£éƒ½å®ç°è¯¥æ¥å£ï¼Œå¯¹å¤–æä¾›ä¸€ä¸ªç›¸åŒçš„æ¥å£ã€‚</p></blockquote><h3 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¤æ‚çš„å­ç³»ç»Ÿæœ‰å¤šä¸ªç±»ï¼Œæ¯ä¸ªç±»æš´éœ²å‡ºä¸€äº›å…¬å…±æ–¹æ³•è¿™äº›æ–¹æ³•ç›¸äº’è°ƒç”¨å¹¶å¯¹å¤–æä¾›ä¸€ä¸ªæœåŠ¡ï¼Œè¿™ä¸ªæ—¶å€™å¤–éƒ¨å®¢æˆ·ç«¯å¹¶ä¸å…³å¿ƒå­ç³»ç»Ÿçš„å†…éƒ¨è°ƒç”¨ï¼Œå°±å¯ä»¥é€šè¿‡Facadeçš„æ¨¡å¼å°†å­ç³»ç»Ÿæš´éœ²å‡ºå»çš„æ¥å£æ•´ç†æˆç‹¬ç«‹çš„æ¥å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><a href="https://imgtu.com/i/gCcIqx"><img src="https://z3.ax1x.com/2021/04/27/gCcIqx.png" alt="é—¨é¢æ¨¡å¼"></a></p><ul><li><p>Facade<br>å°†è¯·æ±‚å‘é€ç»™å­ç³»ç»Ÿå¯¹è±¡</p></li><li><p>Subsystem class<br>å®ç°å­ç³»ç»ŸåŠŸèƒ½<br>å¤„ç†æœ‰FacadeæŒ‡æ´¾çš„ä»»åŠ¡</p></li></ul><h3 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><ul><li><p>JdbcUtil.java<br>JdbcUtilå°†æœ‰å…³jdbcçš„æ“ä½œå°è£…æˆä¸ºä¸€ä¸ªæ–¹æ³•ï¼Œå¯¹å¤–æä¾›æœåŠ¡</p></li><li><p>RequestFacade.java<br>Tomcatçš„RequestFacade.java</p></li></ul><h2 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h2><blockquote><p>è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆçš„æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ï¼Œé€šä¿—çš„æ¥å°†å°±æ˜¯ç¼“å­˜å…·ä½“å¯¹è±¡ï¼Œåœ¨ä½¿ç”¨æ—¶è¿”å›è¯¥å¯¹è±¡ã€‚ä¸å•ä¾‹æ¨¡å¼ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå•ä¾‹æ¨¡å¼è¦ä¿è¯å…¨å±€å”¯ä¸€ã€‚äº«å…ƒæ¨¡å¼ä¸ç”¨ä¿è¯å…¨å±€å”¯ä¸€ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­åˆ›å»ºå¯¹è±¡ã€‚äº«å…ƒæ¨¡å¼ä¼šé€šè¿‡å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ä¸¤ä¸ªæ ‡è¯†æ¥ä¿è¯å¯¹è±¡è¡Œä¸ºçš„å†…éƒ¨ä¸€è‡´æ€§å’Œå¤–éƒ¨å·®å¼‚æ€§</p></blockquote><h3 id="ç»“æ„-4"><a href="#ç»“æ„-4" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><a href="https://imgtu.com/i/gC5iBd"><img src="https://z3.ax1x.com/2021/04/28/gC5iBd.png" alt="äº«å…ƒæ¨¡å¼"></a></p><h3 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><ul><li>Stringå¸¸é‡æ± </li><li>çº¿ç¨‹æ± </li></ul><h2 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h2><blockquote><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®</p></blockquote><h3 id="åˆ«å-3"><a href="#åˆ«å-3" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>Surrogate</p><h3 id="åŠ¨æœº-1"><a href="#åŠ¨æœº-1" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>ä»£ç†æ¨¡å¼ä¸ºå¯¹è±¡æä¾›äº†ä¸€ä¸ªå¯è‡ªå®šä¹‰çš„è®¿é—®å¯¹è±¡ï¼Œå¯ä»¥å®ç°<b>è¿œç¨‹ä»£ç†</b>ã€<b>è™šä»£ç†</b>ã€<b>ä¿æŠ¤ä»£ç†</b>ã€<b>æ™ºèƒ½æŒ‡å¼•</b>ç­‰åŠŸèƒ½<br>è™šä»£ç†:æŒ‡çš„æ˜¯ä¹Ÿå°±æ˜¯åŠ¨æ€ä»£ç†ï¼Œå°†åˆå§‹åŒ–å»¶è¿Ÿåˆ°è¿è¡Œæ—¶<br>ä¿æŠ¤ä»£ç†/è™šä»£ç†:éƒ½æ˜¯å¯¹ä»£ç†å¯¹è±¡çš„å¢å¼º</p><h3 id="ç»“æ„-5"><a href="#ç»“æ„-5" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><a href="https://z3.ax1x.com/2021/04/28/gC5ujg.png">![ä»£ç†æ¨¡å¼]</a>](<a href="https://imgtu.com/i/gC5ujg">https://imgtu.com/i/gC5ujg</a>)</p><p>ä»£ç†æ¨¡å¼ä¾§é‡äºå¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®æ§åˆ¶ä¸Šï¼Œè£…é¥°æ¨¡å¼ä¾§é‡äºå¯¹ç›®æ ‡å¯¹è±¡åŠŸèƒ½å¢å¼ºä¸Šã€‚ä»£ç†æ¨¡å¼ä¸»è¦æ˜¯å¯¹ä¸å¯è§çš„å¯¹è±¡è¿›è¡Œè®¿é—®çš„ä»£ç†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-ç»“æ„å‹æ¨¡å¼&quot;&gt;&lt;a href=&quot;#è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-ç»“æ„å‹æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-ç»“æ„å‹æ¨¡å¼&quot;&gt;&lt;/a&gt;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://agmtopy.gitee.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://agmtopy.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼</title>
    <link href="https://agmtopy.gitee.io/2021/04/17/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E7%A1%80-%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
    <id>https://agmtopy.gitee.io/2021/04/17/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E7%A1%80-%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-04-17T07:17:24.000Z</published>
    <updated>2021-04-22T16:33:17.818Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼</h1><h2 id="å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼"><a href="#å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼" class="headerlink" title="å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼"></a>å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼</h2><blockquote><p>å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼æŠ½è±¡äº†å¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹.å¸®åŠ©ä¸€ä¸ªç³»ç»Ÿç‹¬ç«‹äºå¦‚ä½•åˆ›å»ºã€ç»„åˆå’Œè¡¨ç¤ºå®ƒçš„é‚£äº›å¯¹è±¡ã€‚ä¸€ä¸ªç±»å‹åˆ›å»ºæ¨¡å¼ä½¿ç”¨ç»§æ‰¿æ”¹å˜è¢«å®ä¾‹åŒ–çš„ç±»ï¼Œè€Œä¸€ä¸ªå¯¹è±¡åˆ›å»ºå‹æ¨¡å¼å°†å®ä¾‹åŒ–å§”æ‰˜ç»™å¦å¤–ä¸€ä¸ªå¯¹è±¡</p></blockquote><p>åˆ›å»ºå‹æ¨¡å¼çš„ä¸»è¦ç‰¹ç‚¹æ˜¯è¯¥æ¨¡å¼èšç„¦äºå¯¹è±¡çš„åˆ›å»ºä¸Šï¼Œå…³æ³¨äºå¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ã€‚å› ä¸ºåŒä¸€ä¸ªç±»ä¸åŒçš„å®ä¾‹åŒ–è¿‡ç¨‹ä¼šå¯¹è¯¥ç±»æ‰€è¡¨ç°å‡ºæ¥çš„è¡Œä¸ºäº§ç”Ÿå½±å“ã€‚ä»è€Œåœ¨åˆ›å»ºæ—¶ï¼Œé€šè¿‡ä¸åŒçš„è®¾è®¡æ¨¡å¼å°†è¯¥è¿‡ç¨‹æŠ½è±¡å‡ºæ¥é€‚åº”ä¸åŒçš„åœºæ™¯</p><p>åˆ›å»ºå‹æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹5ç§ç±»å‹ï¼š</p><ol><li>æŠ½è±¡å·¥å‚æ¨¡å¼</li><li>æ„é€ å™¨æ¨¡å¼</li><li>å·¥å‚æ¨¡å¼</li><li>åŸå‹æ¨¡å¼</li><li>å•ä¾‹æ¨¡å¼</li></ol><h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><h3 id="æ„å›¾"><a href="#æ„å›¾" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><blockquote><p>æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»</p></blockquote><h3 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>Kit</p><h3 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>ä¸ºè§£å†³å¯¹è±¡å·¥å‚çš„åˆ›å»ºé—®é¢˜ã€‚å½“ä¸€ä¸ªä¸šåŠ¡åœºæ™¯éœ€è¦å¤šä¸ªå·¥å‚å®ä¾‹æ¥åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¦‚ä½•åˆ›å»ºè¿™äº›å·¥å‚å°±å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼æ¥è¿›è¡Œã€‚è¿™ä¸ªæ¨¡å¼æ“ä½œçš„å¯¹è±¡æ˜¯æ˜¯å·¥å‚å¯¹è±¡ï¼Œè€Œä¸æ˜¯å…·ä½“å·¥å‚å¯¹è±¡äº§ç”Ÿçš„å®ä¾‹å¯¹è±¡ã€‚è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯å¯¹å¤–éƒ¨æ¥è¯´åªéœ€è¦ä¾èµ–AbstractFactoryå’ŒAbstractProductå°±å¯ä»¥äº†ï¼Œä¸ç”¨å…³ç³»å…·ä½“BeanFactoryå’ŒProductFactoryæ˜¯æ€ä¹ˆæ ·è¢«åˆ›å»ºå’Œä¾èµ–çš„ã€‚å¯¹AbstractFactoryå†…éƒ¨å®ç°äº†Factoryå’ŒProductçš„èšåˆã€‚åå¤„åœ¨äºå¢åŠ ä¸€ä¸ªProductyæ—¶ä¼šåŒæ—¶ä¿®æ”¹Abstractå’Œåˆ›å»ºæ–°çš„å…·ä½“çš„BeanFactoryã€‚</p><h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/3E13CDD1-2CD2-4C66-BD33-DECBF172AE03.jpg" alt="æŠ½è±¡å·¥å‚æ¨¡å¼"></p><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><h4 id="ç®€å•å®ç°"><a href="#ç®€å•å®ç°" class="headerlink" title="ç®€å•å®ç°"></a>ç®€å•å®ç°</h4><ul><li><p>AbstractFactory.java</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractFactory</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Object</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>AbstractFactoryæŠ½è±¡ç±»å®šä¹‰è·å–å¯¹è±¡çš„æ–¹æ³•</p></li><li><p>ObjectFactory1</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectFactory1</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactory</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Shape</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> objectType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>objectType<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">"object1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Object1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>objectType<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">"object2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Object1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ObjectFactory1ä½œä¸ºå·¥å‚ç±»ç»§æ‰¿æŠ½è±¡å·¥å‚ç±»ï¼Œå¹¶å®ç°å…·ä½“çš„æŠ½è±¡æ–¹æ³•ç”Ÿäº§å¯¹è±¡</p></li><li><p>Client</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span><span class="token punctuation">&#123;</span>    <span class="token comment">//1. ç”Ÿæˆå·¥å‚ç±»</span>    <span class="token keyword">public</span> <span class="token class-name">AbstractFactory</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> classType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//2. é€šè¿‡å·¥å‚ç±»ç”Ÿæˆäº§å“</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">AbstractFactory</span> factory <span class="token operator">=</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">"classType"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> obj <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">"objectType"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>åœ¨å®¢æˆ·ç«¯ä¸­ä¸»è¦æœ‰ä¸¤æ­¥ï¼Œç¬¬ä¸€ä¸ªæ˜¯è·å–å…·ä½“çš„å·¥å‚ç±»ã€‚ç¬¬äºŒä¸ªæ˜¯æ ¹æ®å·¥å‚ç±»è·å–å¯¹åº”çš„äº§å“ã€‚ä»ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·¥å‚çš„ç”Ÿæˆå’Œäº§å“çš„ç”Ÿæˆéƒ½éœ€è¦æŒ‰ç…§ä¸åŒçš„ç±»å‹æ¥é€‰æ‹©ç”Ÿæˆçš„å…·ä½“å®ç°ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼ç®¡ç†çš„æ˜¯å·¥å‚ç±»ã€‚</p><h4 id="Springä¸­çš„æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#Springä¸­çš„æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="Springä¸­çš„æŠ½è±¡å·¥å‚æ¨¡å¼"></a>Springä¸­çš„æŠ½è±¡å·¥å‚æ¨¡å¼</h4><p><strong>AbstractBeanFactory__ä¸»è¦æœ‰ä¸‰ä¸ªå®ç°ç±»__XmlBeanFactory(å·²è¿‡æ—¶)__ã€__AbstractAutowireCapableBeanFactory__ã€__DefaultListableBeanFactory</strong><br>å…¶ä¸­ä¸»è¦ä½¿ç”¨çš„æ˜¯ä½œä¸ºè‡ªåŠ¨è£…é…çš„å·¥å‚ç±»AbstractAutowireCapableBeanFactory</p><h2 id="buildæ¨¡å¼"><a href="#buildæ¨¡å¼" class="headerlink" title="buildæ¨¡å¼"></a>buildæ¨¡å¼</h2><h3 id="æ„å›¾-1"><a href="#æ„å›¾-1" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><blockquote><p>å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»,ä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒå«ä¹‰çš„å¯¹è±¡ã€‚æ„é€ è€…æ¨¡å¼è¦æ±‚æ„é€ å¯¹è±¡è¶³å¤Ÿå¤æ‚å¹¶ä¸”èƒ½å¤ŸæŒ‰ç…§éƒ¨åˆ†å‚æ•°è¿›è¡Œå¤„ç†ï¼Œæ„é€ è€…æ¨¡å¼å°†å†…éƒ¨å¯¹è±¡åˆå§‹åŒ–çš„ç»†èŠ‚å°è£…èµ·æ¥ï¼Œå¤–éƒ¨å¯¹è±¡ä¹‹é—´è°ƒç”¨å³å¯</p></blockquote><h3 id="ç»“æ„-1"><a href="#ç»“æ„-1" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><a href="https://imgtu.com/i/cqsLl9"><img src="https://z3.ax1x.com/2021/04/22/cqsLl9.png" alt="æ„é€ è€…æ¨¡å¼"></a></p><h3 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><ul><li>lombokä¸­çš„@Builder</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserParam</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//DELOMBOKä¹‹åçš„ä»£ç </span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserParam</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>        <span class="token class-name">UserParam</span><span class="token punctuation">(</span><span class="token class-name">String</span> userName<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>userName <span class="token operator">=</span> userName<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">UserParamBuilder</span> <span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserParamBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UserParamBuilder</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>            <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>            <span class="token class-name">UserParamBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">public</span> <span class="token class-name">UserParamBuilder</span> <span class="token function">userName</span><span class="token punctuation">(</span><span class="token class-name">String</span> userName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>userName <span class="token operator">=</span> userName<span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">public</span> <span class="token class-name">UserParamBuilder</span> <span class="token function">password</span><span class="token punctuation">(</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">public</span> <span class="token class-name">UserParam</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserParam</span><span class="token punctuation">(</span>userName<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token string">"UserParam.UserParamBuilder(userName="</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userName <span class="token operator">+</span> <span class="token string">", password="</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°lombokçš„@Builderæ³¨è§£åªæ˜¯åœ¨å†…éƒ¨è®¾ç½®äº†ä¸€ä¸ªé™æ€æ–¹æ³•å’Œé™æ€ç±»æ¥ç”Ÿæˆbuildæ–¹å¼ï¼Œå°†__Direct__çš„èŒè´£äº¤ç»™ç±»çš„ä½¿ç”¨è€…å»å¤„ç†äº†ã€‚</p><h2 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h2><h3 id="æ„å›¾-2"><a href="#æ„å›¾-2" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><blockquote><p>å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å…·ä½“çš„ç±»å¯¹è±¡ã€‚Factort Methodä½¿å¾—ç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°äº†å­ç±»ä½¿ç”¨çš„æ—¶å€™ã€‚</p></blockquote><h3 id="åˆ«å-1"><a href="#åˆ«å-1" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>è™šæ„é€ å™¨(Virtual Constructor)</p><h3 id="ç»“æ„-2"><a href="#ç»“æ„-2" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><a href="https://imgtu.com/i/cOCXVJ"><img src="https://z3.ax1x.com/2021/04/22/cOCXVJ.jpg" alt="å·¥å‚æ¨¡å¼"></a></p><p>åœ¨å›¾ä¸­å¯ä»¥çœ‹åˆ°äº§å“å¿…é¡»æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£ï¼Œç„¶ååœ¨é€šè¿‡å·¥å‚å®šä¹‰åˆ›å»ºäº§å“çš„æ–¹æ³•ã€‚é€šè¿‡é›†æˆå·¥å‚æ¥å£å®ç°ä¸åŒçš„äº§å“çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚</p><h3 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><h4 id="springå·¥å‚æ¨¡å¼"><a href="#springå·¥å‚æ¨¡å¼" class="headerlink" title="springå·¥å‚æ¨¡å¼"></a>springå·¥å‚æ¨¡å¼</h4><ul><li>FactoryBean.java</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>        <span class="token comment">//è·å–å…·ä½“çš„ç±»</span><span class="token annotation punctuation">@Nullable</span><span class="token class-name">T</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>    <span class="token comment">//è·å–ç±»çš„ç±»å‹</span><span class="token annotation punctuation">@Nullable</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ˜¯å¦æ˜¯å•ä¾‹</span><span class="token keyword">default</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³›å‹Tæ˜¯æŠ½è±¡çš„äº§å“çš„æ¥å£,åœ¨FactoryBeançš„å®ç°ç±»ä¸Šå¯ä»¥æ ¹æ®æ„é€ å™¨æˆ–è€…åœ¨è°ƒç”¨getObject()æ–¹æ³•ä¹‹å‰è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•æ¥å¯¹ç”Ÿæˆçš„å¯¹è±¡è¿›è¡Œè‡ªå®šä¹‰çš„å‚æ•°é…ç½®,è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥ä¸æ”¹å˜è°ƒç”¨ç«¯çš„é€»è¾‘ä»è€Œå¢åŠ ä¸€ä¸ªäº§å“å­ç±»</p><p>åœ¨å…·ä½“çš„å®ç°ä¸Š,å·¥å‚æ¨¡å¼æœ‰ä¸¤ç§æ–¹å¼,1. å·¥å‚ç±»ä½œä¸ºæŠ½è±¡ç±»,æä¾›æŠ½è±¡æ–¹æ³•,ç”±å®ç°è¯¥ç±»çš„å­ç±»å…·ä½“çš„å»åšåˆå§‹åŒ–äº§å“çš„æ“ä½œ;2.å·¥å‚ç±»ä¸åšä¸ºæŠ½è±¡ç±»,å¹¶ä¸”æä¾›é»˜è®¤çš„äº§å“åˆ›å»º</p><h2 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h2><h3 id="æ„å›¾-3"><a href="#æ„å›¾-3" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><blockquote><p>ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»,å¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡</p></blockquote><h3 id="ç»“æ„-3"><a href="#ç»“æ„-3" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><a href="https://imgtu.com/i/cOmRSJ"><img src="https://z3.ax1x.com/2021/04/23/cOmRSJ.png" alt="åŸå‹æ¨¡å¼"></a></p><p>åŸå‹æ¨¡å¼æ˜¯é€šè¿‡æ‹·è´ä¸€ä¸ªç°æœ‰å¯¹è±¡ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡,éœ€è¦ä¸»è¦çš„æ˜¯åŸå‹æ¨¡å¼æ˜¯æ·±æ‹·è´è€Œä¸æ˜¯æµ…æ‹·è´</p><h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><h3 id="æ„å›¾-4"><a href="#æ„å›¾-4" class="headerlink" title="æ„å›¾"></a>æ„å›¾</h3><blockquote><p>ä¿è¯ä¸€ä¸ªå…¨å±€åªæœ‰ä¸€ä¸ªç±»,å¹¶ä¸”æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹</p></blockquote><h3 id="ç»“æ„-4"><a href="#ç»“æ„-4" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><a href="https://www.runoob.com/wp-content/uploads/2014/08/62576915-36E0-4B67-B078-704699CA980A.jpg"><img src="https://z3.ax1x.com/2021/04/23/cOmRSJ.png" alt="å•ä¾‹æ¨¡å¼"></a></p><h3 id="å®ä¾‹-3"><a href="#å®ä¾‹-3" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>Springä¸­çš„å•ä¾‹æ¨¡å¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼&quot;&gt;&lt;a href=&quot;#è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€-å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼&quot;&gt;&lt;/a&gt;è®¾è®¡æ¨¡å¼-</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://agmtopy.gitee.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://agmtopy.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€</title>
    <link href="https://agmtopy.gitee.io/2021/04/15/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E7%A1%80/"/>
    <id>https://agmtopy.gitee.io/2021/04/15/3.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%9F%BA%E7%A1%80/</id>
    <published>2021-04-15T12:31:01.000Z</published>
    <updated>2021-04-17T07:16:34.974Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€"><a href="#è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€" class="headerlink" title="è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€"></a>è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€</h1><h2 id="è®¾è®¡æ¨¡å¼ç®€ä»‹"><a href="#è®¾è®¡æ¨¡å¼ç®€ä»‹" class="headerlink" title="è®¾è®¡æ¨¡å¼ç®€ä»‹"></a>è®¾è®¡æ¨¡å¼ç®€ä»‹</h2><ul><li>è®¾è®¡æ¨¡å¼åˆ—è¡¨</li></ul><ol><li>Abstract Factory<blockquote><p>æä¾›ä¸€ä¸ª<b>åˆ›å»º</b>ä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£,è€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»</p></blockquote></li><li>Adapter<blockquote><p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£.Adapteræ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½åœ¨ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥åœ¨ä¸€èµ·å·¥ä½œ</p></blockquote></li><li>Bridge<blockquote><p>ä½¿å¾—æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»,ä½¿å¾—å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–</p></blockquote></li><li>Builder<blockquote><p>å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»,ä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„å¯¹è±¡</p></blockquote></li><li>Chain of Responsibility<blockquote><p>ä¸ºè§£é™¤è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆ,ä½¿å¾—å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚.å°†è¿™äº›å¤„ç†å¯¹è±¡è¿æˆé“¾,å¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚,ç›´åˆ°é“¾å°¾</p></blockquote></li><li>Command<blockquote><p>å°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸ºä¸€ä¸ªå¯¹è±¡,ä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–;å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•æ—¥å¿—,ä»¥åŠæ”¯æŒå¯å–æ¶ˆçš„æ“ä½œ</p></blockquote></li><li>Composite<blockquote><p>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€™éƒ¨åˆ†-æ•´ä½“â€™çš„å±‚æ¬¡æœºæ„.Compositeä½¿å¾—å®¢æˆ·å¯¹å•ä¸ªæˆ–å¤åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§</p></blockquote></li><li>Decorator<blockquote><p>åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£.å°±æ‰©å±•åŠŸèƒ½è€Œè¨€Decoratoræ¯”å­—èŠ‚ç”Ÿäº§å­ç±»æ›´ä¸ºçµæ´»</p></blockquote></li><li>Facade<blockquote><p>ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢,Facadeå®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£,è¿™ä¸ªæ¥å£ä½¿å¾—å­ç³»ç»Ÿæ›´åŠ æ˜“ç”¨</p></blockquote></li><li>Factory Method<blockquote><p>å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£,è®©å­ç±»å»å†³å®šå°†é‚£ä¸ªç±»è¿›è¡Œå®åˆ—åŒ–,Factory Methodä½¿å¾—ç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°äº†å­ç±»ä¸­</p></blockquote></li><li>Flyweight<blockquote><p>è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆçš„æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡</p></blockquote></li><li>Interpreter<blockquote><p>ç»™å®šä¸€ä¸ªè¯­è¨€,å®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤º,å¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨,è¯¥è§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­</p></blockquote></li><li>Iterator<blockquote><p>æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ,è€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤º</p></blockquote></li><li>Mediator<blockquote><p>ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’.ä¸­ä»‹è€…ä½¿å¾—å„ä¸ªå¯¹è±¡ä¸éœ€è¦æ˜¾ç¤ºçš„ç›¸äº’å¼•ç”¨,ä»è€Œä½¿å¾—å…¶è€¦åˆæ¾æ•£,è€Œä¸”å¯ç”¨ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’</p></blockquote></li><li>Memento<blockquote><p>åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹,æ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€,å¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€.è¿™æ ·ä»¥åå°±å¯ä»¥å°†è¯¥å¯¹è±¡æ¢å¤åˆ°ä¿å­˜çŠ¶æ€</p></blockquote></li><li>Observer<blockquote><p>å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»,ä»¥ä¾¿äºå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶,æ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨åˆ·æ–°</p></blockquote></li><li>Prototype<blockquote><p>ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»,å¹¶é€šè¿‡æ‹·è´è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡</p></blockquote></li><li>Proxy<blockquote><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥æ§åˆ¶è¿™ä¸ªå¯¹è±¡çš„è®¿é—®</p></blockquote></li><li>Singleton<blockquote><p>ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹.å¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹</p></blockquote></li><li>State<blockquote><p>å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸º.å¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒæ‰€å±çš„ç±».</p></blockquote></li><li>Strategy<blockquote><p>å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•,æŠŠå®ƒä»¬å°è£…èµ·æ¥,ä½¿å¾—å®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢,ä½¿å¾—ç®—æ³•çš„å˜åŒ–å¯ä»¥ç‹¬ç«‹ä¸å®¢æˆ·</p></blockquote></li><li>Template Method<blockquote><p>å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­ç®—æ³•çš„éª¨æ¶,è€Œå°†ä¸€äº›å…·ä½“æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å»å®ç°.Template Methodä½¿å¾—ä¹‹ç±»å¯ä»¥å¤ç”¨çˆ¶ç±»å®šä¹‰çš„ç®—æ³•,å¹¶ä¸”è¿›è¡Œç»†èŠ‚çš„ä¿®æ”¹</p></blockquote></li><li>visitor<blockquote><p>è¡¨ç¤ºä¸€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œ.ä½¿å¾—ä½ å¯ä»¥åœ¨ä¸æ”¹å˜å„å…ƒç´ ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œ</p></blockquote></li></ol><ul><li>æ ¹æ®ç±»å‹åˆ’åˆ†</li></ul><table><thead><tr><th></th><th></th><th>ç›®çš„</th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td>åˆ›å»ºå‹</td><td>ç»“æ„å‹</td><td>è¡Œä¸ºå‹</td></tr><tr><td>èŒƒå›´</td><td>ç±»</td><td>Factory Method</td><td>Adapter(ç±»)</td><td>Interpreter</br>Template Method</td></tr><tr><td></td><td>å¯¹è±¡</td><td>Abstract Factory</br>Builder</br>Prototype</br>Singleton</td><td>Adapter(å¯¹è±¡)</br>Bridge</br>Composite</br>Decorator</br>Facade</br>Flyweight</br>Proxy</br></td><td>Chain of Responsibility</br>Command</br>Iterator</br>Mediator</br>Memento</br>Observer</br>State</br>Strategy</br>Visitor</td></tr></tbody></table><ul><li>è®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»<br><a href="https://imgtu.com/i/cRdD4H"><img src="https://z3.ax1x.com/2021/04/15/cRdD4H.jpg"></a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€&quot;&gt;&lt;a href=&quot;#è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€&quot;&gt;&lt;/a&gt;è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€&lt;/h1&gt;&lt;h2 i</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://agmtopy.gitee.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://agmtopy.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°</title>
    <link href="https://agmtopy.gitee.io/2021/04/02/13.LeetCode/10.%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/"/>
    <id>https://agmtopy.gitee.io/2021/04/02/13.LeetCode/10.%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/</id>
    <published>2021-04-02T15:22:03.000Z</published>
    <updated>2021-04-02T15:24:39.862Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°-LeetCode4"><a href="#å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°-LeetCode4" class="headerlink" title="å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°_LeetCode4"></a>å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°_LeetCode4</h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><blockquote><p>ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•° ã€‚</p></blockquote><p>ç¤ºä¾‹ 1ï¼š<br>è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]<br>è¾“å‡ºï¼š2.00000<br>è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2</p><p>ç¤ºä¾‹ 2ï¼š<br>è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]<br>è¾“å‡ºï¼š2.50000<br>è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5</p><p>ç¤ºä¾‹ 3ï¼š<br>è¾“å…¥ï¼šnums1 = [0,0], nums2 = [0,0]<br>è¾“å‡ºï¼š0.00000</p><p>ç¤ºä¾‹ 4ï¼š<br>è¾“å…¥ï¼šnums1 = [], nums2 = [1]<br>è¾“å‡ºï¼š1.00000</p><p>ç¤ºä¾‹ 5ï¼š<br>è¾“å…¥ï¼šnums1 = [2], nums2 = []<br>è¾“å‡ºï¼š2.00000</p><p>æç¤ºï¼š<br>nums1.length == m<br>nums2.length == n<br>0 &lt;= m &lt;= 1000<br>0 &lt;= n &lt;= 1000<br>1 &lt;= m + n &lt;= 2000<br>-106 &lt;= nums1[i], nums2[i] &lt;= 106</p><h2 id="ç¬¬ä¸€ç§è§£æ³•"><a href="#ç¬¬ä¸€ç§è§£æ³•" class="headerlink" title="ç¬¬ä¸€ç§è§£æ³•"></a>ç¬¬ä¸€ç§è§£æ³•</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°-LeetCode4&quot;&gt;&lt;a href=&quot;#å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°-LeetCode4&quot; class=&quot;headerlink&quot; title=&quot;å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°_LeetCode4&quot;&gt;&lt;/a&gt;å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„ä¸­ä½æ•°_Lee</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://agmtopy.gitee.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="LeetCode" scheme="https://agmtopy.gitee.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>è½¬ç½®çŸ©é˜µ</title>
    <link href="https://agmtopy.gitee.io/2021/04/02/13.LeetCode/9.%E8%BD%AC%E7%BD%AE%E7%9F%A9%E9%98%B5/"/>
    <id>https://agmtopy.gitee.io/2021/04/02/13.LeetCode/9.%E8%BD%AC%E7%BD%AE%E7%9F%A9%E9%98%B5/</id>
    <published>2021-04-01T16:59:29.000Z</published>
    <updated>2021-04-02T15:22:03.555Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è½¬ç½®çŸ©é˜µ-LeetCode867"><a href="#è½¬ç½®çŸ©é˜µ-LeetCode867" class="headerlink" title="è½¬ç½®çŸ©é˜µ_LeetCode867"></a>è½¬ç½®çŸ©é˜µ_LeetCode867</h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ matrixï¼Œ è¿”å› matrix çš„ è½¬ç½®çŸ©é˜µ ã€‚çŸ©é˜µçš„è½¬ç½®æ˜¯æŒ‡å°†çŸ©é˜µçš„ä¸»å¯¹è§’çº¿ç¿»è½¬ï¼Œäº¤æ¢çŸ©é˜µçš„è¡Œç´¢å¼•ä¸åˆ—ç´¢å¼•ã€‚</p></blockquote><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šmatrix = [[1,2,3],[4,5,6],[7,8,9]]<br>è¾“å‡ºï¼š[[1,4,7],[2,5,8],[3,6,9]]<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šmatrix = [[1,2,3],[4,5,6]]<br>è¾“å‡ºï¼š[[1,4],[2,5],[3,6]]</p><h2 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h2><h3 id="ç¬¬ä¸€ç§è§£æ³•"><a href="#ç¬¬ä¸€ç§è§£æ³•" class="headerlink" title="ç¬¬ä¸€ç§è§£æ³•"></a>ç¬¬ä¸€ç§è§£æ³•</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">transpose</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> matrix<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ç§è§£æ³•é”™è¯¯,å› ä¸ºåªè€ƒè™‘äº†è¡Œæ•°å’Œåˆ—æ•°ç›¸ç­‰çš„æƒ…å†µ,æ²¡æœ‰è€ƒè™‘è¡Œæ•°å’Œåˆ—æ•°ä¸ç›¸ç­‰çš„äºŒç»´æ•°ç»„</p><h3 id="ç¬¬äºŒç§è§£æ³•"><a href="#ç¬¬äºŒç§è§£æ³•" class="headerlink" title="ç¬¬äºŒç§è§£æ³•"></a>ç¬¬äºŒç§è§£æ³•</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">transpose</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>matrix<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            temp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> temp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ç§è§£æ³•èƒ½é€šè¿‡,ä½†æ˜¯å†…å­˜æ¶ˆè€—æ¯”è¾ƒå¤§,å› ä¸ºæ˜¯å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„,ç„¶åå¯¹åŸæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éå†ç¡®å®šä½ç½®</p><h3 id="ç¬¬ä¸‰ç§è§£æ³•"><a href="#ç¬¬ä¸‰ç§è§£æ³•" class="headerlink" title="ç¬¬ä¸‰ç§è§£æ³•"></a>ç¬¬ä¸‰ç§è§£æ³•</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">transpose</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> c <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span> r <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> r <span class="token operator">*</span> c<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        temp<span class="token punctuation">[</span>i<span class="token operator">/</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">%</span>r<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token operator">%</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">/</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> temp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ç§è§£æ³•å·§å¦™çš„è¿ç”¨åˆ°äº†å–ä½™å’Œæ¨¡é™¤ä¸¤ç§,ä½†æ˜¯åœ¨ç©ºé—´å¤æ‚åº¦ä¸Šå’Œç¬¬äºŒç§ç±»ä¼¼,ç”±äºæ•°ç»„å…·æœ‰ä¸å¯å˜æ€§,å› æ­¤æƒ³è¦å®ç°ç©ºé—´å¤æ‚åº¦å°çš„ä»£ç å¾ˆéš¾å®ç°.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è½¬ç½®çŸ©é˜µ-LeetCode867&quot;&gt;&lt;a href=&quot;#è½¬ç½®çŸ©é˜µ-LeetCode867&quot; class=&quot;headerlink&quot; title=&quot;è½¬ç½®çŸ©é˜µ_LeetCode867&quot;&gt;&lt;/a&gt;è½¬ç½®çŸ©é˜µ_LeetCode867&lt;/h1&gt;&lt;h2 id=&quot;é¢˜ç›®&quot;&gt;&lt;a hr</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://agmtopy.gitee.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="LeetCode" scheme="https://agmtopy.gitee.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>MySQLæ€»ç»“</title>
    <link href="https://agmtopy.gitee.io/2021/03/30/6.mysql/MySQL%E6%80%BB%E7%BB%93/"/>
    <id>https://agmtopy.gitee.io/2021/03/30/6.mysql/MySQL%E6%80%BB%E7%BB%93/</id>
    <published>2021-03-30T14:27:04.000Z</published>
    <updated>2021-04-01T16:44:01.926Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é€šè¿‡ä»¥ä¸Šå‡ ç¯‡æ–‡ç« åˆ†åˆ«ä»‹ç»äº†MySQLçš„æ–‡ä»¶ç³»ç»Ÿ/ç´¢å¼•/é”/äº‹åŠ¡ç­‰åŠŸèƒ½ç‚¹,è¿™ç¯‡æ–‡ç« å°†å¯¹è¿™äº›çŸ¥è¯†ç‚¹è¿›è¡Œæ±‡æ€»,æè¿°å‡ºMySQLå¤§æ¦‚çš„æ¶æ„</p></blockquote><h2 id="æ–‡ä»¶æ•°æ®"><a href="#æ–‡ä»¶æ•°æ®" class="headerlink" title="æ–‡ä»¶æ•°æ®"></a>æ–‡ä»¶æ•°æ®</h2><p> MySQLåœ¨æ–‡ä»¶æ•°æ®ä¸Šå¯ä»¥åˆ’åˆ†ä¸º<strong>MySQLç³»ç»Ÿæ•°æ®</strong>/<strong>å­˜å‚¨å¼•æ“æ•°æ®</strong></p><ul><li>æ–‡ä»¶æ•°æ®<ul><li>ç³»ç»Ÿæ–‡ä»¶</li><li>å‚æ•°æ–‡ä»¶<br>å‚æ•°æ–‡ä»¶æŒ‡çš„æ˜¯ç³»ç»Ÿè¿è¡Œæ—¶çš„å‚æ•°,ä¸»è¦åˆ†ä¸ºâ€™é™æ€å‚æ•°â€™å’Œâ€™åŠ¨æ€å‚æ•°â€™</li><li>æ—¥å¿—æ–‡ä»¶</li><li>ç³»ç»Ÿé”™è¯¯æ—¥å¿—æ–‡ä»¶</li><li>äºŒè¿›åˆ¶(binlog)<br>binlogç›®å‰æœ‰ä¸‰ç§è®°å½•æ ¼å¼åˆ†åˆ«æ˜¯STATEMENT/ROW/MIXED;RCå’ŒSTATEMENTæ ¼å¼ä¸å…¼å®¹,å› ä¸ºbinlogçš„æ˜¯åœ¨äº‹åŠ¡è¿›è¡Œæäº¤æ—¶å†™å…¥</li><li>æ…¢æŸ¥è¯¢æ—¥å¿—</li><li>æŸ¥è¯¢æ—¥å¿—</li><li>å¥—æ¥å­—æ–‡ä»¶<br>å¥—æ¥å­—æ–‡ä»¶æ˜¯UNIXä¸‹ä½¿ç”¨å¥—æ¥å­—é“¾æ¥æ–¹å¼æ‰“å¼€çš„socketæ–‡ä»¶</li><li>pidæ–‡ä»¶</li><li>è¡¨ç»“æ„æ–‡ä»¶<br>å®šä¹‰è¡¨ç»“æ„çš„æ–‡ä»¶,æ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªfrmçš„è¡¨ç»“æ„æ–‡ä»¶</li></ul></li><li>InnoDBå­˜å‚¨å¼•æ“æ–‡ä»¶<ul><li>è¡¨ç©ºé—´æ–‡ä»¶<br>å®é™…å­˜å‚¨æ•°æ®çš„æ–‡ä»¶,åç§°ä¸ºibdata1çš„æ–‡ä»¶ä½œä¸ºå…±äº«è¡¨ç©ºé—´æ–‡ä»¶,MySQLä¹Ÿæ”¯æŒä¸ºæ¯ä¸ªè¡¨å•ç‹¬è®¾ç½®è¡¨ç©ºé—´æ–‡ä»¶,åç¼€åä¸º.ibd</li><li>redolog<br>redoLogåˆç§°ä¸ºé‡åšæ—¥å¿—,æ–‡ä»¶åç§°ä¸ºib_logfile0/ib_logfile1</li></ul></li></ul><p><a href="https://imgtu.com/i/cESwqK"><img src="https://z3.ax1x.com/2021/04/01/cESwqK.png" alt="cESwqK.png"></a></p><h2 id="ç´¢å¼•ç³»ç»Ÿ"><a href="#ç´¢å¼•ç³»ç»Ÿ" class="headerlink" title="ç´¢å¼•ç³»ç»Ÿ"></a>ç´¢å¼•ç³»ç»Ÿ</h2><p>MySQLçš„ç´¢å¼•ç³»ç»Ÿä¸»è¦æ˜¯ç”±äºB+ Treeç´¢å¼•ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„,ä¹Ÿæœ‰é‡‡ç”¨Hashè‡ªé€‚åº”ç´¢å¼•åœºæ™¯.</p><ul><li>ç´¢å¼•<ul><li>åˆ†ç±»<ul><li>B+Treeç´¢å¼•<br>B+ TREEç´¢å¼•ä½œä¸ºMySQLåº•å±‚æ•°æ®ç»“æ„çš„å¥½å¤„æ˜¯åœ¨äºB+TREEå¹³è¡¡ä¸”å±‚çº§ä¸é«˜å¹¶ä¸”å¶å­èŠ‚ç‚¹å¯ä»¥ä½œä¸ºèšé›†ç´¢å¼•</li><li>å…¨æ–‡ç´¢å¼•<br>MySQLçš„å…¨æ–‡ç´¢å¼•ä¹Ÿæ˜¯é‡‡ç”¨å€’æ’ç®—æ³•,é€šè¿‡å…³é”®å­—æ¥è¿›è¡Œæ–‡æ¡£æ˜ å°„,ç°å®å·¥ä½œä¸­æœªæ¶‰åŠåˆ°,å› æ­¤æœªè¯¦ç»†ç ”ç©¶</li><li>Hashç´¢å¼•<br>InnoDBåªæ”¯æŒè‡ªé€‚åº”çš„Hashç´¢å¼•,ä¸èƒ½æ˜¾ç¤ºçš„å»åˆ›å»ºå¹¶ä¸”è¦æ»¡è¶³Hashç´¢å¼•è‡ªåŠ¨åˆ›å»ºçš„æ¡ä»¶(ç­‰å€¼æŸ¥è¯¢/å‘½ä¸­èŒƒå›´/æŸ¥è¯¢é¢‘ç‡)</li></ul></li></ul></li></ul><h2 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h2><ul><li>é”<ul><li><p>é”åˆ†ç±»</p><ul><li>è¡Œçº§é”<ul><li>å…±äº«é”(Sé”)<br>å…±äº«é”å…è®¸äº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€è¡Œæ•°æ®</li><li>æ’ä»–é”(Xé”)<br>æ’ä»–é”æ˜¯ç‹¬å é”,ä¸å…è®¸å…¶ä»–äº‹åŠ¡è¯»å–æˆ–æ“ä½œæ•°æ®</li></ul></li><li>è¡¨é”<ul><li>æ„å‘å…±äº«é”(ISé”)<br>æ„å‘å…±äº«é”æ˜¯è¡¨ç»´åº¦çš„é”,æ„å‘å…±äº«é”æ˜¯åœ¨äº‹åŠ¡è¯»å–è¡¨ä¸­æŸè¡Œæ•°æ®æ—¶å€™è‡ªåŠ¨åŠ ä¸Šçš„,åŒç†æ„å‘æ’ä»–é”ä¹Ÿæ˜¯è¿™ä¸ªé€»è¾‘;è®¾è®¡æ„å‘é”çš„ä¸»è¦ç›®çš„æ˜¯åœ¨äºå½“äº‹åŠ¡æƒ³è¦è·å–åˆ°è¡¨é”æ—¶,å¯ä»¥ç›´æ¥é€šè¿‡æ˜¯å¦èƒ½è·å–åˆ°æ„å‘é”æ¥åˆ¤æ–­,ç›¸å½“äºä¸€ä¸ªè¡¨çº§åˆ«çš„é”æ ‡å¿—</li><li>æ„å‘æ’ä»–é”(IXé”)</li></ul></li><li>é”ç®—æ³•<ul><li>è¡Œé”<br>è¡Œé”çš„ä½œç”¨èŒƒå›´æ˜¯å¯¹æ•°æ®çš„æŸä¸€è¡Œè¿›è¡Œæ“ä½œ</li><li>é—´éš™é”<br>é—´éš™é”æ˜¯å¯¹æ•°æ®é—´éš™è¿›è¡Œä¸Šé”,è¿™æ ·å¯ä»¥é˜²æ­¢æ•°æ®å‡ºç°å¹»è¯»çš„æƒ…å†µ</li><li>Next-Key Lock<br>è¡Œé”+é—´éš™é”å°±æ˜¯Next-Key Lock</li><li>é”é™çº§<br>å½“å‘ç°å¯ä»¥ç”¨è¡Œæ•°æ—¶,Next-Keyä¼šé™çº§æˆè¡Œé”</li></ul></li></ul><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2></li></ul></li><li>äº‹åŠ¡<ul><li>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«<ul><li>ä¸²è¡ŒåŒ–(Serializable)</li><li>è¯»æœªæäº¤(Read Uncommitted)</li><li>è¯»å·²æäº¤(Read Committed)</li><li>å¯é‡å¤è¯»(Repeatable Read)</li></ul></li><li>ä¸²è¡ŒåŒ–<br>ä¸²è¡ŒåŒ–æŒ‡çš„æ˜¯äº‹åŠ¡æŒ‰ç…§ä¸²è¡ŒåŒ–æ‰§è¡Œçš„ç»“æœæ‰§è¡Œ,InnoDBçš„ä¸²è¡ŒåŒ–æ˜¯é€šè¿‡å¢åŠ è¯»é”çš„æ–¹å¼æ¥å®ç°çš„</li><li>è¯»æœªæäº¤<br>è¯»æœªæäº¤æŒ‡çš„æ˜¯å½“å‰äº‹åŠ¡å¯ä»¥è¯»å–åˆ°å…¶ä»–äº‹åŠ¡å°šæœªæäº¤çš„æ•°æ®,åº•å±‚å®ç°æ˜¯å½“å‰äº‹åŠ¡ç›´æ¥è¿”å›è®°å½•ä¸Šçš„æœ€æ–°å€¼</li><li>è¯»å·²æäº¤<br>è¯»å·²æäº¤æŒ‡çš„æ˜¯äº‹åŠ¡ä¸­çš„SQLåœ¨æ‰§è¡Œæ—¶ä¼šå»è¯»å–æœ€åä¸€æ¬¡æäº¤çš„æ•°æ®ä¿¡æ¯</li><li>å¯é‡å¤è¯»<br>å¯é‡å¤è¯»æŒ‡çš„æ˜¯äº‹åŠ¡å¼€å§‹æ—¶ä¼šåˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€ä¸”è‡ªå¢çš„äº‹åŠ¡ID,å¹¶ä¸”å¯é‡å¤è¯»åªèƒ½è¯»å–åˆ°å°äºç­‰äºè¯¥äº‹åŠ¡idçš„æ•°æ®;å¿«ç…§æ•°æ®æ˜¯é€šè¿‡UNDO LOGå®ç°çš„</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡ä»¥ä¸Šå‡ ç¯‡æ–‡ç« åˆ†åˆ«ä»‹ç»äº†MySQLçš„æ–‡ä»¶ç³»ç»Ÿ/ç´¢å¼•/é”/äº‹åŠ¡ç­‰åŠŸèƒ½ç‚¹,è¿™ç¯‡æ–‡ç« å°†å¯¹è¿™äº›çŸ¥è¯†ç‚¹è¿›è¡Œæ±‡æ€»,æè¿°å‡ºMySQLå¤§æ¦‚çš„æ¶æ„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;æ–‡ä»¶æ•°æ®&quot;&gt;&lt;a href=&quot;#æ–‡ä»¶æ•°æ®&quot; class=&quot;hea</summary>
      
    
    
    
    <category term="æ•°æ®åº“" scheme="https://agmtopy.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://agmtopy.gitee.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQLäº‹åŠ¡</title>
    <link href="https://agmtopy.gitee.io/2021/03/27/6.mysql/MySQL%E4%BA%8B%E5%8A%A1/"/>
    <id>https://agmtopy.gitee.io/2021/03/27/6.mysql/MySQL%E4%BA%8B%E5%8A%A1/</id>
    <published>2021-03-27T07:09:33.000Z</published>
    <updated>2021-03-30T14:24:27.300Z</updated>
    
    <content type="html"><![CDATA[<h2 id="äº‹åŠ¡çš„å®šä¹‰"><a href="#äº‹åŠ¡çš„å®šä¹‰" class="headerlink" title="äº‹åŠ¡çš„å®šä¹‰"></a>äº‹åŠ¡çš„å®šä¹‰</h2><p>äº‹åŠ¡æ˜¯æ•°æ®åº“ä¸æ–‡ä»¶ç³»ç»Ÿæœ€é‡è¦çš„å·®å¼‚ä¹‹ä¸€,æ•°æ®åº“é€šè¿‡äº‹åŠ¡ä¿è¯äº†æ•°æ®çš„ACIDç‰¹æ€§,åˆ†åˆ«æ˜¯åŸå­æ€§/ä¸€è‡´æ€§/éš”ç¦»æ€§/æŒä¹…æ€§</p><h2 id="äº‹åŠ¡çš„åˆ†ç±»"><a href="#äº‹åŠ¡çš„åˆ†ç±»" class="headerlink" title="äº‹åŠ¡çš„åˆ†ç±»"></a>äº‹åŠ¡çš„åˆ†ç±»</h2><p>äº‹åŠ¡å¯ä»¥åˆ’åˆ†ä¸º:<br>1.æ‰å¹³äº‹åŠ¡ä»¥åŠå¸¦æœ‰ä¿å­˜ç‚¹çš„æ‰å¹³äº‹åŠ¡<br>2.é“¾äº‹åŠ¡<br>3.åµŒå¥—äº‹åŠ¡<br>4.åˆ†å¸ƒå¼äº‹åŠ¡</p><h2 id="äº‹åŠ¡çš„å®ç°"><a href="#äº‹åŠ¡çš„å®ç°" class="headerlink" title="äº‹åŠ¡çš„å®ç°"></a>äº‹åŠ¡çš„å®ç°</h2><p>InnoDBé€šè¿‡æ—¥å¿—ç³»ç»Ÿæ¥å®ç°äº‹åŠ¡,redo logå¯ä»¥ä¿è¯äº‹åŠ¡çš„åŸå­æ€§/ä¸€è‡´æ€§/æŒä¹…æ€§,undo logå¯ä»¥ä¿è¯äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§</p><h3 id="redo-logçš„ä½œç”¨"><a href="#redo-logçš„ä½œç”¨" class="headerlink" title="redo logçš„ä½œç”¨"></a>redo logçš„ä½œç”¨</h3><p>redo logæ˜¯é‡åšæ—¥å¿—,é€šè¿‡æ¯æ¬¡äº‹åŠ¡æäº¤å‰å…ˆä¿®æ”¹è¯¥äº‹åŠ¡è¦ä¿®æ”¹çš„é¡µ,åœ¨æäº¤è¿‡ç¨‹ä¸­å¦‚æœä¸­æ–­,é€šè¿‡redo logå°±å¯ä»¥ç»§ç»­æäº¤äº‹åŠ¡</p><h3 id="undo-logçš„ä½œç”¨"><a href="#undo-logçš„ä½œç”¨" class="headerlink" title="undo logçš„ä½œç”¨"></a>undo logçš„ä½œç”¨</h3><p>undo logæ˜¯å›æ»šæ—¥å¿—,é€šè¿‡è®°å½•æ¯ä¸ªäº‹åŠ¡å¼€å§‹æ—¶çš„æ•°æ®,åœ¨å›æ»šå‘ç”Ÿä¸­æ–­æ—¶,å¯ä»¥æ ¹æ®undo log ç»§ç»­è¿›è¡Œäº‹åŠ¡å›æ»š</p><h2 id="redo-log"><a href="#redo-log" class="headerlink" title="redo log"></a>redo log</h2><p>redo logç”±ä¸¤éƒ¨åˆ†ç»„æˆâ€™redo log bufferâ€™å’Œâ€™redo log fileâ€™,åœ¨è¿›è¡Œäº‹åŠ¡connitä¹‹å‰éƒ½ä¼šå°†äº‹åŠ¡çš„æ‰€æœ‰æ—¥å¿—å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­è¿›è¡ŒæŒä¹…åŒ–<br>InnoDBæä¾›ä¸€ä¸ªå‚æ•°â€™innodb_flush_log_at_trx_commitâ€™æ¥æ§åˆ¶redo logçš„åˆ·ç›˜ç­–ç•¥,0:ç”±master threadè¿›è¡Œæ§åˆ¶ 1:æ¯æ¬¡æäº¤åè¿›è¡ŒåŒæ­¥åˆ·ç›˜ 2:æ¯æ¬¡æäº¤ååªæ˜¯å°†æ•°æ®æäº¤ç»™æ–‡ä»¶ç³»ç»Ÿ,ä¸è¿›è¡Œä¸»åŠ¨åˆ·ç›˜æ“ä½œ</p><h2 id="undo-log"><a href="#undo-log" class="headerlink" title="undo log"></a>undo log</h2><p>undo logæ˜¯å›æ»šæ—¥å¿—,æ˜¯é€»è¾‘æ—¥å¿—å¹¶ä¸æ˜¯redo logçš„ç‰©ç†æ—¥å¿—,åªæ˜¯åœ¨é€»è¾‘ä¸Šä¿è¯äº†æ•°æ®å›æ»šåˆ°åŸå§‹çŠ¶æ€.ä¾‹å¦‚ç”¨æˆ·æ‰§è¡Œä¸€ä¸ªinsertæ“ä½œ,åœ¨undo logé‡Œé¢å°±éœ€è¦ä¸€ä¸ªdeleteæ“ä½œ</p><h2 id="MVVC"><a href="#MVVC" class="headerlink" title="MVVC"></a>MVVC</h2><p>å¤šç‰ˆæœ¬æ§åˆ¶,InnoDBä¼šåœ¨è¡Œè®°å½•ä¸Šé»˜è®¤å¢åŠ ä¸¤ä¸ªéšè—åˆ—æ¥ä½œä¸ºMVVCå®ç°çš„åŸºç¡€,åˆ†åˆ«æ˜¯DB_TRX_ID-æœ€æ–°ä¸€æ¬¡äº‹åŠ¡æäº¤ç‰ˆæœ¬å·/DB_ROLL_PTR-åˆ é™¤äº‹åŠ¡çš„ç‰ˆæœ¬å·<br>æ•°æ®è¡Œå’Œundo logç»„æˆäº†ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„æ•°æ®é“¾,é€šè¿‡å¯¹æ¯”ç‰ˆæœ¬å·å’Œundo logæ—¥å¿—å°†æ‰€éœ€è¦çš„æ•°æ®è¿˜åŸå‡ºæ¥</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;äº‹åŠ¡çš„å®šä¹‰&quot;&gt;&lt;a href=&quot;#äº‹åŠ¡çš„å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;äº‹åŠ¡çš„å®šä¹‰&quot;&gt;&lt;/a&gt;äº‹åŠ¡çš„å®šä¹‰&lt;/h2&gt;&lt;p&gt;äº‹åŠ¡æ˜¯æ•°æ®åº“ä¸æ–‡ä»¶ç³»ç»Ÿæœ€é‡è¦çš„å·®å¼‚ä¹‹ä¸€,æ•°æ®åº“é€šè¿‡äº‹åŠ¡ä¿è¯äº†æ•°æ®çš„ACIDç‰¹æ€§,åˆ†åˆ«æ˜¯åŸå­æ€§/ä¸€è‡´æ€§/éš”ç¦»æ€§/æŒä¹…æ€§</summary>
      
    
    
    
    <category term="æ•°æ®åº“" scheme="https://agmtopy.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://agmtopy.gitee.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQLç´¢å¼•ä¸é”</title>
    <link href="https://agmtopy.gitee.io/2021/03/21/6.mysql/MySQL%E7%B4%A2%E5%BC%95%E4%B8%8E%E9%94%81/"/>
    <id>https://agmtopy.gitee.io/2021/03/21/6.mysql/MySQL%E7%B4%A2%E5%BC%95%E4%B8%8E%E9%94%81/</id>
    <published>2021-03-21T06:12:10.000Z</published>
    <updated>2021-03-30T14:24:08.129Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><p>InnoDBå­˜å‚¨å¼•æ“æ”¯æŒä»¥ä¸‹å‡ ç§ç´¢å¼•ç»“æ„:</p><ol><li>B+æ ‘ç´¢å¼•</li><li>å…¨æ–‡ç´¢å¼•</li><li>å“ˆå¸Œç´¢å¼•</li></ol><h3 id="B-æ ‘ç´¢å¼•"><a href="#B-æ ‘ç´¢å¼•" class="headerlink" title="B+æ ‘ç´¢å¼•"></a>B+æ ‘ç´¢å¼•</h3><p>ç»“æ„ä¸ºâ€™B+æ ‘â€™çš„ç´¢å¼•æœ‰èšé›†ç´¢å¼•/è¾…åŠ©ç´¢å¼•<br>èšé›†ç´¢å¼•æ˜¯ä»¥ä¸»é”®æ¥æ„é€ B+æ ‘,åœ¨å¶å­èŠ‚ç‚¹ä¸­å­˜æ”¾è¡Œè®°å½•,ä¹Ÿå°±æ˜¯å¶å­èŠ‚ç‚¹ç§°ä¸ºæ•°æ®é¡µ.<br>è¾…åŠ©ç´¢å¼•æ˜¯ä»¥ç´¢å¼•keyæ¥æ„é€ B+æ ‘,å¶å­èŠ‚ç‚¹è®°å½•çš„æ˜¯ä¸»é”®,å› æ­¤åœ¨è¿›è¡ŒæŸ¥æ‰¾æ˜¯ä¼šè¿›è¡Œä¸€æ¬¡è¯»å–èšé›†ç´¢å¼•çš„æ“ä½œ</p><h3 id="å…¨æ–‡ç´¢å¼•"><a href="#å…¨æ–‡ç´¢å¼•" class="headerlink" title="å…¨æ–‡ç´¢å¼•"></a>å…¨æ–‡ç´¢å¼•</h3><p>å…¨æ–‡ç´¢å¼•æŒ‡çš„æ˜¯å°†å­˜å‚¨ä¸æ•°æ®åº“ä¸­çš„å…¨éƒ¨æ•°æ®ä¸­çš„ä»»æ„å†…å®¹ä¿¡æ¯æŸ¥è¯¢å‡ºæ¥çš„æŠ€æœ¯.<br>å…¨æ–‡ç´¢å¼•ä¸»è¦æ˜¯ç”¨å€’æ’ç´¢å¼•çš„æŠ€æœ¯æ¥è¿›è¡Œå®ç°,å€’æ’ç´¢å¼•éœ€è¦ç”¨åˆ°ä¸€ä¸ªç´¢å¼•è¾…åŠ©è¡¨,å¯¹å…¨æ–‡ä¸­çš„å€¼è¿›è¡Œåˆ†è¯å’Œç´¢å¼•å®šä½</p><h3 id="å“ˆå¸Œç´¢å¼•"><a href="#å“ˆå¸Œç´¢å¼•" class="headerlink" title="å“ˆå¸Œç´¢å¼•"></a>å“ˆå¸Œç´¢å¼•</h3><p>å“ˆå¸Œç´¢å¼•æŒ‡çš„æ˜¯ç”¨å“ˆå¸Œç®—æ³•æ¥å­˜å‚¨ç´¢å¼•çš„ç»“æ„,InnoDBçš„å“ˆå¸Œç´¢å¼•ä¸èƒ½ç”±ç”¨æˆ·è‡ªå®šä¹‰,è€Œæ˜¯ç”±å®¢æˆ·è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢å’Œå‘½ä¸­æŸç§æ¡ä»¶åä¼šå°†B+æ ‘ç´¢å¼•è¿›è¡Œå‡çº§è½¬æ¢æˆå“ˆå¸Œç´¢å¼•,è¿™ç§ç®—æ³•æœ‰ç‚¹ç±»ä¼¼JVMä¸­å¯¹çƒ­ç‚¹ä»£ç çš„JITæŠ€æœ¯,æå‰å°†çƒ­ç‚¹æ•°æ®æ‹¿å‡ºæ¥</p><h2 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h2><blockquote><p>é”æ˜¯æ•°æ®åº“ç³»ç»ŸåŒºåˆ«äºæ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªå…³é”®ç‰¹æ€§.é”æœºåˆ¶ç”¨äºç®¡ç†å¯¹å…±äº«èµ„æºçš„å¹¶å‘è®¿é—®.InnoDBå­˜å‚¨å¼•æ“ä¼šåœ¨è¡Œçº§åˆ«ä¸Šå¯¹è¡¨æ•°æ®ä¸Šé”.</p></blockquote><h3 id="é”ç±»å‹"><a href="#é”ç±»å‹" class="headerlink" title="é”ç±»å‹"></a>é”ç±»å‹</h3><p>InnoDBå­˜å‚¨å¼•æ“å®ç°äº†ä¸¤ç§æ ‡å‡†çš„è¡Œçº§é”</p><ul><li>å…±äº«é”(S Lock),å…è®¸äº‹åŠ¡è¯»ä¸€è¡Œæ•°æ®</li><li>æ’ä»–é”(X Lock),å…è®¸äº‹åŠ¡åˆ é™¤æˆ–æ›´æ–°ä¸€è¡Œæ•°æ®</li></ul><p>InnoDBå­˜å‚¨å¼•æ“æ”¯æŒå¤šç²’åº¦é”å®š,è¿™ç§é”å®šå…è®¸äº‹åŠ¡åœ¨è¡Œçº§ä¸Šçš„é”å’Œè¡¨çº§ä¸Šçš„é”åŒæ—¶å­˜åœ¨.<br>ä¸ºäº†æ”¯æŒåœ¨ä¸åŒç²’åº¦ä¸Šè¿›è¡ŒåŠ é”æ“ä½œ,InnoDBå­˜å‚¨å¼•æ“æ”¯æŒæ„å‘é”,æ„å‘é”å¯ä»¥åˆ†ä¸ºâ€™æ„å‘å…±äº«é”â€™/â€˜æ„å‘æ’ä»–é”â€™<br>æ„å‘å…±äº«é”:äº‹åŠ¡æƒ³è¦è·å¾—ä¸€å¼ è¡¨ä¸­çš„æŸå‡ è¡Œçš„å…±äº«é”<br>æ„å‘æ’ä»–é”:äº‹åŠ¡æƒ³è¦è·å¾—ä¸€å¼ è¡¨ä¸­çš„æŸå‡ è¡Œçš„æ’ä»–é”</p><h3 id="ä¸€è‡´æ€§éé”å®šè¯»"><a href="#ä¸€è‡´æ€§éé”å®šè¯»" class="headerlink" title="ä¸€è‡´æ€§éé”å®šè¯»"></a>ä¸€è‡´æ€§éé”å®šè¯»</h3><p>â€˜ä¸€è‡´æ€§éé”å®šè¯»â€™æŒ‡çš„æ˜¯InnoDBé€šè¿‡è¡Œçš„å¤šç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ,åœ¨è¯»å–æ—¶ä¸å¿…ç­‰å¾…Xé”çš„é‡Šæ”¾.<br>RCéš”ç¦»çº§åˆ«ä¸‹,ä¸€è‡´æ€§éé”å®šè¯»ä¸€å®šæ˜¯è¯»å–æœ€æ–°çš„ä¸€ä»½å¿«ç…§æ•°æ®<br>RRéš”ç¦»çº§åˆ«ä¸‹,ä¸€è‡´æ€§éé”å®šè¯»ä¸€å®šæ˜¯è¯»å–äº‹åŠ¡å¼€å§‹æ—¶çš„ä¸€ä»½å¿«ç…§æ•°æ®</p><h3 id="ä¸€è‡´æ€§é”å®šè¯»"><a href="#ä¸€è‡´æ€§é”å®šè¯»" class="headerlink" title="ä¸€è‡´æ€§é”å®šè¯»"></a>ä¸€è‡´æ€§é”å®šè¯»</h3><p>InnoDBé€šè¿‡ä¸¤ç§æ“ä½œæ˜¾å¼çš„æ”¯æŒä¸€è‡´æ€§é”å®šè¯»,ç¬¬ä¸€ç§æ˜¯</p><ul><li>SELECT * FOR UPDATE åŠ Xé”</li><li>SELECT * LOCK IN SHARE MODE åŠ Sé”</li></ul><h3 id="è‡ªå¢è®¡æ•°"><a href="#è‡ªå¢è®¡æ•°" class="headerlink" title="è‡ªå¢è®¡æ•°"></a>è‡ªå¢è®¡æ•°</h3><p>InnoDBçš„è‡ªå¢è®¡æ•°æ˜¯é€šè¿‡è¡¨ä¸Šçš„ä¸€ä¸ªè‡ªå¢é•¿è®¡æ•°å™¨æ¥è¿›è¡Œçš„,å½“æ’å…¥SQLæ‰§è¡Œå®Œæ¯•åè¯¥è‡ªå¢è®¡æ•°å™¨å°±å®Œæˆè‡ªå¢æ“ä½œå¹¶æäº¤</p><h3 id="é”ç®—æ³•"><a href="#é”ç®—æ³•" class="headerlink" title="é”ç®—æ³•"></a>é”ç®—æ³•</h3><ol><li>Record Lock:è¡Œé”</li><li>Gap Lock:é—´éš™é”</li><li>Next-Key Lock:è¡Œé”+é—´éš™é”</li></ol><ul><li>Next-Key Lockæ˜¯é»˜è®¤InnoDBé»˜è®¤é‡‡ç”¨çš„é”å®šç®—æ³•,ä½†æ˜¯å½“æŸ¥è¯¢æ—¶ä½¿ç”¨åˆ°äº†èšé›†ç´¢å¼•æ—¶ä¼šé™çº§æˆâ€™Record Lockâ€™é”.<br>è¿™é‡Œæœ‰ä¸€ä¸ªå°ç–‘é—®,InnoDBå¯¹äºInsertçš„æ“ä½œä¼šæ£€æŸ¥æ’å…¥è®°å½•çš„ä¸‹ä¸€æ¡è®°å½•æ˜¯å¦è¢«é”å®š,å¦‚æœé”å®šåˆ™ä¸å…è®¸æ“ä½œ </li></ul><p>Next-Key Locåªåœ¨RRéš”ç¦»æ¨¡å¼ä¸‹ä½¿ç”¨,ä¸»è¦æ˜¯ä¸ºäº†è§£å†³RRæ¨¡å¼ä¸‹çš„å¹»è¯»é—®é¢˜(è¿™æ˜¯åˆæœ‰ä¸€ä¸ªç–‘é—®äº†æ—¢ç„¶RRæ¨¡å¼è¯»å–çš„æ˜¯æ•°æ®çš„å¿«ç…§,æŒ‰ç†è¯´è¿™ä¸ªæ—¶å€™åº”è¯¥æ²¡æœ‰æ–°æ’å…¥æ•°æ®çš„å¿«ç…§,ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡å–ƒ)</p><ul><li><p>é˜»å¡<br>é˜»å¡æŒ‡çš„æ˜¯ä¸åŒé”ä¹‹é—´çš„å…¼å®¹å…³ç³»,åœ¨æŸäº›æ—¶åˆ»éœ€è¦ç­‰å¾…å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¸­çš„é”é‡Šæ”¾.åœ¨é»˜è®¤æƒ…å†µä¸‹InnoDBçš„å­˜å‚¨å¼•æ“åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½ä¸ä¼šå¯¹å¼‚å¸¸è¿›è¡Œå›æ»š.</p></li><li><p>æ­»é”<br>æ­»é”æŒ‡çš„æ˜¯ä¸¤ä¸ªä»¥ä¸Šçš„äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç›¸äº’ç­‰å¾….è§£å†³æ­»é”æœ€ç®€å•çš„æ–¹æ³•æ˜¯è¶…æ—¶æœºåˆ¶.MySQLæ£€æµ‹è¶…æ—¶æœºåˆ¶æ˜¯é€šè¿‡â€™ç­‰å¾…å›¾â€™çš„æœºåˆ¶æ¥è¿›è¡Œæ­»é”æ£€æµ‹.</p></li><li><p>ç­‰å¾…å›¾æ£€æµ‹æœºåˆ¶<br>é€šè¿‡ä¿å­˜é”ä¿¡æ¯å’Œäº‹åŠ¡ç­‰å¾…é“¾è¡¨å½¢æˆä¸€å¼ å›¾ç»“æ„,æ£€æµ‹å›¾ä¸­æ˜¯å¦å­˜åœ¨å›è·¯,å¦‚æœå­˜åœ¨å›è·¯è¯æ˜å‘ç”Ÿäº†æ­»é”.</p></li><li><p>æ­»é”å›æ»š<br>å¯¹äºæ­»é”å¼‚å¸¸,InnoDBä¼šé€‰æ‹©å›æ»šUNDOé‡æœ€å°çš„äº‹åŠ¡è¿›è¡Œå›æ»š</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç´¢å¼•&quot;&gt;&lt;a href=&quot;#ç´¢å¼•&quot; class=&quot;headerlink&quot; title=&quot;ç´¢å¼•&quot;&gt;&lt;/a&gt;ç´¢å¼•&lt;/h2&gt;&lt;p&gt;InnoDBå­˜å‚¨å¼•æ“æ”¯æŒä»¥ä¸‹å‡ ç§ç´¢å¼•ç»“æ„:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;B+æ ‘ç´¢å¼•&lt;/li&gt;
&lt;li&gt;å…¨æ–‡ç´¢å¼•&lt;/li&gt;
&lt;li&gt;å“ˆå¸Œç´¢å¼•&lt;/</summary>
      
    
    
    
    <category term="æ•°æ®åº“" scheme="https://agmtopy.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://agmtopy.gitee.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQLæŠ€æœ¯ç–‘é—®</title>
    <link href="https://agmtopy.gitee.io/2021/03/20/6.mysql/MySQL%E6%8A%80%E6%9C%AF%E7%96%91%E9%97%AE/"/>
    <id>https://agmtopy.gitee.io/2021/03/20/6.mysql/MySQL%E6%8A%80%E6%9C%AF%E7%96%91%E9%97%AE/</id>
    <published>2021-03-20T10:12:31.000Z</published>
    <updated>2021-03-30T14:24:39.582Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•&lt;&lt;MySQLæŠ€æœ¯å†…å¹•-InnoDBå­˜å‚¨å¼•æ“&gt;&gt;é˜…è¯»ä¸­å­˜åœ¨çš„ç–‘é—®ç‚¹</p></blockquote><ul><li>P77 æ—¥å¿—æ–‡ä»¶<blockquote><p>å¦‚æœä½¿ç”¨RCéš”ç¦»çº§åˆ«ä¼šå‡ºç°ç±»ä¼¼æ•°æ®ä¸¢å¤±æ›´æ–°çš„ç°è±¡,ä»è€Œå‡ºç°ä¸»ä»æ•°æ®åº“ä¸Šçš„æ•°æ®ä¸ä¸€è‡´</p></blockquote></li></ul><p>bin_logçš„è®°å½•æ ¼å¼ä¸ºâ€™STATENEBTâ€™æ˜¯,ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µä¸ºä»€ä¹ˆå–ƒ?</p><p>åŸå› :</p><blockquote><ol><li>bin_logçš„è®°å½•é¡ºåºæ˜¯commitçš„é¡ºåº,è€Œä¸æ˜¯æ‰§è¡Œé¡ºåº</li><li>RCä¸­SQLçš„æ‰§è¡Œæ˜¯ç«‹å³æ‰§è¡Œçš„<br>è¿™æ ·å¦‚æœbin_logè®°å½•æ ¼å¼å¦‚æœæ˜¯sql,å°±ä¼šå‡ºç°ä¸¢å¤±æ•°æ®çš„åœºæ™¯</li></ol></blockquote><hr><ul><li><p>P268 é”</p><blockquote><p>InnoDBå¯¹äºInsertçš„æ“ä½œä¼šæ£€æŸ¥æ’å…¥è®°å½•çš„ä¸‹ä¸€æ¡è®°å½•æ˜¯å¦è¢«é”å®š,å¦‚æœé”å®šåˆ™ä¸å…è®¸æ“ä½œ</p></blockquote></li><li><p>P269 è§£å†³å¹»è¯»</p><blockquote><p>åœ¨RRæ¨¡å¼ä¸‹é€šè¿‡Next-Key Lockingæœºåˆ¶æ¥è§£å†³å¹»è¯»,æ—¢ç„¶MVVCæ˜¯è¯»å–å¿«ç…§,ä¸ºä»€ä¹ˆè¿˜éœ€è¦Next-Key Lockingæœºåˆ¶æ¥è§£å†³å¹»è¯»é—®é¢˜</p></blockquote></li></ul><p>InnoDBå®é™…ä¸Šæ˜¯æŠŠè¯»å–æ‹†åˆ†æˆä¸¤ç§ç±»å‹</p><ul><li>å¿«ç…§è¯»<br>é€šè¿‡è¯»å–undo log,å¹¶ä¸”å¯¹æ¯”ç‰ˆæœ¬å·å¾—åˆ°äº‹åŠ¡å¼€å§‹æ—¶çš„æ•°æ®,è¿™ç§ä¸»è¦æ˜¯select æ“ä½œ,å¯¹æ•°æ®åŠ sé”</li><li>å½“å‰è¯»<br>å½“å‰è¯»æŒ‡çš„æ˜¯é€šè¿‡Next-Key Locking æœºåˆ¶å°†å¯¹æ•°æ®çš„è¯»å–æ“ä½œåºåˆ—åŒ–,è§£å†³å¹»è¯»é—®é¢˜</li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.zhihu.com/question/334408495">çŸ¥ä¹MVCCçš„è§£ç­”</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è®°å½•&amp;lt;&amp;lt;MySQLæŠ€æœ¯å†…å¹•-InnoDBå­˜å‚¨å¼•æ“&amp;gt;&amp;gt;é˜…è¯»ä¸­å­˜åœ¨çš„ç–‘é—®ç‚¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;P77 æ—¥å¿—æ–‡ä»¶&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨RCéš”ç¦»çº§åˆ«ä¼šå‡ºç°ç±»ä¼¼æ•°æ®ä¸¢å¤±æ›´æ–°çš„ç°è±¡,</summary>
      
    
    
    
    <category term="æ•°æ®åº“" scheme="https://agmtopy.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://agmtopy.gitee.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQLæ–‡ä»¶å’Œè¡¨ç»“æ„</title>
    <link href="https://agmtopy.gitee.io/2021/03/20/6.mysql/MySQL%E6%96%87%E4%BB%B6%E5%92%8C%E8%A1%A8%E7%BB%93%E6%9E%84/"/>
    <id>https://agmtopy.gitee.io/2021/03/20/6.mysql/MySQL%E6%96%87%E4%BB%B6%E5%92%8C%E8%A1%A8%E7%BB%93%E6%9E%84/</id>
    <published>2021-03-20T03:21:19.000Z</published>
    <updated>2021-03-30T14:23:44.625Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQLæ–‡ä»¶ä½“ç³»"><a href="#MySQLæ–‡ä»¶ä½“ç³»" class="headerlink" title="MySQLæ–‡ä»¶ä½“ç³»"></a>MySQLæ–‡ä»¶ä½“ç³»</h2><p>MySqlæ–‡ä»¶ä½“ç³»ä¸»è¦åˆ†ä¸º:</p><ol><li>å‚æ•°æ–‡ä»¶<br>å‚æ•°æ–‡ä»¶çš„å®šä¹‰æ˜¯ä½œä¸ºå­˜å‚¨MySqlåˆå§‹åŒ–å‚æ•°çš„ä½œç”¨,è´Ÿè´£è®°å½•å„ç§å‚æ•°</li><li>æ—¥å¿—æ–‡ä»¶:<br>è¿™é‡Œçš„æ—¥å¿—æ–‡ä»¶ä¸»è¦æ˜¯ç³»ç»Ÿæ“ä½œæ—¥å¿—,ä¸»è¦æœ‰é”™è¯¯æ—¥å¿—æ–‡ä»¶,äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶,æ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶ç­‰</li><li>socketæ–‡ä»¶:<br>UNIXåŸŸå¥—æ¥å­—æ‰€éœ€æ–‡ä»¶</li><li>pidæ–‡ä»¶<br>MySqlå®ä¾‹è¿›ç¨‹çš„IDæ–‡ä»¶</li><li>MySQLè¡¨ç»“æ„æ–‡ä»¶<br>ç”¨æ¥å­˜æ”¾MySQLè¡¨ç»“æ„å®šä¹‰æ–‡ä»¶</li><li>å­˜å‚¨å¼•æ“æ–‡ä»¶<br>å­˜å‚¨å¼•æ“æ–‡ä»¶å­˜æ”¾äº†çœŸæ­£çš„è®°å½•å’Œç´¢å¼•æ•°æ®</li></ol><p>ä¸»è¦å…³å¿ƒçš„æ˜¯æ—¥å¿—æ–‡ä»¶å’Œå­˜å‚¨å¼•æ“æ–‡ä»¶</p><h3 id="æ—¥å¿—æ–‡ä»¶"><a href="#æ—¥å¿—æ–‡ä»¶" class="headerlink" title="æ—¥å¿—æ–‡ä»¶"></a>æ—¥å¿—æ–‡ä»¶</h3><p>æ—¥å¿—æ–‡ä»¶ä¸»è¦æœ‰é”™è¯¯æ—¥å¿—,äºŒè¿›åˆ¶æ—¥å¿—,æ…¢æŸ¥è¯¢æ—¥å¿—,æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶<br>äºŒè¿›åˆ¶æ—¥å¿—å°±æ˜¯bin_logæ–‡ä»¶,ä¼šè®°å½•æ‰€æœ‰å¯¹MySqlæ•°æ®åº“æ‰§è¡Œæ›´æ–°çš„æ“ä½œ,å°±ç®—æœ€åæ•°æ®æœªå‘ç”Ÿæ”¹å˜;<br>å½“ä½¿ç”¨æ”¯æŒäº‹åŠ¡çš„å­˜å‚¨å¼•æ“æ—¶,æ‰€æœ‰æœªæäº¤çš„äºŒè¿›åˆ¶æ—¥å¿—ä¼šè¢«è®°å½•åˆ°ä¸€ä¸ªç¼“å­˜ä¸­(å½“è¶…è¿‡ç¼“å­˜å¤§å°æ—¶ä¼šè®°å½•åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­),ç­‰å¾…è¯¥äº‹åŠ¡æäº¤æ—¶ç›´æ¥å°†ç¼“å­˜åˆ·æ–°åˆ°bin_logä¸­<br>bin_logçš„è®°å½•æ ¼å¼æœ‰ä¸‰ç§(è®°å½•æ‰§è¡ŒSQL,è®°å½•æ›´æ–°æ•°æ®,æ··åˆæ¨¡å¼),åœ¨â€™è®°å½•æ‰§è¡ŒSQLâ€™çš„æ¨¡å¼ä¸‹ä¸»ä»å¤åˆ¶ä¸èƒ½ä½¿ç”¨RCæ¨¡å¼</p><h3 id="å­˜å‚¨å¼•æ“æ–‡ä»¶"><a href="#å­˜å‚¨å¼•æ“æ–‡ä»¶" class="headerlink" title="å­˜å‚¨å¼•æ“æ–‡ä»¶"></a>å­˜å‚¨å¼•æ“æ–‡ä»¶</h3><p>å­˜å‚¨å¼•æ“æ–‡ä»¶ä¸»è¦æœ‰â€™è¡¨ç©ºé—´æ–‡ä»¶â€™,é‡åšæ—¥å¿—æ–‡ä»¶(redo log)</p><h4 id="è¡¨ç©ºé—´æ–‡ä»¶"><a href="#è¡¨ç©ºé—´æ–‡ä»¶" class="headerlink" title="è¡¨ç©ºé—´æ–‡ä»¶"></a>è¡¨ç©ºé—´æ–‡ä»¶</h4><p>è¡¨ç©ºé—´æ–‡ä»¶æŒ‡çš„æ˜¯å®é™…å­˜å‚¨æ•°æ®çš„æ–‡ä»¶,åˆ†ä¸ºä¸¤ç§ç±»å‹é»˜è®¤çš„è¡¨ç©ºé—´,è¿™ç§è¡¨ç©ºé—´æ˜¯å…±äº«æ•°æ®å­˜å‚¨çš„æ¨¡å¼,å¦å¤–ä¸€ç§æ˜¯ç‹¬è‡ªçš„è¡¨ç©ºé—´,ä¸ºæ¯ä¸€å¼ è¡¨å•ç‹¬ç”Ÿäº§ç‹¬ç«‹çš„è¡¨ç©ºé—´æ–‡ä»¶å­˜æ”¾æ•°æ®/ç´¢å¼•/æ’å…¥ç¼“å†²BITMAP,ä½†æ˜¯è¯¥è¡¨å…¶ä½™çš„æ•°æ®è¿˜æ˜¯æ”¾åˆ°é»˜è®¤çš„è¡¨ç©ºé—´ä¸­</p><h4 id="é‡åšæ—¥å¿—æ–‡ä»¶"><a href="#é‡åšæ—¥å¿—æ–‡ä»¶" class="headerlink" title="é‡åšæ—¥å¿—æ–‡ä»¶"></a>é‡åšæ—¥å¿—æ–‡ä»¶</h4><p>é‡åšæ—¥å¿—æ–‡ä»¶æ˜¯innoDBç”¨æ¥ä¿è¯æ•°æ®å®Œæ•´æ€§çš„å…³é”®,é»˜è®¤é‡‡ç”¨ä¸€ä¸ªé‡åšæ—¥å¿—ç»„ä¸‹é¢æœ‰ä¸¤ä¸ªé•œåƒé‡åšæ—¥å¿—æ–‡ä»¶çš„æ¶æ„.<br>redo_logæ˜¯åœ¨sqlæ‰§è¡Œè¿‡ç¨‹ä¸­ä¸æ–­çš„è¿›è¡Œå†™å…¥å’Œå¤åˆ¶,è¿™é‡Œå’Œbin_logæœ‰æ‰€å·®å¼‚,bin_logæ˜¯åœ¨äº‹åŠ¡æäº¤åè¿›è¡Œçš„å†™å…¥.<br>redo_logçš„è®°å½•å¯¹è±¡æ˜¯å¯¹æ¯ä¸ªé¡µçš„æ›´æ”¹çš„ç‰©ç†è®°å½•,redo_logè®°å½•çš„æ˜¯å‘å‰çš„æ›´æ–°è®°å½•.</p><h2 id="MySQLè¡¨ç»“æ„"><a href="#MySQLè¡¨ç»“æ„" class="headerlink" title="MySQLè¡¨ç»“æ„"></a>MySQLè¡¨ç»“æ„</h2><p>MySQLçš„æ–‡ä»¶ç»“æ„æ˜¯å¦‚ä½•æ•°æ®å¦‚ä½•åœ¨ç‰©ç†ä¸Šçš„ç»“æ„,MySQLå¯¹äºæ•°æ®åœ¨é€»è¾‘ä¸Šçš„ç»“æ„å¯ä»¥åˆ’åˆ†ä¸ºç´¢å¼•ç»„ç»‡è¡¨,InnoDOçš„å­˜å‚¨ç»“æ„,è¡Œè®°å½•ç»“æ„,é¡µè®°å½•ç»“æ„ä»¥åŠè§†å›¾ç­‰</p><h3 id="æ•°æ®å­˜å‚¨çš„æ–¹å¼"><a href="#æ•°æ®å­˜å‚¨çš„æ–¹å¼" class="headerlink" title="æ•°æ®å­˜å‚¨çš„æ–¹å¼"></a>æ•°æ®å­˜å‚¨çš„æ–¹å¼</h3><p>æ•°æ®å­˜å‚¨æ ¼å¼å¯ä»¥åˆ†ä¸ºâ€™å †è¡¨â€™/â€˜ç´¢å¼•ç»„ç»‡è¡¨â€™</p><ul><li>å †è¡¨æŒ‡çš„æ˜¯æ•°æ®çš„å­˜æ”¾æ˜¯æ— åºçš„,æ˜¯æ ¹æ®ç©ºé—²ç£ç›˜ç©ºé—´æ¥å†³å®šå­˜æ”¾ä½ç½®;</li><li>ç´¢å¼•ç»„ç»‡è¡¨æŒ‡çš„æ˜¯åœ¨å­˜æ”¾æ•°æ®æ—¶æ˜¯æŒ‰ç…§ä¸»é”®ç´¢å¼•æ¥è¿›è¡Œå­˜æ”¾çš„.InnoDBçš„B+æ ‘ç´¢å¼•ç»“æ„å°±æ˜¯ä¸€ç§ç´¢å¼•ç»„ç»‡è¡¨çš„å½¢å¼.</li></ul><h3 id="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„"><a href="#InnoDBé€»è¾‘å­˜å‚¨ç»“æ„" class="headerlink" title="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„"></a>InnoDBé€»è¾‘å­˜å‚¨ç»“æ„</h3><p>InnoDBçš„é€»è¾‘å­˜å‚¨ç»“æ„åˆ’åˆ†ä¸º4çº§,åˆ†åˆ«æ˜¯è¡¨ç©ºé—´-æ®µç©ºé—´-åŒºç©ºé—´-é¡µç©ºé—´,é¡µç©ºé—´ä¸Šå­˜å‚¨çš„å°±æ˜¯ä¸€è¡Œä¸€è¡Œçš„æ•°æ®äº†</p><h3 id="è¡¨ç©ºé—´"><a href="#è¡¨ç©ºé—´" class="headerlink" title="è¡¨ç©ºé—´"></a>è¡¨ç©ºé—´</h3><p>è¡¨ç©ºé—´æ˜¯InnoDBé€»è¾‘å­˜å‚¨ä¸Šæœ€ä¸Šå±‚çš„æ“ä½œå•ä½,ä¸€ä¸ªè¡¨ç©ºé—´å­˜å‚¨äº†æ‰€å±è¯¥è¡¨çš„å…¨éƒ¨æ•°æ®(data,index)</p><h3 id="æ®µç©ºé—´"><a href="#æ®µç©ºé—´" class="headerlink" title="æ®µç©ºé—´"></a>æ®µç©ºé—´</h3><p>å¯¹è¡¨ç©ºé—´å†…çš„æ•°æ®æŒ‰ç…§ç±»å‹è¿›è¡Œåˆ’åˆ†,åˆå¯ä»¥åˆ’åˆ†ä¸ºæ•°æ®æ®µ/ç´¢å¼•æ®µ/å›æ»šæ®µç­‰,è¿™äº›ä¸åŒçš„ç±»å‹æ•°æ®,è¢«ç§°ä¸ºæ®µç©ºé—´</p><p>â€”â€”é€»è¾‘-ç‰©ç†åˆ†å‰²å±‚â€”â€”</p><h3 id="åŒºç©ºé—´"><a href="#åŒºç©ºé—´" class="headerlink" title="åŒºç©ºé—´"></a>åŒºç©ºé—´</h3><p>åŒºç©ºé—´æ˜¯ç”±è¿ç»­çš„ç£ç›˜ç©ºé—´ç»„æˆ,é»˜è®¤åŒºç©ºé—´å¤§å°ä¸º1MB,ä¸ºäº†ä¿è¯åŒºç©ºé—´çš„è¿ç»­æ€§è¿˜ä¼šä¸€æ¬¡å‘ç£ç›˜ç”³è¯·å¤šä¸ªåŒºç©ºé—´.åŒºç©ºé—´å®é™…å­˜å‚¨äº†æ®µç©ºé—´å†…çš„æ•°æ®.</p><h3 id="é¡µç©ºé—´"><a href="#é¡µç©ºé—´" class="headerlink" title="é¡µç©ºé—´"></a>é¡µç©ºé—´</h3><p>é¡µç©ºé—´æ˜¯InnoDBæœ€å°çš„ç£ç›˜ç®¡ç†å•ä½,åœ¨InnoDBä¸­æ¯ä¸ªé¡µçš„å¤§å°ä¸º16KB,å› æ­¤ä¸€ä¸ªåŒºå¯ä»¥å­˜å‚¨64ä¸ªé¡µ.é¡µæŒ‰ç…§ç±»å‹å¯ä»¥åˆ’åˆ†ä¸º</p><ol><li>æ•°æ®é¡µ</li><li>undoé¡µ</li><li>ç³»ç»Ÿé¡µ</li><li>äº‹åŠ¡æ•°æ®é¡µ</li><li>æ’å…¥ç¼“å†²é¡µ(BitMap/Free List)</li><li>äºŒè¿›åˆ¶å¤§å¯¹è±¡é¡µ</li></ol><h3 id="è¡Œ"><a href="#è¡Œ" class="headerlink" title="è¡Œ"></a>è¡Œ</h3><p>InnoDBä¸­çš„æ•°æ®æ˜¯æŒ‰ç…§è¡Œæ¥è¿›è¡Œå­˜å‚¨çš„,è¡Œæ•°æ®çš„è®°å½•æ ¼å¼æŒ‰ç…§ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤ç±».Compactå’ŒRedundantä¸¤ç§ç±»å‹.</p><ul><li><p>Redundant<br>Redundantç±»å‹æ˜¯ä¸ºäº†å…¼å®¹ä¹‹å‰ç‰ˆæœ¬è€Œè®¾è®¡çš„</p></li><li><p>Compact<br>Compactæ ¼å¼æ˜¯MySQL5.0ä¸­å¼•å…¥çš„,ç›®çš„æ˜¯é«˜æ•ˆçš„å­˜å‚¨æ•°æ®.</p></li><li><p>æ•°æ®ç»“æ„</p></li></ul><table><thead><tr><th>å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨</th><th>NULLæ ‡å¿—ä½</th><th>è®°å½•å¤´ä¿¡æ¯</th><th>åˆ—æ•°æ®â€¦</th><th>äº‹åŠ¡ID</th><th>å›æ»šæŒ‡é’ˆ</th></tr></thead></table><p>ç‰¹åˆ«è¦æ³¨æ„â€™äº‹åŠ¡IDâ€™å’Œâ€™å›æ»šæŒ‡é’ˆâ€™è¿™ä¸¤é¡¹ä¸éš”ç¦»çº§åˆ«å’Œäº‹åŠ¡å›æ»šæœ‰å…³;<br>NULL,åœ¨è¡Œçš„æ•°æ®ç»“æ„ä¸­éƒ½ä¸å ç”¨ä»»ä½•å­˜å‚¨ç©ºé—´,å› ä¸ºåœ¨è¡Œçš„æ•°æ®ç»“æ„ä¸­æœ‰NULLæ ‡å¿—ä½æ¥å¤„ç†NULL</p><ul><li>Varcharç±»å‹é•¿åº¦<br>Varcharç±»å‹åœ¨MySQLä¸­çš„å®šä¹‰æ˜¯æœ€å¤§èƒ½å­˜å‚¨65535ä¸ªå­—èŠ‚,å¹¶ä¸”æ˜¯è¯¥è¡Œæ‰€æœ‰çš„Varcharç±»å‹é•¿åº¦ä¹‹å’Œ.ç”±äºä¸€ä¸ªé¡µçš„å¤§å°ä¸º16KB,å› æ­¤åœ¨Varcharçš„ç±»å‹é•¿åº¦å®é™…ä¸Šæ˜¯è¶…è¿‡ä¸€é¡µçš„å¤§å°,è¿™æ ·å°±ä¼šå¯¼è‡´ä¸€é¡µä¸Šä¸èƒ½å­˜å‚¨ä¸€è¡Œæ•°æ®.è¿™é‡ŒInnoDBé‡‡ç”¨äº†æº¢å‡ºé¡µçš„æ–¹å¼æ¥è¿›è¡Œå¤„ç†,pageä¸Šåªä¿ç•™æ•°æ®å¤´ä¿¡æ¯,è€Œæº¢å‡ºé¡µä¸Šå­˜å‚¨æº¢å‡ºçš„ä¿¡æ¯(æº¢å‡ºæŒ‡çš„æ˜¯æ•°æ®å¤§å°æº¢å‡ºInnoDBè®¾å®šçš„é¢å®šå¤§å°,è€Œä¸æ˜¯pageé¡µçš„å¤§å°)</li></ul><h2 id="InnoDBæ•°æ®é¡µç»“æ„"><a href="#InnoDBæ•°æ®é¡µç»“æ„" class="headerlink" title="InnoDBæ•°æ®é¡µç»“æ„"></a>InnoDBæ•°æ®é¡µç»“æ„</h2><p>InnoDBçš„æ•°æ®é¡µç»“æ„æŒ‡çš„æ˜¯é¡µç©ºé—´ä¸­æ•°æ®é¡µçš„ç»“æ„,ä¸»è¦ç”±æ•°æ®ç³»ç»Ÿä¿¡æ¯å’Œç”¨æˆ·è®°å½•ä¿¡æ¯ç»„æˆ</p><ul><li>æ•°æ®ç³»ç»Ÿç»“æ„<br>æ•°æ®ç³»ç»Ÿç»“æ„ä¸»è¦æ˜¯ç”±æ–‡ä»¶å¤´/é¡µå¤´/Infimun-Supremum Records/é¡µç›®å½•ç­‰ç»„æˆ,æ ‡è®°äº†è¯¥å—åŒºåŸŸçš„ç³»ç»Ÿä¿¡æ¯</li><li>Infimun-Supremum RecordsæŒ‡çš„æ˜¯ä¸€ä¸ªå°äºæ•°æ®ä¸»é”®çš„åŒºé—´èµ·å§‹å€¼å’Œç»ˆæ­¢å€¼.è¿™ä¸¤ä¸ªå€¼ä¼šåœ¨B+æ ‘ä¸­è¿›è¡Œå­˜å‚¨</li><li>é¡µç›®å½•æŒ‡çš„æ˜¯æŒ‡çš„æ˜¯æ ‡è®°ç”¨æˆ·æ•°æ®çš„ç›¸å¯¹ä½ç½®çš„ç»“æ„<blockquote><p>åœ¨è¿›è¡Œæ•°æ®æŸ¥æ‰¾æ—¶,ä¼šå…ˆä»B+æ ‘ä¸­æŸ¥è¯¢åˆ°æ•°æ®å¯¹åº”çš„é¡µ,å°†é¡µåŠ è½½åˆ°å†…å­˜ä¸­å,æ ¹æ®é¡µç›®å½•æ¥å¯¹ç”¨æˆ·æ•°æ®è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾(é‡ç‚¹)</p></blockquote></li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://my.oschina.net/xinxingegeya/blog/474895">MySQLèšç°‡ç´¢å¼•&amp;èšé›†ç´¢å¼•&amp;ç´¢å¼•ç»„ç»‡è¡¨</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;MySQLæ–‡ä»¶ä½“ç³»&quot;&gt;&lt;a href=&quot;#MySQLæ–‡ä»¶ä½“ç³»&quot; class=&quot;headerlink&quot; title=&quot;MySQLæ–‡ä»¶ä½“ç³»&quot;&gt;&lt;/a&gt;MySQLæ–‡ä»¶ä½“ç³»&lt;/h2&gt;&lt;p&gt;MySqlæ–‡ä»¶ä½“ç³»ä¸»è¦åˆ†ä¸º:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‚æ•°æ–‡ä»¶&lt;br&gt;å‚æ•°æ–‡ä»¶çš„å®š</summary>
      
    
    
    
    <category term="æ•°æ®åº“" scheme="https://agmtopy.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://agmtopy.gitee.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQLä½“ç³»ç»“æ„ä¸å­˜å‚¨å¼•æ“</title>
    <link href="https://agmtopy.gitee.io/2021/03/15/6.mysql/MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/"/>
    <id>https://agmtopy.gitee.io/2021/03/15/6.mysql/MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/</id>
    <published>2021-03-15T13:54:51.000Z</published>
    <updated>2021-03-30T14:24:02.022Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸»è¦ä»‹ç»MySqlçš„æ•´ä½“ä½“ç³»ç»“æ„å’Œå­˜å‚¨å¼•æ“</p></blockquote><h2 id="ä½“ç³»ç»“æ„"><a href="#ä½“ç³»ç»“æ„" class="headerlink" title="ä½“ç³»ç»“æ„"></a>ä½“ç³»ç»“æ„</h2><p>æ¦‚å¿µä¸Šâ€™æ•°æ®åº“â€™æ˜¯æ–‡ä»¶çš„é›†åˆ,æ˜¯ä¾ç…§æŸç§æ•°æ®æ¨¡å‹ç»„ç»‡èµ·æ¥å¹¶å­˜æ”¾ä¸å­˜å‚¨å™¨ä¸­çš„æ•°æ®;â€™æ•°æ®åº“å®åˆ—â€™æ˜¯ç¨‹åºæ˜¯ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹,æ˜¯ç”¨æˆ·å¯¹â€™æ•°æ®åº“â€™æ“ä½œçš„è½¯ä»¶.<br>MySqlä¸»è¦ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆ</p><ol><li>è¿æ¥æ± ç»„ä»¶</li><li>ç®¡ç†æœåŠ¡å’Œå·¥å…·ç»„ä»¶</li><li>SQLæ¥å£ç»„ä»¶</li><li>æŸ¥è¯¢åˆ†æå™¨ç»„ä»¶</li><li>ä¼˜åŒ–å™¨ç»„ä»¶</li><li>ç¼“å†²ç»„ä»¶</li><li>æ’ä»¶å¼å­˜å‚¨å¼•æ“(å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨çš„ ,è€Œä¸æ˜¯åŸºäºæ•°æ®åº“çš„)</li><li>ç‰©ç†æ–‡ä»¶</li></ol><h2 id="å­˜å‚¨å¼•æ“"><a href="#å­˜å‚¨å¼•æ“" class="headerlink" title="å­˜å‚¨å¼•æ“"></a>å­˜å‚¨å¼•æ“</h2><ul><li><p>æ¦‚è¿°<br>å­˜å‚¨å¼•æ“æ˜¯ä¸MySqlç‰©ç†æ–‡ä»¶è¿›è¡Œäº¤äº’çš„ä¸€ç§æ’ä»¶,å­˜å‚¨å¼•æ“çš„åº•éƒ¨æ˜¯ç‰©ç†å­˜å‚¨å±‚,åŒ…æ‹¬äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶,æ•°æ®æ–‡ä»¶,é”™è¯¯æ–‡ä»¶,æ…¢æŸ¥è¯¢æ—¥å¿—,undo/redoæ—¥å¿—ç­‰</p></li><li><p>ä¸€æ¬¡selectçš„è¿‡ç¨‹<br>ä¸‹å›¾æ˜¯ä¸€æ¬¡selectçš„è¿‡ç¨‹,ä»å›¾ä¸­å¾—çŸ¥å­˜å‚¨å¼•æ“ä½äºæ˜¯ç‰©ç†æ–‡ä»¶å’Œç¨‹åºæ•°æ®ä¹‹é—´<br><a href="https://imgtu.com/i/6r8Q7q"><img src="https://s3.ax1x.com/2021/03/15/6r8Q7q.png" alt="6r8Q7q.png"></a></p></li><li><p>InnoDBçš„ä½“ç³»æ¶æ„</p></li></ul><p><a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-architecture.html"><img src="https://dev.mysql.com/doc/refman/8.0/en/images/innodb-architecture.png" alt="InnoDBæ¶æ„"></a></p><ol><li>å®åˆ—å±‚<br>å®åˆ—å±‚ä¸»è¦åŒ…æ‹¬â€™çº¿ç¨‹â€™å’Œâ€™å†…å­˜â€™ä¸¤ä¸ªéƒ¨åˆ†<br>a. åå°çº¿ç¨‹ä¸»è¦æœ‰</li></ol><ul><li>Master Thread<br>ä¸»çº¿ç¨‹ä¸»è¦è´Ÿè´£å°†ç¼“å†²æ± ä¸­çš„æ•°æ®å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ä¸­,ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</li><li>I/O Thread<br>I/O Thread ä¸»è¦æ˜¯è´Ÿè´£AIO(Async IO)è¯·æ±‚çš„å›è°ƒ</li><li>Purge Thread<br>Purge Threadçš„ä½œç”¨æ˜¯äº‹ç‰©åœ¨è¢«æäº¤åundologå°±å¯èƒ½ä¸åœ¨è¢«ä½¿ç”¨äº†,å› æ­¤éœ€è¦Purge Threadçº¿ç¨‹æ¥å›æ”¶å¹¶åˆ†é…çš„undoé¡µ</li><li>Page Cleaner Thread<br>Page Cleaner Threadçš„ä½œç”¨æ˜¯å›æ”¶åˆ†é…è„é¡µ</li></ul><p>å°ç»“:Master Threadå’ŒI/O Threadä¸€ä¸ªè´Ÿè´£å¼‚æ­¥åˆ·æ–°æ•°æ®ä¸€ä¸ªè´Ÿè´£AIOçš„å›è°ƒ,Purge Threadå’ŒPage Cleaner Threadä¸€ä¸ªè´Ÿè´£å›æ”¶åˆ†é…undologä¸€ä¸ªè´Ÿè´£å›æ”¶åˆ†é…è„é¡µ</p><p>b. å†…å­˜</p><ul><li>ç¼“å†²æ± <br>InnoDBå­˜å‚¨å¼•æ“æ˜¯åŸºäºç£ç›˜å­˜å‚¨,å…¶ä¸­çš„æ•°æ®æ˜¯æŒ‰ç…§é¡µçš„æ–¹å¼è¿›è¡Œç®¡ç†.ç”±äºCPUå’Œç£ç›˜é€Ÿåº¦ä¸­çš„å·®å¼‚å› æ­¤ç”¨ç¼“å†²æ± æŠ€æœ¯æ¥æé«˜æ•°æ®åº“çš„æ•´ä½“æ€§èƒ½<br>ç¼“å†²æ± æ˜¯ä¸€å—å†…å­˜åŒºåŸŸ,åœ¨æ•°æ®åº“è¿›è¡Œè¯»å–é¡µæ“ä½œæ—¶,ä¼šé¦–å…ˆå°†ä»å†…å­˜ä¸­çš„æ•°æ®æ”¾åˆ°ç¼“å†²æ± ä¸­,åœ¨ä¸‹ä¸€æ¬¡è¯»å–ç›¸åŒé¡µæ—¶,ä¼šç›´æ¥è¯»å–ç¼“å†²æ± ä¸­çš„é¡µæ•°æ®.<br>å¯¹äºæ•°æ®åº“ä¸­çš„é¡µçš„ä¿®æ”¹,é¦–å…ˆä¼šä¿®æ”¹ç¼“å†²æ± ä¸­çš„é¡µ,ç„¶åä»¥ä¸€å®šçš„é¢‘ç‡åˆ·æ–°åˆ°ç£ç›˜,è¿™ç§æœºåˆ¶è¢«ç§°ä¸ºCheckPoint<br>ç¼“å†²æ± ä¸­çš„æ•°æ®é¡µç±»å‹åˆ†ä¸º:</li></ul><ol><li>ç´¢å¼•é¡µ</li><li>æ•°æ®é¡µ</li><li>undoé¡µ</li><li>æ’å…¥ç¼“å†²</li><li>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•</li><li>InnoDBå­˜å‚¨çš„é”ä¿¡æ¯</li><li>æ•°æ®å­—å…¸</li></ol><ul><li><p>LRU list,Freen lst,Flush list<br>æ•°æ®åº“ä¸­çš„ç¼“å†²æ± æ˜¯é€šè¿‡LRUç®—æ³•æ¥è¿›è¡Œç®¡ç†,ä½†æ˜¯InnoDBä¸­çš„LRUç®—æ³•æ˜¯ç»è¿‡ä¼˜åŒ–çš„,å°†æ–°æ•°æ®æ”¾åˆ°åˆ—è¡¨3/8å¤„</p></li><li><p>é‡åšæ—¥å¿—ç¼“å†²<br>é‡åšæ—¥å¿—é¦–å…ˆä¼šæ”¾åˆ°ç¼“å†²åŒº,ç„¶åæŒ‰ç…§ä¸€å®šçš„é¢‘ç‡åˆ·æ–°åˆ°æ—¥å¿—æ–‡ä»¶ä¸Š,æœ‰ä¸‰ç§æƒ…å†µä¼šåˆ·æ–°é‡åšæ—¥å¿—:1.Master Threadæ¯ä¸€ç§’éƒ½ä¼šå°†æ—¥å¿—ç¼“å†²åˆ·æ–°åˆ°æ—¥å¿—æ–‡ä»¶,2.æ¯ä¸ªäº‹åŠ¡æäº¤æ—¶éƒ½ä¼šå°†é‡åšæ—¥å¿—åˆ·æ–°åˆ°æ–‡ä»¶,3.å½“é‡åšæ—¥å¿—ç¼“å†²æ± å‰©ä½™ç©ºé—´å°äº1/2æ—¶,ä¼šå°†æ—¥å¿—åˆ·æ–°åˆ°æ–‡ä»¶ä¸Š</p></li><li><p>é¢å¤–çš„å†…å­˜æ± <br>é¢å¤–çš„å†…å­˜æ± ä½œä¸ºç¼“å†²æ± çš„å¤‡ç”¨,ä½†ç¼“å†²æ± ä¸å¤Ÿçš„æ—¶å€™,å°±ä¼šä»é¢å¤–çš„å†…å­˜æ± ä¸­ç”³è¯·</p></li><li><p>CheckpointæŠ€æœ¯<br>Mysqlä¸­æ•°æ®çš„æŒä¹…æ€§æ˜¯é€šè¿‡Write Ahead Logç­–ç•¥æ¥ä¿è¯,ä¹Ÿå°±æ˜¯å…ˆå†™æ—¥å¿—æ–‡ä»¶,åœ¨ä¿®æ”¹æ•°æ®æ–‡ä»¶.å½“å®•æœºå¯¼è‡´æ•°æ®ä¸¢å¤±æ—¶,ä¼šé€šè¿‡é‡åšæ—¥å¿—æ¥è¿›è¡Œæ•°æ®æ¢å¤.<br>å¦‚æœé‡åšæ—¥å¿—å¤ªå¤§ä¼šå¯¼è‡´æ•°æ®æ¢å¤çš„å¾ˆæ…¢,å› æ­¤mysqlä½¿ç”¨CheckPointçš„æŠ€æœ¯æ¥ä¿è¯,CheckPointæ˜¯å°†ç¼“å†²æ± ä¸­çš„å†…å­˜é¡µåˆ·æ–°åˆ°ç£ç›˜çš„åŠ¨ä½œ</p></li></ul><h2 id="Master-Thread"><a href="#Master-Thread" class="headerlink" title="Master Thread"></a>Master Thread</h2><p>Master Threadå…·æœ‰æœ€é«˜çº§åˆ«çš„çº¿ç¨‹ä¼˜å…ˆçº§,å†…éƒ¨æœ‰å¤šä¸ªå¾ªç¯ç»„æˆ:ä¸»å¾ªç¯,åå°å¾ªç¯,åˆ·æ–°å¾ªç¯,æš‚åœå¾ªç¯.<br>Master Threadä¸»è¦åˆ†ä¸º1sæ‰§è¡Œä¸€æ¬¡çš„æ“ä½œ:</p><ol><li>æ—¥å¿—ç¼“å†²åˆ·æ–°åˆ°ç£ç›˜,å³ä½¿è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤</li><li>åˆå¹¶æ’å…¥ç¼“å†²</li><li>æœ€å¤šåˆ·æ–°100ä¸ªInnoDBçš„ç¼“å†²æ± ä¸­çš„è„é¡µåˆ°ç£ç›˜</li><li>å¦‚æœå½“å‰æ²¡æœ‰ç”¨æˆ·æ´»åŠ¨,å°±åˆ‡æ¢åˆ°backgroud loop<br>10sæ‰§è¡Œä¸€æ¬¡çš„æ“ä½œ:</li><li>åˆ·æ–°100ä¸ªè„é¡µåˆ°ç£ç›˜</li><li>åˆå¹¶è‡³å¤š5ä¸ªæ’å…¥ç¼“å†²</li><li>å°†æ—¥å¿—ç¼“å†²åˆ·æ–°åˆ°ç£ç›˜</li><li>åˆ é™¤æ— ç”¨çš„Undoé¡µ</li><li>åˆ·æ–°100ä¸ªæˆ–è€…10ä¸ªè„é¡µ</li></ol><h2 id="InnoDBç‰¹ç‚¹"><a href="#InnoDBç‰¹ç‚¹" class="headerlink" title="InnoDBç‰¹ç‚¹"></a>InnoDBç‰¹ç‚¹</h2><ol><li>æ’å…¥ç¼“å†²(Insert Buffer)</li><li>ä¸¤æ¬¡å†™(Double Write)</li><li>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•(Adaptive Hash Index)</li><li>å¼‚æ­¥IO(Async IO)</li><li>åˆ·æ–°é‚»æ¥é¡µ(Flush Neighbor Page)</li></ol><h2 id="æ’å…¥ç¼“å†²"><a href="#æ’å…¥ç¼“å†²" class="headerlink" title="æ’å…¥ç¼“å†²"></a>æ’å…¥ç¼“å†²</h2><ol><li>Insert Buffer<br>Insert Bufferæ˜¯åœ¨æ’å…¥æ•°æ®æ—¶å°†è¾…åŠ©ç´¢å¼•å…ˆæ”¾åˆ°Insert Bufferä¸­,ç„¶ååœ¨æŒ‰ç…§ä¸€å®šçš„é¢‘ç‡å°†Insert Bufferä¸­çš„æ•°æ®å’Œè¾…åŠ©ç´¢å¼•é¡µçš„å­èŠ‚ç‚¹è¿›è¡Œåˆå¹¶,è¿™æ ·èƒ½å¤Ÿæé«˜éèšé›†ç´¢å¼•çš„æ’å…¥æ€§èƒ½</li><li>Change Buffer<br>Change Bufferä½œä¸ºInsert Bufferçš„å‡çº§,ä¼šå°†æ‰€æœ‰å¯¹éèšé›†ç´¢å¼•çš„æ“ä½œè¿›è¡Œç¼“å†²</li><li>Insert Bufferçš„å†…éƒ¨ç»“æ„<br>Insert Bufferçš„æ•°æ®ç»“æ„æ˜¯B+æ ‘,åœ¨Mysql4.1ä¹‹å‰æ¯å¼ è¡¨éƒ½æœ‰ä¸€é¢—B+æ ‘;åœ¨ç°åœ¨çš„ç‰ˆæœ¬ä¸­å…¨å±€åªæœ‰ä¸€é¢—B+æ ‘,è´Ÿè´£å¯¹æ‰€æœ‰è¡¨çš„è¾…åŠ©ç´¢å¼•è¿›è¡ŒInsert Buffer,é»˜è®¤ä¸ºibdata1<br>Insert Bufferçš„éå¶å­èŠ‚ç‚¹æ˜¯ç”±space(å¾…æ’å…¥è®°å½•è¡¨çš„è¡¨ç©ºé—´id),offer(åç§»é‡)æ„æˆ;å¶å­èŠ‚ç‚¹æ˜¯ç”±space,offer,metadata(æ“ä½œè¾…åŠ©ç´¢å¼•çš„å…ƒæ•°æ®-é¡ºåº,æ ‡è¯†,ç±»å‹)</li><li>merge Insert Bufferçš„è¿‡ç¨‹<br>åœ¨ä¸‰ç§æƒ…å†µä¸‹,MySqlä¼šå°†Insert Bufferåˆ·æ–°åˆ°è¾…åŠ©ç´¢å¼•æ–‡ä»¶ä¸­,å¹¶ä¸”è™½ç„¶Insert Bufferæ˜¯æœ‰åºçš„,ä½†æ˜¯åœ¨åˆ·æ–°æ—¶,æ˜¯éšæœºé€‰å–Insert Bufferä¸­çš„ä¸€ä¸ªé¡µè¿›è¡Œåˆ·æ–°,åšè¿™ä¸ªçš„ç›®çš„æ˜¯ä¸ºäº†ä¿è¯å…¬å¹³æ€§è€Œèˆå¼ƒé¡ºåºæ€§.ä»¥ä¸‹çš„ä¸‰ç§æƒ…å†µä¼šè¿›è¡ŒInser Bufferçš„åˆ·æ–°</li><li>è¾…åŠ©ç´¢å¼•é¡µè¢«è¯»å–åˆ°ç¼“å†²æ± ä¸­</li><li>Insert Buffer BitMapè®°å½•Insert Bufferå¯ç”¨ç©ºé—´ä¸è¶³æ—¶</li><li>Master Threadçº¿ç¨‹å¯¹Insert Bufferçš„åˆ·æ–°</li></ol><h2 id="ä¸¤æ¬¡å†™"><a href="#ä¸¤æ¬¡å†™" class="headerlink" title="ä¸¤æ¬¡å†™"></a>ä¸¤æ¬¡å†™</h2><p>ä¸¤æ¬¡å†™æŒ‡çš„æ˜¯å½“åœ¨ç›´æ¥å†™å…¥æŸé¡µæ—¶å‘ç”Ÿå®•æœº,ä¼šæœ‰ä¸¢å¤±æ•°æ®çš„é£é™©.é€šè¿‡å‘å°†è„é¡µçš„æ•°æ®è½¬ç§»åˆ°å†…å­˜ä¸­çš„doublewrite bufferä¸­,åœ¨å°†doublewriteä¸­çš„æ•°æ®åŒæ­¥å†™åˆ°å…±äº«è¡¨ç©ºé—´çš„ç‰©ç†ç£ç›˜æ–‡ä»¶ä¸Š,ç¬¬äºŒæ¬¡æ‰å°†doublewrite bufferä¸­çš„æ–‡ä»¶åˆ·æ–°åˆ°æ•°æ®æ–‡ä»¶(.ibd)ä¸­,è¿™æ ·å¯ä»¥å°½é‡ä¿è¯æ•°æ®æ–‡ä»¶çš„å®Œæ•´æ€§</p><h2 id="è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•"><a href="#è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•" class="headerlink" title="è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•"></a>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•</h2><p>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•æŒ‡çš„æ˜¯è¿ç»­å¯¹çƒ­ç‚¹æ•°æ®çš„å¤šæ¬¡æŸ¥è¯¢åä¼šæ ¹æ®B+æ ‘ç´¢å¼•ç”Ÿæˆå¯¹åº”çš„å“ˆå¸Œç´¢å¼•,åŠ å¿«æŸ¥è¯¢æ€§èƒ½</p><h2 id="å¼‚æ­¥IO"><a href="#å¼‚æ­¥IO" class="headerlink" title="å¼‚æ­¥IO"></a>å¼‚æ­¥IO</h2><p>å¼‚æ­¥IOå¯ä»¥æé«˜æ“ä½œç£ç›˜çš„æ•ˆç‡,</p><h2 id="åˆ·æ–°é‚»æ¥é¡µ"><a href="#åˆ·æ–°é‚»æ¥é¡µ" class="headerlink" title="åˆ·æ–°é‚»æ¥é¡µ"></a>åˆ·æ–°é‚»æ¥é¡µ</h2><p>åˆ·æ–°é‚»æ¥é¡µæŒ‡çš„æ˜¯å¯¹è„é¡µæ‰€åœ¨åŒºçš„é¡µè¿›è¡Œæ£€æµ‹,å‘ç°æ˜¯è„é¡µä¸€å¹¶è¿›è¡Œåˆ·æ–°.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ä¸»è¦ä»‹ç»MySqlçš„æ•´ä½“ä½“ç³»ç»“æ„å’Œå­˜å‚¨å¼•æ“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä½“ç³»ç»“æ„&quot;&gt;&lt;a href=&quot;#ä½“ç³»ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;ä½“ç³»ç»“æ„&quot;&gt;&lt;/a&gt;ä½“ç³»ç»“æ„&lt;/h2&gt;&lt;p&gt;æ¦‚å¿µä¸Šâ€™æ•°æ®</summary>
      
    
    
    
    <category term="æ•°æ®åº“" scheme="https://agmtopy.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://agmtopy.gitee.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œåŸºç¡€çŸ¥è¯†(ä¸€)</title>
    <link href="https://agmtopy.gitee.io/2021/03/08/16.%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1.HTTP%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>https://agmtopy.gitee.io/2021/03/08/16.%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1.HTTP%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</id>
    <published>2021-03-08T13:06:46.000Z</published>
    <updated>2021-03-27T16:13:16.108Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«"><a href="#è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«" class="headerlink" title="è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«"></a>è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«</h2><ol><li>å¹¿åŸŸç½‘ WAN(Wide Area Network),ä½œç”¨èŒƒå›´åœ¨å‡ åè‡³å‡ åƒå…¬é‡Œ</li><li>åŸåŸŸç½‘ MAN(Metropolitan Area Network),ä½œç”¨èŒƒå›´åœ¨äº”è‡³äº”åå…¬é‡Œ</li><li>å±€åŸŸç½‘ LAN(Local Area Network),ä½œç”¨èŒƒå›´åœ¨ä¸€åŠŸèƒ½å·¦å³</li><li>ä¸ªäººå±€åŸŸç½‘ PAN(Personal Area Network),é€šå¸¸ä½œç”¨èŒƒå›´ä¸º10ç±³å·¦å³,é€šè¿‡æ— çº¿è¿æ¥èµ·æ¥çš„ä¸ªäººå±€åŸŸç½‘åˆç§°ä¸ºWPAN</li></ol><h2 id="è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"><a href="#è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"></a>è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡</h2><ol><li>é€Ÿç‡:æŒ‡çš„æ˜¯è¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œä¸Šçš„ä¸»æœºåœ¨æ•°å­—ä¿¡é“ä¸Šä¼ é€æ•°æ®çš„é€Ÿç‡.é€šä¿—æ¥è®²å°±æ˜¯å•ä½æ—¶é—´å†…èƒ½å‘é€çš„æ•°æ®é‡</li><li>å¸¦å®½:æŒ‡çš„æ˜¯ç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›.é€šä¿—æ¥è®²å°±æ˜¯ç½‘ç»œçº¿è·¯æ‰¿è½½æ•°æ®çš„å®½åº¦</li><li>ååé‡:æŒ‡çš„æ˜¯å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œçš„æ•°æ®é‡</li><li>æ—¶å»¶:æŒ‡çš„æ˜¯æ•°æ®é€šè¿‡ç½‘ç»œä»ä¸€ç«¯ä¼ é€åˆ°å¦å¤–ä¸€ç«¯çš„æ—¶é—´(æ€»æ—¶å»¶=å‘é€æ—¶å»¶+ä¼ æ’­æ—¶å»¶+å¤„ç†æ—¶å»¶+æ’é˜Ÿæ—¶å»¶)</li><li>æ—¶å»¶å¸¦å®½ç§¯:æŒ‡çš„æ˜¯ä¼ æ’­æ—¶å»¶*è´·æ¬¾è¡¨ç¤ºä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦</li><li>å¾€è¿”æ—¶é—´RTT:æŒ‡çš„æ˜¯ä»å‘é€ç«¯å‘é€æ•°æ®å¼€å§‹åˆ°å‘é€ç«¯æ¥å—åˆ°æ¥å—ç«¯çš„å“åº”ä¸ºæ­¢</li><li>åˆ©ç”¨ç‡:æŒ‡çš„æ˜¯ä¿¡é“åˆ©ç”¨ç‡å’Œç½‘ç»œåˆ©ç”¨ç‡</li></ol><h2 id="è®¡ç®—æœºç½‘ç»œåè®®åˆ’åˆ†"><a href="#è®¡ç®—æœºç½‘ç»œåè®®åˆ’åˆ†" class="headerlink" title="è®¡ç®—æœºç½‘ç»œåè®®åˆ’åˆ†"></a>è®¡ç®—æœºç½‘ç»œåè®®åˆ’åˆ†</h2><ol><li><p>OSIä¸ƒå±‚åè®®</p><ol start="7"><li>åº”ç”¨å±‚</li><li>è¡¨ç¤ºå±‚</li><li>ä¼šè¯å±‚</li><li>è¿è¾“å±‚</li><li>ç½‘ç»œå±‚</li><li>æ•°æ®é“¾è·¯å±‚</li><li>ç‰©ç†å±‚</li></ol></li><li><p>TCP/IPå››å±‚åè®®</p><ol start="4"><li>åº”ç”¨å±‚(TELNET,FTP,SMTP)</li><li>è¿è¾“å±‚(TCP/UDP)</li><li>ç½‘é™…å±‚(IP)</li><li>ç½‘ç»œæ¥å£å±‚<br>ç”±äºTCP/IPåè®®ä¸­çš„ç½‘ç»œæ¥å£å±‚æ˜¯å¯¹é€šä¿¡é“¾è·¯çš„ä¸€ä¸ªæŠ½è±¡å› æ­¤å¹¶æ— å…·ä½“å®ç°,å› æ­¤åˆæŠ˜ä¸­å‡ºäº†ä¸€ä¸ªäº”å±‚åè®®çš„æ¶æ„</li></ol></li><li><p>äº”å±‚åè®®</p><ol start="5"><li>åº”ç”¨å±‚</li><li>è¿è¾“å±‚</li><li>ç½‘ç»œå±‚</li><li>æ•°æ®é“¾è·¯å±‚</li><li>ç‰©ç†å±‚</li></ol></li></ol><h2 id="TCPå’ŒUDPçš„å¼‚åŒ"><a href="#TCPå’ŒUDPçš„å¼‚åŒ" class="headerlink" title="TCPå’ŒUDPçš„å¼‚åŒ"></a>TCPå’ŒUDPçš„å¼‚åŒ</h2><p>TCPå’ŒUDPéƒ½æ˜¯è¿è¾“å±‚åè®®,TCPåœ¨è®¾è®¡æ˜¯å¯é çš„(å› æ­¤æœ‰ä¸‰æ¬¡æ¡æ‰‹)</p><h2 id="TCP-IPåè®®æ—çš„æ²™æ¼æ¨¡å‹"><a href="#TCP-IPåè®®æ—çš„æ²™æ¼æ¨¡å‹" class="headerlink" title="TCP/IPåè®®æ—çš„æ²™æ¼æ¨¡å‹"></a>TCP/IPåè®®æ—çš„æ²™æ¼æ¨¡å‹</h2><p>åº”ç”¨å±‚ :  HTTP   SMTP    DNS  RTP   H.323  SIP<br>           \     /       \    /     \      /<br>è¿è¾“å±‚ :     TCP            UDP        SCTP<br>              \             |          /<br>ç½‘é™…å±‚ :                    IP<br>               /            |            <br>ç½‘ç»œæ¥å£å±‚:  æ¥å£1          æ¥å£2         æ¥å£3</p><h2 id="é€šä¿¡æ–¹å¼"><a href="#é€šä¿¡æ–¹å¼" class="headerlink" title="é€šä¿¡æ–¹å¼"></a>é€šä¿¡æ–¹å¼</h2><ol><li>å•å‘é€šä¿¡<br>ä¿¡å·åªèƒ½æ²¿ç€ä¸€ä¸ªæ–¹å‘ç§»åŠ¨</li><li>åŒå‘äº¤æ›¿é€šä¿¡(åŠåŒå·¥é€šä¿¡)<br>å•ä½æ—¶é—´å†…ä¿¡å·åªèƒ½æ²¿ç€ä¸€ä¸ªæ–¹å‘ç§»åŠ¨</li><li>åŒå‘åŒæ—¶é€šä¿¡<br>å•ä½æ—¶é—´å†…ä¿¡å·å¯å‘ä¸åŒçš„æ–¹å‘ç§»åŠ¨</li></ol><h2 id="ç½‘é™…å±‚åè®®-IP"><a href="#ç½‘é™…å±‚åè®®-IP" class="headerlink" title="ç½‘é™…å±‚åè®®-IP"></a>ç½‘é™…å±‚åè®®-IP</h2><p>HTTPæ˜¯ä»€ä¹ˆ?<br>HTTPæ˜¯ä¸€ç§è¶…æ–‡æœ¬ä¼ è¾“åè®®(Hypertext Transfer Protocol),ä¸»è¦æ˜¯ç”±äº</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åŸºç¡€çŸ¥è¯†&quot;&gt;&lt;a href=&quot;#åŸºç¡€çŸ¥è¯†&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€çŸ¥è¯†&quot;&gt;&lt;/a&gt;åŸºç¡€çŸ¥è¯†&lt;/h1&gt;&lt;h2 id=&quot;è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«&quot;&gt;&lt;a href=&quot;#è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«&quot; class=&quot;headerlink&quot; title=&quot;è®¡</summary>
      
    
    
    
    
    <category term="ç½‘ç»œåè®®" scheme="https://agmtopy.gitee.io/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"/>
    
  </entry>
  
  <entry>
    <title>å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯</title>
    <link href="https://agmtopy.gitee.io/2021/01/20/7.%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9F%A5%E8%AF%86/12.%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/"/>
    <id>https://agmtopy.gitee.io/2021/01/20/7.%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9F%A5%E8%AF%86/12.%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/</id>
    <published>2021-01-20T14:04:32.000Z</published>
    <updated>2021-03-27T16:13:16.122Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯"><a href="#å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯" class="headerlink" title="å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯"></a>å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><blockquote><p>å»¶è¿Ÿé˜Ÿåˆ—æŒ‡çš„æ˜¯å…ƒç´ æŒ‰ç…§å»¶è¿Ÿæ—¶é—´è¿›è¡Œæ’åºå½¢æˆå¹¶ä¸”åˆ°æ—¶åèƒ½è‡ªåŠ¨å¼¹å‡ºçš„æœ‰åºé˜Ÿåˆ—,åº•å±‚æ•°æ®ç»“æ„æ—¢å¯ä»¥æ˜¯æ•°ç»„ä¹Ÿå¯ä»¥æ˜¯é“¾è¡¨</p></blockquote><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><p>æŒ‰ç…§å€’è®¡æ—¶è§¦å‘çš„ä¸šåŠ¡åœºæ™¯,ä¾‹å¦‚ç”µå•†ç½‘ç«™ä¸­çš„è®¢å•æœªæ”¯ä»˜è‡ªåŠ¨å–æ¶ˆ,ç«æ‹,æ—¥å†å¾…åŠæé†’çš„åœºæ™¯,ä»¥åŠç”¨å®šæ—¶ä»»åŠ¡æ‰«è¡¨è§¦å‘çš„ä¸šåŠ¡åœºæ™¯</p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p>å¦‚æœè®©ä½ æ¥è®¾è®¡å»¶æ—¶é˜Ÿåˆ—,ä½ éœ€è¦æ€ä¹ˆæ ·æ¥è®¾è®¡?<br>å…ˆæ¥ä¸ªåŸºç¡€1.0çš„è®¾è®¡:è¦å®ç°å»¶æ—¶é˜Ÿåˆ—éœ€è¦ä¸¤ä¸ªè§’è‰²,ç¬¬ä¸€ä¸ªæ˜¯å­˜å‚¨ä¿¡æ¯çš„é˜Ÿåˆ—,ç¬¬äºŒä¸ªè§’è‰²æ˜¯â€™è®¡æ—¶å™¨â€™è´Ÿè´£ç›‘è§†é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯æ—¶å€™åˆ°æœŸ</p><p>å›¾ç¤º2</p><h2 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h2><h3 id="DelayQueue"><a href="#DelayQueue" class="headerlink" title="DelayQueue"></a>DelayQueue</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//1.é˜Ÿåˆ—çš„è§’è‰²</span>    <span class="token class-name">DelayQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DelayedTask</span><span class="token punctuation">></span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DelayQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">DelayedTask</span> task1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DelayedTask</span><span class="token punctuation">(</span><span class="token number">1_0L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_1:"</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">DelayedTask</span> task5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DelayedTask</span><span class="token punctuation">(</span><span class="token number">1_5L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_2:"</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>task1<span class="token punctuation">)</span><span class="token punctuation">;</span>    queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>task5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//2.è®¡æ—¶å™¨çš„è§’è‰²</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">DelayedTask</span> task <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        task<span class="token punctuation">.</span><span class="token function">getRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æºç è§£æ<blockquote><p>DelayQueueåº•å±‚é‡‡ç”¨çš„æ˜¯PriorityQueue,ä¸€ç§æä¾›ä¼˜å…ˆçº§çš„é˜Ÿåˆ—,poll()æ–¹æ³•å¦‚ä¸‹:</p></blockquote></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//PriorityQueueæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„,å› æ­¤éœ€è¦ç”¨lock</span>    <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lock<span class="token punctuation">;</span>    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">E</span> first <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> first<span class="token punctuation">.</span><span class="token function">getDelay</span><span class="token punctuation">(</span>NANOSECONDS<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token keyword">return</span> q<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·çš„å»¶æ—¶é˜Ÿåˆ—å¯ä»¥è§£å†³å•ä¸ªè¿›ç¨‹ä¸‹çš„å»¶è¿Ÿé˜Ÿåˆ—åœºæ™¯,ä½†æ˜¯æ— æ³•è§£å†³å¤šä¸ªåº”ç”¨ä¸‹çš„åœºæ™¯,é‚£ä¹ˆå¦‚ä½•åœ¨å®ç°åˆ†å¸ƒå¼çš„å»¶è¿Ÿé˜Ÿåˆ—å–ƒ?<br>å…ˆä»é—®é¢˜åˆ†æ,æˆ‘ä»¬æƒ³è¦å®ç°çš„æ˜¯åˆ†å¸ƒå¼çš„å»¶è¿Ÿé˜Ÿåˆ—,å¹¶ä¸”çŸ¥é“å»¶è¿Ÿé˜Ÿåˆ—æ˜¯ç”±å®šæ—¶å™¨å’Œé˜Ÿåˆ—æ„æˆ,å®šæ—¶å™¨ç”±å®¢æˆ·ç«¯å®ç°,é‚£ä¹ˆé—®é¢˜å°±å˜æˆäº†æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼çš„å…·æœ‰ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ç»“æ„,èªæ˜çš„ä½ ä¸€å®šå°±æƒ³åˆ°äº†è¿™ä¸æ˜¯redisä¸­çš„zsetå˜›?å¯¹,ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åŸºäºrediså®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„1.0ç‰ˆæœ¬</p><h3 id="åŸºäºRedisçš„å»¶è¿Ÿé˜Ÿåˆ—"><a href="#åŸºäºRedisçš„å»¶è¿Ÿé˜Ÿåˆ—" class="headerlink" title="åŸºäºRedisçš„å»¶è¿Ÿé˜Ÿåˆ—"></a>åŸºäºRedisçš„å»¶è¿Ÿé˜Ÿåˆ—</h3><blockquote><p>zsetå®šä¹‰:æ’åºé›†åˆï¼Œç±»ä¼¼äºé›†åˆï¼Œä½†æ¯ä¸ªå­—ç¬¦ä¸²å…ƒç´ éƒ½ä¸ä¸€ä¸ªç§°ä¸ºå¾—åˆ†çš„æµ®ç‚¹å€¼ç›¸å…³è”ã€‚ å…ƒç´ æ€»æ˜¯æŒ‰å®ƒä»¬çš„åˆ†æ•°æ’åºï¼Œå› æ­¤ä¸Setsä¸åŒï¼Œå¯ä»¥æ£€ç´¢ä¸€ç³»åˆ—å…ƒç´ </p></blockquote><ul><li>zset<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">RedissonClient</span> redisClient <span class="token operator">=</span> <span class="token function">getRedisClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">RScoredSortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> zset <span class="token operator">=</span> redisClient<span class="token punctuation">.</span><span class="token function">getScoredSortedSet</span><span class="token punctuation">(</span><span class="token string">"redisDelayQueue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    zset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">getTimeLong</span><span class="token punctuation">(</span><span class="token number">10L</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    zset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">getTimeLong</span><span class="token punctuation">(</span><span class="token number">20L</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    zset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">getTimeLong</span><span class="token punctuation">(</span><span class="token number">15L</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> values <span class="token operator">=</span> zset<span class="token punctuation">.</span><span class="token function">valueRange</span><span class="token punctuation">(</span><span class="token function">getTimeLong</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token function">getTimeLong</span><span class="token punctuation">(</span><span class="token number">0L</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        values<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">RedissonClient</span> <span class="token function">getRedisClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Config</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    config<span class="token punctuation">.</span><span class="token function">useSingleServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">"redis://localhost:6379"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">RedissonClient</span> client <span class="token operator">=</span> <span class="token class-name">Redisson</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> client<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Long</span> <span class="token function">getTimeLong</span><span class="token punctuation">(</span><span class="token class-name">Long</span> seconds<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">plusSeconds</span><span class="token punctuation">(</span>seconds<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">atZone</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEpochMilli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ul><li>RedissonDelayedTask<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">RedissonClient</span> redisClient <span class="token operator">=</span> <span class="token function">getRedisClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">RBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> blockingFairQueue <span class="token operator">=</span> redisClient<span class="token punctuation">.</span><span class="token function">getBlockingQueue</span><span class="token punctuation">(</span><span class="token string">"RedissonDelayed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">RDelayedQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> delayedQueue <span class="token operator">=</span> redisClient<span class="token punctuation">.</span><span class="token function">getDelayedQueue</span><span class="token punctuation">(</span>blockingFairQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>    delayedQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>    delayedQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>    delayedQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>blockingFairQueue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>Redissonä¹Ÿå®ç°äº†å»¶è¿Ÿé˜Ÿåˆ—(RedissonDelayedQueue),,åº•å±‚æ•°æ®ç»“æ„ä½¿ç”¨çš„æ˜¯zset,list,å‘å¸ƒ/è®¢é˜…,å¹¶ä¸”ä¹Ÿä¸æ˜¯æƒ³æˆ‘ä»¬ç°åœ¨è¿™æ ·é€šè¿‡whileå’Œæ–¹å¼æ¥ç›‘å¬å˜åŒ–çš„,æ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥çœ‹ä¸€ä¸‹Redissonå®ç°æ—¶ä½¿ç”¨çš„Luaè„šæœ¬</p><blockquote><p>ç›®å‰RedissonåŸºäºreidsçš„å»¶è¿Ÿé˜Ÿåˆ—åœ¨åŠŸèƒ½ä¸Šå¾ˆå®Œå–„äº†ä½œä¸ºå»¶è¿Ÿé˜Ÿåˆ—æ¥è¯´å·²ç»æ˜¯æ»¡è¶³çš„äº†,ä½†æ˜¯ä½œä¸ºä¸€ä¸ªå»¶æ—¶æ¶ˆæ¯é˜Ÿåˆ—æ¥è¯´è¿˜ç¼ºå°‘é‡è¯•æœºåˆ¶,ACK,å› æ­¤ä¸‹é¢ä»‹ç»ä¸¤ç§åŸºäºMQå®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„æ–¹å¼</p></blockquote><h3 id="åŸºäºRabbitMQçš„å»¶è¿Ÿé˜Ÿåˆ—"><a href="#åŸºäºRabbitMQçš„å»¶è¿Ÿé˜Ÿåˆ—" class="headerlink" title="åŸºäºRabbitMQçš„å»¶è¿Ÿé˜Ÿåˆ—"></a>åŸºäºRabbitMQçš„å»¶è¿Ÿé˜Ÿåˆ—</h3><h4 id="åŸºäºTTLçš„å®ç°æ–¹å¼"><a href="#åŸºäºTTLçš„å®ç°æ–¹å¼" class="headerlink" title="åŸºäºTTLçš„å®ç°æ–¹å¼"></a>åŸºäºTTLçš„å®ç°æ–¹å¼</h4><blockquote><p>åŸºäºç”Ÿå­˜æ—¶é—´(TTL)å’Œæ­»ä¿¡é˜Ÿåˆ—(DLX)ç‰¹æ€§å®ç°çš„å»¶è¿Ÿé˜Ÿåˆ—;TTLæŒ‡çš„æ˜¯æ¯æ¡æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªç”Ÿå­˜æ—¶é—´,è¶…è¿‡è¿‡æœŸæ—¶é—´åæ¶ˆæ¯å°±ä¼šè¿›å…¥ä¸€ä¸ªç‰¹æ®Šé˜Ÿåˆ—,è¿™ä¸ªé˜Ÿåˆ—å°±æ˜¯æ­»ä¿¡é˜Ÿåˆ—(DLX),DLXå¯ä»¥å°†æ¶ˆæ¯é‡æ–°æŠ•é€’åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ä¸­,consumeråªéœ€è¦è®¢é˜…è¿™ä¸ªé˜Ÿåˆ—å°±å¯ä»¥å®ç°å»¶è¿Ÿæ¶ˆè´¹çš„åŠŸèƒ½</p></blockquote><ul><li>Provider</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>consumer</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="åŸºäºæ’ä»¶çš„å®ç°æ–¹å¼"><a href="#åŸºäºæ’ä»¶çš„å®ç°æ–¹å¼" class="headerlink" title="åŸºäºæ’ä»¶çš„å®ç°æ–¹å¼"></a>åŸºäºæ’ä»¶çš„å®ç°æ–¹å¼</h4><h3 id="åŸºäºRocketMQçš„å»¶è¿Ÿé˜Ÿåˆ—"><a href="#åŸºäºRocketMQçš„å»¶è¿Ÿé˜Ÿåˆ—" class="headerlink" title="åŸºäºRocketMQçš„å»¶è¿Ÿé˜Ÿåˆ—"></a>åŸºäºRocketMQçš„å»¶è¿Ÿé˜Ÿåˆ—</h3><h2 id="é™åˆ¶å’Œæ‰©å±•"><a href="#é™åˆ¶å’Œæ‰©å±•" class="headerlink" title="é™åˆ¶å’Œæ‰©å±•"></a>é™åˆ¶å’Œæ‰©å±•</h2><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://zhuanlan.zhihu.com/p/343811173">Redisson å»¶æ—¶é˜Ÿåˆ—åŸç†è¯¦è§£</a><br><a href="https://blog.csdn.net/u010059975/article/details/104537570">kafkaå»¶è¿Ÿæ¶ˆæ¯åŸå› </a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯&quot;&gt;&lt;a href=&quot;#å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯&quot; class=&quot;headerlink&quot; title=&quot;å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯&quot;&gt;&lt;/a&gt;å»¶è¿Ÿé˜Ÿåˆ—çš„å®ç°æ€è·¯&lt;/h1&gt;&lt;h2 id=&quot;å®šä¹‰&quot;&gt;&lt;a href=&quot;#å®šä¹‰&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="æ¶ˆæ¯é˜Ÿåˆ—" scheme="https://agmtopy.gitee.io/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    
    
    <category term="RocketMQ" scheme="https://agmtopy.gitee.io/tags/RocketMQ/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥å¸¸ç¬”è®°</title>
    <link href="https://agmtopy.gitee.io/2020/12/27/1.%E6%9D%82%E8%AE%B0/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0/"/>
    <id>https://agmtopy.gitee.io/2020/12/27/1.%E6%9D%82%E8%AE%B0/%E6%97%A5%E5%B8%B8%E7%AC%94%E8%AE%B0/</id>
    <published>2020-12-27T13:45:26.000Z</published>
    <updated>2021-03-27T16:13:16.103Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ—¥å¸¸ç¬”è®°"><a href="#æ—¥å¸¸ç¬”è®°" class="headerlink" title="æ—¥å¸¸ç¬”è®°"></a>æ—¥å¸¸ç¬”è®°</h1><blockquote><p>ç”¨äºè®°å½•å¸¸ç”¨çš„å‘½ä»¤ï¼Œçµæ„Ÿï¼Œå¾…åŠä¹‹ç±»çš„</p></blockquote><h2 id="docker-command"><a href="#docker-command" class="headerlink" title="docker command"></a>docker command</h2><ol><li>mysql å¯åŠ¨å‘½ä»¤</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -p <span class="token number">3306</span>:3306 --name mysql_1 -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> -d mysql:5.7.2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>mongo å¯åŠ¨å‘½ä»¤</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -itd --name mongo -p <span class="token number">27017</span>:27017 mongo --auth<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>è®¾ç½®è´¦æˆ·</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"> //åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ db.createUser<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>user: <span class="token string">"axonUser"</span>, pwd: <span class="token string">"123456"</span>, roles <span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>role: <span class="token string">"readWrite"</span>, db: <span class="token string">"interviewTest"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> //æ›´æ–°ç”¨æˆ·æƒé™db.grantRolesToUser<span class="token punctuation">(</span><span class="token string">"axonUser"</span>,<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>role:<span class="token string">"readWrite"</span>, db:<span class="token string">"axon"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>4.RabbitMQ å¯åŠ¨å‘½ä»¤</p><ul><li>windows cmd</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d --name rabbitmq -p <span class="token number">5672</span>:5672 -p <span class="token number">15672</span>:15672 -v E:<span class="token punctuation">\</span>dockerfile<span class="token punctuation">\</span>RabbitMQ:/var/lib/rabbitmq --hostname myRabbit -e <span class="token assign-left variable">RABBITMQ_DEFAULT_VHOST</span><span class="token operator">=</span>my_vhost  -e <span class="token assign-left variable">RABBITMQ_DEFAULT_USER</span><span class="token operator">=</span>admin -e <span class="token assign-left variable">RABBITMQ_DEFAULT_PASS</span><span class="token operator">=</span>admin rabbitmq:latest<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="5"><li>å¯åŠ¨RabbitMQ adminå‘½ä»¤</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java">docker exec <span class="token operator">-</span>it rabbitmq rabbitmq<span class="token operator">-</span>plugins enable rabbitmq_management<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ—¥å¸¸ç¬”è®°&quot;&gt;&lt;a href=&quot;#æ—¥å¸¸ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;æ—¥å¸¸ç¬”è®°&quot;&gt;&lt;/a&gt;æ—¥å¸¸ç¬”è®°&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;ç”¨äºè®°å½•å¸¸ç”¨çš„å‘½ä»¤ï¼Œçµæ„Ÿï¼Œå¾…åŠä¹‹ç±»çš„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;dock</summary>
      
    
    
    
    <category term="æ‚è®°" scheme="https://agmtopy.gitee.io/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="guava" scheme="https://agmtopy.gitee.io/tags/guava/"/>
    
  </entry>
  
  <entry>
    <title>ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°</title>
    <link href="https://agmtopy.gitee.io/2020/12/12/1.%E6%9D%82%E8%AE%B0/java%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/"/>
    <id>https://agmtopy.gitee.io/2020/12/12/1.%E6%9D%82%E8%AE%B0/java%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/</id>
    <published>2020-12-12T08:45:36.000Z</published>
    <updated>2021-03-27T16:13:16.098Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°"><a href="#ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°" class="headerlink" title="ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°"></a>ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°</h1><h2 id="ç¬¬ä¸€ç« -è®¤è¯†å¼‚æ­¥ç¼–ç¨‹"><a href="#ç¬¬ä¸€ç« -è®¤è¯†å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="ç¬¬ä¸€ç«  è®¤è¯†å¼‚æ­¥ç¼–ç¨‹"></a>ç¬¬ä¸€ç«  è®¤è¯†å¼‚æ­¥ç¼–ç¨‹</h2><p>åŸºç¡€æ¦‚å¿µå’Œåœºæ™¯ä»‹ç»ã€‚ç•¥â€¦</p><h2 id="ç¬¬äºŒç« -æ˜¾ç¤ºä½¿ç”¨çº¿ç¨‹å’Œçº¿ç¨‹æ± å®ç°å¼‚æ­¥ç¼–ç¨‹"><a href="#ç¬¬äºŒç« -æ˜¾ç¤ºä½¿ç”¨çº¿ç¨‹å’Œçº¿ç¨‹æ± å®ç°å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="ç¬¬äºŒç«  æ˜¾ç¤ºä½¿ç”¨çº¿ç¨‹å’Œçº¿ç¨‹æ± å®ç°å¼‚æ­¥ç¼–ç¨‹"></a>ç¬¬äºŒç«  æ˜¾ç¤ºä½¿ç”¨çº¿ç¨‹å’Œçº¿ç¨‹æ± å®ç°å¼‚æ­¥ç¼–ç¨‹</h2><p>çº¿ç¨‹å’Œçº¿ç¨‹æ± çš„ä½¿ç”¨åšäº†ä¸ªç®€ä»‹ï¼Œé‡ç‚¹è®²äº†ä¸€ä¸‹çº¿ç¨‹æ± çš„å®ç°åŸç†</p><ul><li>çº¿ç¨‹æ± çš„å®ç°åŸç†<b>ThreadPoolExecutor</b></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">runWorker</span><span class="token punctuation">(</span><span class="token class-name">Worker</span> w<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">Thread</span> wt <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Runnable</span> task <span class="token operator">=</span> w<span class="token punctuation">.</span>firstTask<span class="token punctuation">;</span>       w<span class="token punctuation">.</span>firstTask <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>       w<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// allow interrupts</span>       <span class="token keyword">boolean</span> completedAbruptly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>           <span class="token comment">//å¦‚æœå½“å‰è¿˜æœ‰ä»»åŠ¡</span>           <span class="token keyword">while</span> <span class="token punctuation">(</span>task <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>task <span class="token operator">=</span> <span class="token function">getTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               w<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// åˆ¤æ–­çº¿ç¨‹æ± çŠ¶æ€</span>               <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">runStateAtLeast</span><span class="token punctuation">(</span>ctl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> STOP<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">runStateAtLeast</span><span class="token punctuation">(</span>ctl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> STOP<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>wt<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                   wt<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                   <span class="token function">beforeExecute</span><span class="token punctuation">(</span>wt<span class="token punctuation">,</span> task<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token class-name">Throwable</span> thrown <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                   <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                       <span class="token comment">//æ‰§è¡Œä»»åŠ¡</span>                       task<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                       thrown <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token keyword">throw</span> x<span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                       thrown <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token keyword">throw</span> x<span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                       thrown <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>                       <span class="token function">afterExecute</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> thrown<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span>               <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>                   task <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                   w<span class="token punctuation">.</span>completedTasks<span class="token operator">++</span><span class="token punctuation">;</span>                   w<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token punctuation">&#125;</span>           <span class="token punctuation">&#125;</span>           completedAbruptly <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>           <span class="token function">processWorkerExit</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> completedAbruptly<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ³¨æ„ä¸¤ä¸ªåœ°æ–¹:1.Threadä¼šè¢«åŒ…è£…æˆworkerå¯¹è±¡ç”¨<b>HashSet</b>ä¿å­˜;2.Taskæ˜¯ç”¨<b>BlockingQueue</b>æ¥è¿›è¡Œä¿å­˜</p></blockquote><h2 id="ç¬¬ä¸‰ç« -åŸºäºJDKä¸­çš„Futrueå®ç°å¼‚æ­¥ç¼–ç¨‹"><a href="#ç¬¬ä¸‰ç« -åŸºäºJDKä¸­çš„Futrueå®ç°å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="ç¬¬ä¸‰ç«  åŸºäºJDKä¸­çš„Futrueå®ç°å¼‚æ­¥ç¼–ç¨‹"></a>ç¬¬ä¸‰ç«  åŸºäºJDKä¸­çš„Futrueå®ç°å¼‚æ­¥ç¼–ç¨‹</h2><h3 id="FutureTask"><a href="#FutureTask" class="headerlink" title="FutureTask"></a>FutureTask</h3><ul><li>run()</li><li>get()</li><li>cancel()<blockquote><p>æ³¨æ„ä¸€ä¸‹FutureTaskçš„stateæ˜¯ç”¨volatileè¿›è¡Œä¿®é¥°ï¼Œç»“æœoutcomeæ˜¯ç”¨stateçš„å†…å­˜å±éšœæŠ€æœ¯æ¥ä¿è¯å¯è§æ€§çš„</p></blockquote></li></ul><h3 id="CompletableFuture"><a href="#CompletableFuture" class="headerlink" title="CompletableFuture"></a>CompletableFuture</h3><ul><li>runAsync()</li><li>supplyAsync()</li><li>thenRun()</li><li>thenAccept()</li><li>thenApply()</li><li>whenComplete()</li><li>thenCompose()</li><li>thenCombine()</li><li>allOf()</li><li>anyOf()</li><li>completeExeceptionally() å¼‚å¸¸å¤„ç†</li></ul><blockquote><p>CompletableFutureé»˜è®¤æ˜¯ç”¨ForkJoinPool,è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹</p></blockquote><h2 id="Springæ¡†æ¶ä¸­çš„å¼‚æ­¥æ‰§è¡Œ"><a href="#Springæ¡†æ¶ä¸­çš„å¼‚æ­¥æ‰§è¡Œ" class="headerlink" title="Springæ¡†æ¶ä¸­çš„å¼‚æ­¥æ‰§è¡Œ"></a>Springæ¡†æ¶ä¸­çš„å¼‚æ­¥æ‰§è¡Œ</h2><h3 id="TaskExecutor"><a href="#TaskExecutor" class="headerlink" title="TaskExecutor"></a>TaskExecutor</h3><p>ç•¥â€¦</p><h3 id="Async"><a href="#Async" class="headerlink" title="@Async"></a>@Async</h3><p>@EnableAsyncæ˜¯é€šè¿‡AsyncConfigurationSelectorè¿›è¡ŒåŠ è½½ï¼Œ</p><h2 id="åŸºäºååº”å¼ç¼–ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹"><a href="#åŸºäºååº”å¼ç¼–ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="åŸºäºååº”å¼ç¼–ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹"></a>åŸºäºååº”å¼ç¼–ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹</h2><blockquote><p>ååº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§æ¶‰åŠæ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„å¼‚æ­¥ç¼–ç¨‹èŒƒå¼ã€‚è¿™æ„å‘³ç€å¯ä»¥é€šè¿‡æ‰€é‡‡ç”¨çš„ç¼–ç¨‹è¯­è¨€è½»æ¾çš„è¡¨è¾¾é™æ€æˆ–åŠ¨æ€æ•°æ®æµã€‚</p></blockquote><p>ååº”å¼ç¼–ç¨‹ä¸»è¦æ˜¯å¼ºè°ƒå¯¹æ•°æ®çš„å¤„ç†è¿‡ç¨‹æ˜¯ä¸»åŠ¨çš„ï¼Œæ˜¯ä»¥æ•°æ®ä¸ºæ ¸å¿ƒå‚ä¸å¯¹è±¡çš„è¿‡ç¨‹ã€‚ä¼ ç»Ÿçš„ç¼–ç¨‹æ¨¡å‹ä¸‹æ˜¯ä»¥ä¸šåŠ¡æµç¨‹ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡ä¸šåŠ¡æµç¨‹å°†æ•°æ®ä¸²è”èµ·æ¥ã€‚</p><h3 id="Reactive-Streamsè§„èŒƒ"><a href="#Reactive-Streamsè§„èŒƒ" class="headerlink" title="Reactive Streamsè§„èŒƒ"></a>Reactive Streamsè§„èŒƒ</h3><blockquote><p> Reactive Streamsè§„èŒƒæ˜¯æä¾›ä¸€ä¸ªä½¿ç”¨éé˜»å¡å›å‹åŠŸèƒ½å¯¹å¼‚æ­¥æµè¿›è¡Œå¤„ç†çš„æ ‡å‡†ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰ååº”å¼ç¼–ç¨‹çš„è§„èŒƒ</p></blockquote><h3 id="åŸºäºRxJavaå®ç°å¼‚æ­¥ç¼–ç¨‹"><a href="#åŸºäºRxJavaå®ç°å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="åŸºäºRxJavaå®ç°å¼‚æ­¥ç¼–ç¨‹"></a>åŸºäºRxJavaå®ç°å¼‚æ­¥ç¼–ç¨‹</h3><p>==RxJava==æ˜¯Reactive Extensionsçš„javaè¯­è¨€å®ç°ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¯å‚è€ƒå®˜ç½‘</p><h3 id="åŸºäºReactorå®ç°å¼‚æ­¥ç¼–ç¨‹"><a href="#åŸºäºReactorå®ç°å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="åŸºäºReactorå®ç°å¼‚æ­¥ç¼–ç¨‹"></a>åŸºäºReactorå®ç°å¼‚æ­¥ç¼–ç¨‹</h3><p>==Reactor==æ˜¯å¦å¤–ä¸€ä¸ªJavaè¯­è¨€ä¸‹çš„æ˜¯Reactiveå®ç°ï¼Œç›®å‰åœ¨webFluxä¸­ä½œä¸ºååº”å¼æ¡†æ¶è¿›è¡Œä½¿ç”¨</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªè½¯ä»¶å‘å±•çš„è¶‹åŠ¿å°±æ˜¯ä¼ ç»Ÿçš„ç¼–ç¨‹æ¨¡å‹æ˜¯åŸºäºcpuå¤šæ ¸æŠ€æœ¯å‘å±•çš„è¿˜ä¸æ˜¯å¾ˆå¥½çš„æ—¶å€™æå‡ºæ¥çš„ï¼Œå·²ç»ä¸å¤ªé€‚ç”¨äºç°ä»£å¤šæ ¸cpuæ¶æ„ã€‚å› æ­¤åŸºäºç°ä»£cpuå¤šæ ¸æ¶æ„å’Œä¼ ç»Ÿè½¯ä»¶æ¶æ„é¢å¯¹çš„é—®é¢˜ï¼Œæå‡ºäº†ååº”å¼ç¼–ç¨‹æ¨¡å‹ã€‚è¿™ç§ç¼–ç¨‹æ–¹å¼ä¹Ÿè®¸ä¸æ˜¯å¾ˆä¾¿äºäººç±»ç†è§£ï¼Œä½†æ˜¯ç¡®æ‹¥æœ‰æ›´é«˜çš„èµ„æºåˆ©ç”¨ç‡ã€‚å¦‚æœæœªæ¥å‡ºç°ä¸€ä¸ªåƒspringå¯¹äºjavaé‚£æ ·å¯¹äºååº”å¼ç¼–ç¨‹çš„æ¡†æ¶ï¼Œååº”å¼ç¼–ç¨‹ç†å¿µåº”è¯¥ä¼šå¾—åˆ°æ›´å¥½çš„å‘å±•ã€‚</p><h2 id="Web-Servletçš„å¼‚æ­¥éé˜»å¡å¤„ç†"><a href="#Web-Servletçš„å¼‚æ­¥éé˜»å¡å¤„ç†" class="headerlink" title="Web Servletçš„å¼‚æ­¥éé˜»å¡å¤„ç†"></a>Web Servletçš„å¼‚æ­¥éé˜»å¡å¤„ç†</h2><p>åœ¨Servlet3.0ä¸­æä¾›äº†å¼‚æ­¥å¤„ç†èƒ½åŠ›ï¼Œè®©è¯·æ±‚çº¿ç¨‹å’Œå¤„ç†çº¿ç¨‹ä¸åœ¨æ˜¯1ï¼š1çš„å…³ç³»äº†,è¿™é‡Œå°±å¯ä»¥æ›´å¥½çš„åˆ©ç”¨æœåŠ¡å™¨çš„æ€§èƒ½ã€‚<br>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ä»€ä¹ˆServlet 3æ‰æå‡ºçš„å¼‚æ­¥å¤„ç†èƒ½åŠ›å–ƒï¼Ÿ<br>è¿™æ˜¯å› ä¸ºservletæ˜¯åŸºhttp1.1çš„æ–¹æ¡ˆï¼Œhttp1.1å¼€å§‹æ”¯æŒhttpå¯ä»¥ä¿æŒé•¿è¿æ¥çš„å½¢å¼ï¼Œhhtp1.1æ–¹æ¡ˆæ˜¯1999å¹´å¼€å§‹<br>åœ¨Servlet3.1ä¸­æä¾›äº†éé˜»å¡I/Oçš„å¤„ç†æ–¹å¼:Webå®¹å™¨ä¸­çš„éé˜»å¡è¯·æ±‚å¤„ç†æœ‰åŠ©äºå¢åŠ Webå®¹å™¨å¯åŒæ—¶å¤„ç†è¯·æ±‚çš„æ•°é‡ï¼Œå…è®¸æˆ‘ä»¬åœ¨ServletInputStreamä¸Šé€šè¿‡å‡½æ•°setReadListeneræ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œè¯¥ç›‘å¬å™¨åœ¨å‘ç°å†…æ ¸ä¸­æœ‰æ•°æ®æ—¶æ‰ä¼šè¿›è¡Œå›è°ƒå¤„ç†å‡½æ•°ã€‚</p><h3 id="spring-MVCçš„å¼‚æ­¥å¤„ç†èƒ½åŠ›"><a href="#spring-MVCçš„å¼‚æ­¥å¤„ç†èƒ½åŠ›" class="headerlink" title="spring MVCçš„å¼‚æ­¥å¤„ç†èƒ½åŠ›"></a>spring MVCçš„å¼‚æ­¥å¤„ç†èƒ½åŠ›</h3><blockquote><p>Spring MVCæ˜¯å›´ç»•å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼è®¾è®¡ï¼Œç”±ä¸­å¤®å¤„ç†å™¨Servlet DispatcheaServletä½œä¸ºè¯·æ±‚å¤„ç†è¿›è¡Œè·¯ç”±åˆ†æ´¾ï¼Œå®é™…è¯·æ±‚å¤„ç†å·¥ä½œç”±å¯é…ç½®å¤„ç†ç±»è¿›è¡Œæ‰§è¡Œã€‚åœ¨Spring MVCä¸­é€šè¿‡è°ƒç”¨request.startAsync()å°†ServletRequestè®¾ç½®ä¸ºå¼‚æ­¥æ¨¡å¼ï¼Œè¿™æ ·å¯ä»¥è®©Servletåœ¨æ¨å‡ºçš„åŒæ—¶ï¼Œè®©å“åº”ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚</p></blockquote><h2 id="Spring-web-Flux"><a href="#Spring-web-Flux" class="headerlink" title="Spring web Flux"></a>Spring web Flux</h2><p>webFluxä¸spring mvcçš„å¯¹æ¯”<br><img src="https://docs.spring.io/spring-framework/docs/current/reference/html/images/spring-mvc-and-webflux-venn.png" alt="webFlux vs spring mvc"></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.infoworld.com/article/2077995/java-concurrency-asynchronous-processing-support-in-servlet-3-0.html?page=1">infoworldå…³äºservlet 3.0çš„ä»‹ç»</a><br><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html">springå®˜ç½‘å…³äºwebFluxçš„æ–‡æ¡£</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°&quot;&gt;&lt;a href=&quot;#ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°&quot;&gt;&lt;/a&gt;ã€ŠJavaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜ã€‹ç¬”è®°&lt;/h1&gt;&lt;h2 id=&quot;ç¬¬ä¸€ç« -è®¤è¯†å¼‚æ­¥ç¼–ç¨‹&quot;&gt;&lt;a hr</summary>
      
    
    
    
    <category term="javaå¹¶å‘" scheme="https://agmtopy.gitee.io/categories/java%E5%B9%B6%E5%8F%91/"/>
    
    
    <category term="ç¬”è®°" scheme="https://agmtopy.gitee.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
</feed>
